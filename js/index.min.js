(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function getDefaultExportFromCjs(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:d,ref:o!==void 0?o:null,props:u}}return reactJsxRuntime_production.Fragment=e,reactJsxRuntime_production.jsx=n,reactJsxRuntime_production.jsxs=n,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),W=Symbol.iterator;function X(re){return re===null||typeof re!="object"?null:(re=W&&re[W]||re["@@iterator"],typeof re=="function"?re:null)}var he={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_e=Object.assign,we={};function ve(re,Se,De){this.props=re,this.context=Se,this.refs=we,this.updater=De||he}ve.prototype.isReactComponent={},ve.prototype.setState=function(re,Se){if(typeof re!="object"&&typeof re!="function"&&re!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,re,Se,"setState")},ve.prototype.forceUpdate=function(re){this.updater.enqueueForceUpdate(this,re,"forceUpdate")};function pe(){}pe.prototype=ve.prototype;function Ae(re,Se,De){this.props=re,this.context=Se,this.refs=we,this.updater=De||he}var Re=Ae.prototype=new pe;Re.constructor=Ae,_e(Re,ve.prototype),Re.isPureReactComponent=!0;var Pe=Array.isArray,Oe={H:null,A:null,T:null,S:null,V:null},Ve=Object.prototype.hasOwnProperty;function ie(re,Se,De,Ie,Le,Fe){return De=Fe.ref,{$$typeof:r,type:re,key:Se,ref:De!==void 0?De:null,props:Fe}}function Z(re,Se){return ie(re.type,Se,void 0,void 0,void 0,re.props)}function ee(re){return typeof re=="object"&&re!==null&&re.$$typeof===r}function ae(re){var Se={"=":"=0",":":"=2"};return"$"+re.replace(/[=:]/g,function(De){return Se[De]})}var oe=/\/+/g;function ue(re,Se){return typeof re=="object"&&re!==null&&re.key!=null?ae(""+re.key):Se.toString(36)}function ne(){}function mn(re){switch(re.status){case"fulfilled":return re.value;case"rejected":throw re.reason;default:switch(typeof re.status=="string"?re.then(ne,ne):(re.status="pending",re.then(function(Se){re.status==="pending"&&(re.status="fulfilled",re.value=Se)},function(Se){re.status==="pending"&&(re.status="rejected",re.reason=Se)})),re.status){case"fulfilled":return re.value;case"rejected":throw re.reason}}throw re}function Mt(re,Se,De,Ie,Le){var Fe=typeof re;(Fe==="undefined"||Fe==="boolean")&&(re=null);var qe=!1;if(re===null)qe=!0;else switch(Fe){case"bigint":case"string":case"number":qe=!0;break;case"object":switch(re.$$typeof){case r:case e:qe=!0;break;case b:return qe=re._init,Mt(qe(re._payload),Se,De,Ie,Le)}}if(qe)return Le=Le(re),qe=Ie===""?"."+ue(re,0):Ie,Pe(Le)?(De="",qe!=null&&(De=qe.replace(oe,"$&/")+"/"),Mt(Le,Se,De,"",function(gr){return gr})):Le!=null&&(ee(Le)&&(Le=Z(Le,De+(Le.key==null||re&&re.key===Le.key?"":(""+Le.key).replace(oe,"$&/")+"/")+qe)),Se.push(Le)),1;qe=0;var En=Ie===""?".":Ie+":";if(Pe(re))for(var wt=0;wt<re.length;wt++)Ie=re[wt],Fe=En+ue(Ie,wt),qe+=Mt(Ie,Se,De,Fe,Le);else if(wt=X(re),typeof wt=="function")for(re=wt.call(re),wt=0;!(Ie=re.next()).done;)Ie=Ie.value,Fe=En+ue(Ie,wt++),qe+=Mt(Ie,Se,De,Fe,Le);else if(Fe==="object"){if(typeof re.then=="function")return Mt(mn(re),Se,De,Ie,Le);throw Se=String(re),Error("Objects are not valid as a React child (found: "+(Se==="[object Object]"?"object with keys {"+Object.keys(re).join(", ")+"}":Se)+"). If you meant to render a collection of children, use an array instead.")}return qe}function ge(re,Se,De){if(re==null)return re;var Ie=[],Le=0;return Mt(re,Ie,"","",function(Fe){return Se.call(De,Fe,Le++)}),Ie}function Ce(re){if(re._status===-1){var Se=re._result;Se=Se(),Se.then(function(De){(re._status===0||re._status===-1)&&(re._status=1,re._result=De)},function(De){(re._status===0||re._status===-1)&&(re._status=2,re._result=De)}),re._status===-1&&(re._status=0,re._result=Se)}if(re._status===1)return re._result.default;throw re._result}var ke=typeof reportError=="function"?reportError:function(re){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof re=="object"&&re!==null&&typeof re.message=="string"?String(re.message):String(re),error:re});if(!window.dispatchEvent(Se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",re);return}console.error(re)};function We(){}return react_production.Children={map:ge,forEach:function(re,Se,De){ge(re,function(){Se.apply(this,arguments)},De)},count:function(re){var Se=0;return ge(re,function(){Se++}),Se},toArray:function(re){return ge(re,function(Se){return Se})||[]},only:function(re){if(!ee(re))throw Error("React.Children.only expected to receive a single React element child.");return re}},react_production.Component=ve,react_production.Fragment=n,react_production.Profiler=o,react_production.PureComponent=Ae,react_production.StrictMode=s,react_production.Suspense=p,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Oe,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(re){return Oe.H.useMemoCache(re)}},react_production.cache=function(re){return function(){return re.apply(null,arguments)}},react_production.cloneElement=function(re,Se,De){if(re==null)throw Error("The argument must be a React element, but you passed "+re+".");var Ie=_e({},re.props),Le=re.key,Fe=void 0;if(Se!=null)for(qe in Se.ref!==void 0&&(Fe=void 0),Se.key!==void 0&&(Le=""+Se.key),Se)!Ve.call(Se,qe)||qe==="key"||qe==="__self"||qe==="__source"||qe==="ref"&&Se.ref===void 0||(Ie[qe]=Se[qe]);var qe=arguments.length-2;if(qe===1)Ie.children=De;else if(1<qe){for(var En=Array(qe),wt=0;wt<qe;wt++)En[wt]=arguments[wt+2];Ie.children=En}return ie(re.type,Le,void 0,void 0,Fe,Ie)},react_production.createContext=function(re){return re={$$typeof:d,_currentValue:re,_currentValue2:re,_threadCount:0,Provider:null,Consumer:null},re.Provider=re,re.Consumer={$$typeof:u,_context:re},re},react_production.createElement=function(re,Se,De){var Ie,Le={},Fe=null;if(Se!=null)for(Ie in Se.key!==void 0&&(Fe=""+Se.key),Se)Ve.call(Se,Ie)&&Ie!=="key"&&Ie!=="__self"&&Ie!=="__source"&&(Le[Ie]=Se[Ie]);var qe=arguments.length-2;if(qe===1)Le.children=De;else if(1<qe){for(var En=Array(qe),wt=0;wt<qe;wt++)En[wt]=arguments[wt+2];Le.children=En}if(re&&re.defaultProps)for(Ie in qe=re.defaultProps,qe)Le[Ie]===void 0&&(Le[Ie]=qe[Ie]);return ie(re,Fe,void 0,void 0,null,Le)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(re){return{$$typeof:m,render:re}},react_production.isValidElement=ee,react_production.lazy=function(re){return{$$typeof:b,_payload:{_status:-1,_result:re},_init:Ce}},react_production.memo=function(re,Se){return{$$typeof:g,type:re,compare:Se===void 0?null:Se}},react_production.startTransition=function(re){var Se=Oe.T,De={};Oe.T=De;try{var Ie=re(),Le=Oe.S;Le!==null&&Le(De,Ie),typeof Ie=="object"&&Ie!==null&&typeof Ie.then=="function"&&Ie.then(We,ke)}catch(Fe){ke(Fe)}finally{Oe.T=Se}},react_production.unstable_useCacheRefresh=function(){return Oe.H.useCacheRefresh()},react_production.use=function(re){return Oe.H.use(re)},react_production.useActionState=function(re,Se,De){return Oe.H.useActionState(re,Se,De)},react_production.useCallback=function(re,Se){return Oe.H.useCallback(re,Se)},react_production.useContext=function(re){return Oe.H.useContext(re)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(re,Se){return Oe.H.useDeferredValue(re,Se)},react_production.useEffect=function(re,Se,De){var Ie=Oe.H;if(typeof De=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Ie.useEffect(re,Se)},react_production.useId=function(){return Oe.H.useId()},react_production.useImperativeHandle=function(re,Se,De){return Oe.H.useImperativeHandle(re,Se,De)},react_production.useInsertionEffect=function(re,Se){return Oe.H.useInsertionEffect(re,Se)},react_production.useLayoutEffect=function(re,Se){return Oe.H.useLayoutEffect(re,Se)},react_production.useMemo=function(re,Se){return Oe.H.useMemo(re,Se)},react_production.useOptimistic=function(re,Se){return Oe.H.useOptimistic(re,Se)},react_production.useReducer=function(re,Se,De){return Oe.H.useReducer(re,Se,De)},react_production.useRef=function(re){return Oe.H.useRef(re)},react_production.useState=function(re){return Oe.H.useState(re)},react_production.useSyncExternalStore=function(re,Se,De){return Oe.H.useSyncExternalStore(re,Se,De)},react_production.useTransition=function(){return Oe.H.useTransition()},react_production.version="19.1.1",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(r){function e(ge,Ce){var ke=ge.length;ge.push(Ce);e:for(;0<ke;){var We=ke-1>>>1,re=ge[We];if(0<o(re,Ce))ge[We]=Ce,ge[ke]=re,ke=We;else break e}}function n(ge){return ge.length===0?null:ge[0]}function s(ge){if(ge.length===0)return null;var Ce=ge[0],ke=ge.pop();if(ke!==Ce){ge[0]=ke;e:for(var We=0,re=ge.length,Se=re>>>1;We<Se;){var De=2*(We+1)-1,Ie=ge[De],Le=De+1,Fe=ge[Le];if(0>o(Ie,ke))Le<re&&0>o(Fe,Ie)?(ge[We]=Fe,ge[Le]=ke,We=Le):(ge[We]=Ie,ge[De]=ke,We=De);else if(Le<re&&0>o(Fe,ke))ge[We]=Fe,ge[Le]=ke,We=Le;else break e}}return Ce}function o(ge,Ce){var ke=ge.sortIndex-Ce.sortIndex;return ke!==0?ke:ge.id-Ce.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var d=Date,m=d.now();r.unstable_now=function(){return d.now()-m}}var p=[],g=[],b=1,W=null,X=3,he=!1,_e=!1,we=!1,ve=!1,pe=typeof setTimeout=="function"?setTimeout:null,Ae=typeof clearTimeout=="function"?clearTimeout:null,Re=typeof setImmediate<"u"?setImmediate:null;function Pe(ge){for(var Ce=n(g);Ce!==null;){if(Ce.callback===null)s(g);else if(Ce.startTime<=ge)s(g),Ce.sortIndex=Ce.expirationTime,e(p,Ce);else break;Ce=n(g)}}function Oe(ge){if(we=!1,Pe(ge),!_e)if(n(p)!==null)_e=!0,Ve||(Ve=!0,ue());else{var Ce=n(g);Ce!==null&&Mt(Oe,Ce.startTime-ge)}}var Ve=!1,ie=-1,Z=5,ee=-1;function ae(){return ve?!0:!(r.unstable_now()-ee<Z)}function oe(){if(ve=!1,Ve){var ge=r.unstable_now();ee=ge;var Ce=!0;try{e:{_e=!1,we&&(we=!1,Ae(ie),ie=-1),he=!0;var ke=X;try{t:{for(Pe(ge),W=n(p);W!==null&&!(W.expirationTime>ge&&ae());){var We=W.callback;if(typeof We=="function"){W.callback=null,X=W.priorityLevel;var re=We(W.expirationTime<=ge);if(ge=r.unstable_now(),typeof re=="function"){W.callback=re,Pe(ge),Ce=!0;break t}W===n(p)&&s(p),Pe(ge)}else s(p);W=n(p)}if(W!==null)Ce=!0;else{var Se=n(g);Se!==null&&Mt(Oe,Se.startTime-ge),Ce=!1}}break e}finally{W=null,X=ke,he=!1}Ce=void 0}}finally{Ce?ue():Ve=!1}}}var ue;if(typeof Re=="function")ue=function(){Re(oe)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,mn=ne.port2;ne.port1.onmessage=oe,ue=function(){mn.postMessage(null)}}else ue=function(){pe(oe,0)};function Mt(ge,Ce){ie=pe(function(){ge(r.unstable_now())},Ce)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ge){ge.callback=null},r.unstable_forceFrameRate=function(ge){0>ge||125<ge?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<ge?Math.floor(1e3/ge):5},r.unstable_getCurrentPriorityLevel=function(){return X},r.unstable_next=function(ge){switch(X){case 1:case 2:case 3:var Ce=3;break;default:Ce=X}var ke=X;X=Ce;try{return ge()}finally{X=ke}},r.unstable_requestPaint=function(){ve=!0},r.unstable_runWithPriority=function(ge,Ce){switch(ge){case 1:case 2:case 3:case 4:case 5:break;default:ge=3}var ke=X;X=ge;try{return Ce()}finally{X=ke}},r.unstable_scheduleCallback=function(ge,Ce,ke){var We=r.unstable_now();switch(typeof ke=="object"&&ke!==null?(ke=ke.delay,ke=typeof ke=="number"&&0<ke?We+ke:We):ke=We,ge){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=ke+re,ge={id:b++,callback:Ce,priorityLevel:ge,startTime:ke,expirationTime:re,sortIndex:-1},ke>We?(ge.sortIndex=ke,e(g,ge),n(p)===null&&ge===n(g)&&(we?(Ae(ie),ie=-1):we=!0,Mt(Oe,ke-We))):(ge.sortIndex=re,e(p,ge),_e||he||(_e=!0,Ve||(Ve=!0,ue()))),ge},r.unstable_shouldYield=ae,r.unstable_wrapCallback=function(ge){var Ce=X;return function(){var ke=X;X=Ce;try{return ge.apply(this,arguments)}finally{X=ke}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var r=requireReact();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)g+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,g,b){var W=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:W==null?null:""+W,children:p,containerInfo:g,implementation:b}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,reactDom_production.createPortal=function(p,g){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(p,g,null,b)},reactDom_production.flushSync=function(p){var g=d.T,b=s.p;try{if(d.T=null,s.p=2,p)return p()}finally{d.T=g,s.p=b,s.d.f()}},reactDom_production.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},reactDom_production.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},reactDom_production.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var b=g.as,W=m(b,g.crossOrigin),X=typeof g.integrity=="string"?g.integrity:void 0,he=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;b==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:W,integrity:X,fetchPriority:he}):b==="script"&&s.d.X(p,{crossOrigin:W,integrity:X,fetchPriority:he,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},reactDom_production.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var b=m(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},reactDom_production.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var b=g.as,W=m(b,g.crossOrigin);s.d.L(p,b,{crossOrigin:W,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},reactDom_production.preloadModule=function(p,g){if(typeof p=="string")if(g){var b=m(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},reactDom_production.requestFormReset=function(p){s.d.r(p)},reactDom_production.unstable_batchedUpdates=function(p,g){return p(g)},reactDom_production.useFormState=function(p,g,b){return d.H.useFormState(p,g,b)},reactDom_production.useFormStatus=function(){return d.H.useHostTransitionStatus()},reactDom_production.version="19.1.1",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),reactDom.exports=requireReactDom_production(),reactDom.exports}var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=requireScheduler(),e=requireReact(),n=requireReactDom();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function d(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(u(t)!==t)throw Error(s(188))}function p(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return m(h),t;if(f===l)return m(h),i;f=f.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=f;else{for(var _=!1,w=h.child;w;){if(w===a){_=!0,a=h,l=f;break}if(w===l){_=!0,l=h,a=f;break}w=w.sibling}if(!_){for(w=f.child;w;){if(w===a){_=!0,a=f,l=h;break}if(w===l){_=!0,l=f,a=h;break}w=w.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function g(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=g(t),i!==null)return i;t=t.sibling}return null}var b=Object.assign,W=Symbol.for("react.element"),X=Symbol.for("react.transitional.element"),he=Symbol.for("react.portal"),_e=Symbol.for("react.fragment"),we=Symbol.for("react.strict_mode"),ve=Symbol.for("react.profiler"),pe=Symbol.for("react.provider"),Ae=Symbol.for("react.consumer"),Re=Symbol.for("react.context"),Pe=Symbol.for("react.forward_ref"),Oe=Symbol.for("react.suspense"),Ve=Symbol.for("react.suspense_list"),ie=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),ee=Symbol.for("react.activity"),ae=Symbol.for("react.memo_cache_sentinel"),oe=Symbol.iterator;function ue(t){return t===null||typeof t!="object"?null:(t=oe&&t[oe]||t["@@iterator"],typeof t=="function"?t:null)}var ne=Symbol.for("react.client.reference");function mn(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===ne?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _e:return"Fragment";case ve:return"Profiler";case we:return"StrictMode";case Oe:return"Suspense";case Ve:return"SuspenseList";case ee:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case he:return"Portal";case Re:return(t.displayName||"Context")+".Provider";case Ae:return(t._context.displayName||"Context")+".Consumer";case Pe:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ie:return i=t.displayName||null,i!==null?i:mn(t.type)||"Memo";case Z:i=t._payload,t=t._init;try{return mn(t(i))}catch{}}return null}var Mt=Array.isArray,ge=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ce=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ke={pending:!1,data:null,method:null,action:null},We=[],re=-1;function Se(t){return{current:t}}function De(t){0>re||(t.current=We[re],We[re]=null,re--)}function Ie(t,i){re++,We[re]=t.current,t.current=i}var Le=Se(null),Fe=Se(null),qe=Se(null),En=Se(null);function wt(t,i){switch(Ie(qe,i),Ie(Fe,t),Ie(Le,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?Rf(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=Rf(i),t=Cf(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}De(Le),Ie(Le,t)}function gr(){De(Le),De(Fe),De(qe)}function si(t){t.memoizedState!==null&&Ie(En,t);var i=Le.current,a=Cf(i,t.type);i!==a&&(Ie(Fe,t),Ie(Le,a))}function Pr(t){Fe.current===t&&(De(Le),De(Fe)),En.current===t&&(De(En),fo._currentValue=ke)}var Mi=Object.prototype.hasOwnProperty,ki=r.unstable_scheduleCallback,ji=r.unstable_cancelCallback,ua=r.unstable_shouldYield,vo=r.unstable_requestPaint,Wn=r.unstable_now,ql=r.unstable_getCurrentPriorityLevel,ca=r.unstable_ImmediatePriority,ys=r.unstable_UserBlockingPriority,Vi=r.unstable_NormalPriority,Hl=r.unstable_LowPriority,vs=r.unstable_IdlePriority,ha=r.log,_o=r.unstable_setDisableYieldValue,zt=null,tt=null;function qn(t){if(typeof ha=="function"&&_o(t),tt&&typeof tt.setStrictMode=="function")try{tt.setStrictMode(zt,t)}catch{}}var On=Math.clz32?Math.clz32:Li,bo=Math.log,Fl=Math.LN2;function Li(t){return t>>>=0,t===0?32:31-(bo(t)/Fl|0)|0}var Ui=256,Bi=4194304;function cr(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function _s(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,f=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var w=l&134217727;return w!==0?(l=w&~f,l!==0?h=cr(l):(_&=w,_!==0?h=cr(_):a||(a=w&~t,a!==0&&(h=cr(a))))):(w=l&~f,w!==0?h=cr(w):_!==0?h=cr(_):a||(a=l&~t,a!==0&&(h=cr(a)))),h===0?0:i!==0&&i!==h&&(i&f)===0&&(f=h&-h,a=i&-i,f>=a||f===32&&(a&4194048)!==0)?i:h}function zi(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function da(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fa(){var t=Ui;return Ui<<=1,(Ui&4194048)===0&&(Ui=256),t}function ma(){var t=Bi;return Bi<<=1,(Bi&62914560)===0&&(Bi=4194304),t}function Mr(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function kr(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function pa(t,i,a,l,h,f){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var w=t.entanglements,te=t.expirationTimes,fe=t.hiddenUpdates;for(a=_&~a;0<a;){var Ee=31-On(a),xe=1<<Ee;w[Ee]=0,te[Ee]=-1;var me=fe[Ee];if(me!==null)for(fe[Ee]=null,Ee=0;Ee<me.length;Ee++){var ye=me[Ee];ye!==null&&(ye.lane&=-536870913)}a&=~xe}l!==0&&yr(t,l,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(_&~i))}function yr(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-On(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function ga(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-On(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function ai(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function bs(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function oi(){var t=Ce.p;return t!==0?t:(t=window.event,t===void 0?32:Yf(t.type))}function Eo(t,i){var a=Ce.p;try{return Ce.p=t,i()}finally{Ce.p=a}}var kt=Math.random().toString(36).slice(2),pn="__reactFiber$"+kt,Wt="__reactProps$"+kt,Zn="__reactContainer$"+kt,ya="__reactEvents$"+kt,Gl="__reactListeners$"+kt,li="__reactHandles$"+kt,wo="__reactResources$"+kt,qi="__reactMarker$"+kt;function ui(t){delete t[pn],delete t[Wt],delete t[ya],delete t[Gl],delete t[li]}function jr(t){var i=t[pn];if(i)return i;for(var a=t.parentNode;a;){if(i=a[Zn]||a[pn]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=Of(t);t!==null;){if(a=t[pn])return a;t=Of(t)}return i}t=a,a=t.parentNode}return null}function vr(t){if(t=t[pn]||t[Zn]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function _r(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function kn(t){var i=t[wo];return i||(i=t[wo]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Gt(t){t[qi]=!0}var va=new Set,Es={};function hr(t,i){Vr(t,i),Vr(t+"Capture",i)}function Vr(t,i){for(Es[t]=i,t=0;t<i.length;t++)va.add(i[t])}var To=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xo={},Hi={};function So(t){return Mi.call(Hi,t)?!0:Mi.call(xo,t)?!1:To.test(t)?Hi[t]=!0:(xo[t]=!0,!1)}function ci(t,i,a){if(So(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function br(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function Rn(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}var Fi,Ao;function Lr(t){if(Fi===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Fi=i&&i[1]||"",Ao=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fi+t+Ao}var ws=!1;function Ts(t,i){if(!t||ws)return"";ws=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var xe=function(){throw Error()};if(Object.defineProperty(xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xe,[])}catch(ye){var me=ye}Reflect.construct(t,[],xe)}else{try{xe.call()}catch(ye){me=ye}t.call(xe.prototype)}}else{try{throw Error()}catch(ye){me=ye}(xe=t())&&typeof xe.catch=="function"&&xe.catch(function(){})}}catch(ye){if(ye&&me&&typeof ye.stack=="string")return[ye.stack,me.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),_=f[0],w=f[1];if(_&&w){var te=_.split(`
`),fe=w.split(`
`);for(h=l=0;l<te.length&&!te[l].includes("DetermineComponentFrameRoot");)l++;for(;h<fe.length&&!fe[h].includes("DetermineComponentFrameRoot");)h++;if(l===te.length||h===fe.length)for(l=te.length-1,h=fe.length-1;1<=l&&0<=h&&te[l]!==fe[h];)h--;for(;1<=l&&0<=h;l--,h--)if(te[l]!==fe[h]){if(l!==1||h!==1)do if(l--,h--,0>h||te[l]!==fe[h]){var Ee=`
`+te[l].replace(" at new "," at ");return t.displayName&&Ee.includes("<anonymous>")&&(Ee=Ee.replace("<anonymous>",t.displayName)),Ee}while(1<=l&&0<=h);break}}}finally{ws=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Lr(a):""}function _a(t){switch(t.tag){case 26:case 27:case 5:return Lr(t.type);case 16:return Lr("Lazy");case 13:return Lr("Suspense");case 19:return Lr("SuspenseList");case 0:case 15:return Ts(t.type,!1);case 11:return Ts(t.type.render,!1);case 1:return Ts(t.type,!0);case 31:return Lr("Activity");default:return""}}function xs(t){try{var i="";do i+=_a(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function jn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ba(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function $l(t){var i=ba(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),l=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(_){l=""+_,f.call(this,_)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(_){l=""+_},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Ss(t){t._valueTracker||(t._valueTracker=$l(t))}function Ea(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=ba(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function Gi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Yl=/[\n"\\]/g;function ln(t){return t.replace(Yl,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Hn(t,i,a,l,h,f,_,w){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),i!=null?_==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+jn(i)):t.value!==""+jn(i)&&(t.value=""+jn(i)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),i!=null?hi(t,_,jn(i)):a!=null?hi(t,_,jn(a)):l!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+jn(w):t.removeAttribute("name")}function $i(t,i,a,l,h,f,_,w){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),i!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||i!=null))return;a=a!=null?""+jn(a):"",i=i!=null?""+jn(i):a,w||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=w?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_)}function hi(t,i,a){i==="number"&&Gi(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Ur(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+jn(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function it(t,i,a){if(i!=null&&(i=""+jn(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+jn(a):""}function Yi(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(Mt(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=jn(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function Jn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var Ki=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ro(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||Ki.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function wa(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&Ro(t,h,l)}else for(var f in i)i.hasOwnProperty(f)&&Ro(t,f,i[f])}function Ta(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ql=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function As(t){return Ql.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Br=null;function er(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zr=null,qr=null;function xa(t){var i=vr(t);if(i&&(t=i.stateNode)){var a=t[Wt]||null;e:switch(t=i.stateNode,i.type){case"input":if(Hn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ln(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[Wt]||null;if(!h)throw Error(s(90));Hn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&Ea(l)}break e;case"textarea":it(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Ur(t,!!a.multiple,i,!1)}}}var Er=!1;function Co(t,i,a){if(Er)return t(i,a);Er=!0;try{var l=t(i);return l}finally{if(Er=!1,(zr!==null||qr!==null)&&(El(),zr&&(i=zr,t=qr,qr=zr=null,xa(i),t)))for(i=0;i<t.length;i++)xa(t[i])}}function Qi(t,i){var a=t.stateNode;if(a===null)return null;var l=a[Wt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tr=!1;if(dr)try{var Xi={};Object.defineProperty(Xi,"passive",{get:function(){tr=!0}}),window.addEventListener("test",Xi,Xi),window.removeEventListener("test",Xi,Xi)}catch{tr=!1}var wr=null,di=null,Hr=null;function Sa(){if(Hr)return Hr;var t,i=di,a=i.length,l,h="value"in wr?wr.value:wr.textContent,f=h.length;for(t=0;t<a&&i[t]===h[t];t++);var _=a-t;for(l=1;l<=_&&i[a-l]===h[f-l];l++);return Hr=h.slice(t,1<l?1-l:void 0)}function Tr(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function xr(){return!0}function Aa(){return!1}function wn(t){function i(a,l,h,f,_){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=f,this.target=_,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(a=t[w],this[w]=a?a(f):f[w]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?xr:Aa,this.isPropagationStopped=Aa,this}return b(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=xr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=xr)},persist:function(){},isPersistent:xr}),i}var et={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rs=wn(et),Wi=b({},et,{view:0,detail:0}),Io=wn(Wi),Cs,Is,Sr,Zi=b({},Wi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ts,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Sr&&(Sr&&t.type==="mousemove"?(Cs=t.screenX-Sr.screenX,Is=t.screenY-Sr.screenY):Is=Cs=0,Sr=t),Cs)},movementY:function(t){return"movementY"in t?t.movementY:Is}}),nr=wn(Zi),No=b({},Zi,{dataTransfer:0}),Xl=wn(No),Ji=b({},Wi,{relatedTarget:0}),Ns=wn(Ji),Ra=b({},et,{animationName:0,elapsedTime:0,pseudoElement:0}),Ds=wn(Ra),Do=b({},et,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Os=wn(Do),Wl=b({},et,{data:0}),Ca=wn(Wl),es={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Oo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Po={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ia(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Po[t])?!!i[t]:!1}function ts(){return Ia}var Mo=b({},Wi,{key:function(t){if(t.key){var i=es[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Tr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Oo[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ts,charCode:function(t){return t.type==="keypress"?Tr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Tr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ps=wn(Mo),ko=b({},Zi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Na=wn(ko),Fr=b({},Wi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ts}),jo=wn(Fr),Vo=b({},et,{propertyName:0,elapsedTime:0,pseudoElement:0}),Lo=wn(Vo),Uo=b({},Zi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ms=wn(Uo),Vn=b({},et,{newState:0,oldState:0}),Bo=wn(Vn),zo=[9,13,27,32],Ar=dr&&"CompositionEvent"in window,c=null;dr&&"documentMode"in document&&(c=document.documentMode);var y=dr&&"TextEvent"in window&&!c,v=dr&&(!Ar||c&&8<c&&11>=c),z=" ",ce=!1;function be(t,i){switch(t){case"keyup":return zo.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ne(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ke=!1;function gn(t,i){switch(t){case"compositionend":return Ne(i);case"keypress":return i.which!==32?null:(ce=!0,z);case"textInput":return t=i.data,t===z&&ce?null:t;default:return null}}function Qe(t,i){if(Ke)return t==="compositionend"||!Ar&&be(t,i)?(t=Sa(),Hr=di=wr=null,Ke=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return v&&i.locale!=="ko"?null:i.data;default:return null}}var Tn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yn(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Tn[t.type]:i==="textarea"}function Gr(t,i,a,l){zr?qr?qr.push(l):qr=[l]:zr=l,i=Rl(i,"onChange"),0<i.length&&(a=new Rs("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var Cn=null,Rr=null;function Da(t){wf(t,0)}function qo(t){var i=_r(t);if(Ea(i))return t}function qc(t,i){if(t==="change")return i}var Hc=!1;if(dr){var Zl;if(dr){var Jl="oninput"in document;if(!Jl){var Fc=document.createElement("div");Fc.setAttribute("oninput","return;"),Jl=typeof Fc.oninput=="function"}Zl=Jl}else Zl=!1;Hc=Zl&&(!document.documentMode||9<document.documentMode)}function Gc(){Cn&&(Cn.detachEvent("onpropertychange",$c),Rr=Cn=null)}function $c(t){if(t.propertyName==="value"&&qo(Rr)){var i=[];Gr(i,Rr,t,er(t)),Co(Da,i)}}function Jf(t,i,a){t==="focusin"?(Gc(),Cn=i,Rr=a,Cn.attachEvent("onpropertychange",$c)):t==="focusout"&&Gc()}function em(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return qo(Rr)}function tm(t,i){if(t==="click")return qo(i)}function nm(t,i){if(t==="input"||t==="change")return qo(i)}function rm(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Fn=typeof Object.is=="function"?Object.is:rm;function Oa(t,i){if(Fn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!Mi.call(i,h)||!Fn(t[h],i[h]))return!1}return!0}function Yc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Kc(t,i){var a=Yc(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Yc(a)}}function Qc(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Qc(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Xc(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Gi(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=Gi(t.document)}return i}function eu(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var im=dr&&"documentMode"in document&&11>=document.documentMode,ks=null,tu=null,Pa=null,nu=!1;function Wc(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;nu||ks==null||ks!==Gi(l)||(l=ks,"selectionStart"in l&&eu(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Pa&&Oa(Pa,l)||(Pa=l,l=Rl(tu,"onSelect"),0<l.length&&(i=new Rs("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=ks)))}function ns(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var js={animationend:ns("Animation","AnimationEnd"),animationiteration:ns("Animation","AnimationIteration"),animationstart:ns("Animation","AnimationStart"),transitionrun:ns("Transition","TransitionRun"),transitionstart:ns("Transition","TransitionStart"),transitioncancel:ns("Transition","TransitionCancel"),transitionend:ns("Transition","TransitionEnd")},ru={},Zc={};dr&&(Zc=document.createElement("div").style,"AnimationEvent"in window||(delete js.animationend.animation,delete js.animationiteration.animation,delete js.animationstart.animation),"TransitionEvent"in window||delete js.transitionend.transition);function rs(t){if(ru[t])return ru[t];if(!js[t])return t;var i=js[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Zc)return ru[t]=i[a];return t}var Jc=rs("animationend"),eh=rs("animationiteration"),th=rs("animationstart"),sm=rs("transitionrun"),am=rs("transitionstart"),om=rs("transitioncancel"),nh=rs("transitionend"),rh=new Map,iu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");iu.push("scrollEnd");function fr(t,i){rh.set(t,i),hr(i,[t])}var ih=new WeakMap;function rr(t,i){if(typeof t=="object"&&t!==null){var a=ih.get(t);return a!==void 0?a:(i={value:t,source:i,stack:xs(i)},ih.set(t,i),i)}return{value:t,source:i,stack:xs(i)}}var ir=[],Vs=0,su=0;function Ho(){for(var t=Vs,i=su=Vs=0;i<t;){var a=ir[i];ir[i++]=null;var l=ir[i];ir[i++]=null;var h=ir[i];ir[i++]=null;var f=ir[i];if(ir[i++]=null,l!==null&&h!==null){var _=l.pending;_===null?h.next=h:(h.next=_.next,_.next=h),l.pending=h}f!==0&&sh(a,h,f)}}function Fo(t,i,a,l){ir[Vs++]=t,ir[Vs++]=i,ir[Vs++]=a,ir[Vs++]=l,su|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function au(t,i,a,l){return Fo(t,i,a,l),Go(t)}function Ls(t,i){return Fo(t,null,null,i),Go(t)}function sh(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&i!==null&&(h=31-On(a),t=f.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),f):null}function Go(t){if(50<io)throw io=0,dc=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Us={};function lm(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(t,i,a,l){return new lm(t,i,a,l)}function ou(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $r(t,i){var a=t.alternate;return a===null?(a=Gn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function ah(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function $o(t,i,a,l,h,f){var _=0;if(l=t,typeof t=="function")ou(t)&&(_=1);else if(typeof t=="string")_=cp(t,a,Le.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case ee:return t=Gn(31,a,i,h),t.elementType=ee,t.lanes=f,t;case _e:return is(a.children,h,f,i);case we:_=8,h|=24;break;case ve:return t=Gn(12,a,i,h|2),t.elementType=ve,t.lanes=f,t;case Oe:return t=Gn(13,a,i,h),t.elementType=Oe,t.lanes=f,t;case Ve:return t=Gn(19,a,i,h),t.elementType=Ve,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case pe:case Re:_=10;break e;case Ae:_=9;break e;case Pe:_=11;break e;case ie:_=14;break e;case Z:_=16,l=null;break e}_=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return i=Gn(_,a,i,h),i.elementType=t,i.type=l,i.lanes=f,i}function is(t,i,a,l){return t=Gn(7,t,l,i),t.lanes=a,t}function lu(t,i,a){return t=Gn(6,t,null,i),t.lanes=a,t}function uu(t,i,a){return i=Gn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Bs=[],zs=0,Yo=null,Ko=0,sr=[],ar=0,ss=null,Yr=1,Kr="";function as(t,i){Bs[zs++]=Ko,Bs[zs++]=Yo,Yo=t,Ko=i}function oh(t,i,a){sr[ar++]=Yr,sr[ar++]=Kr,sr[ar++]=ss,ss=t;var l=Yr;t=Kr;var h=32-On(l)-1;l&=~(1<<h),a+=1;var f=32-On(i)+h;if(30<f){var _=h-h%5;f=(l&(1<<_)-1).toString(32),l>>=_,h-=_,Yr=1<<32-On(i)+h|a<<h|l,Kr=f+t}else Yr=1<<f|a<<h|l,Kr=t}function cu(t){t.return!==null&&(as(t,1),oh(t,1,0))}function hu(t){for(;t===Yo;)Yo=Bs[--zs],Bs[zs]=null,Ko=Bs[--zs],Bs[zs]=null;for(;t===ss;)ss=sr[--ar],sr[ar]=null,Kr=sr[--ar],sr[ar]=null,Yr=sr[--ar],sr[ar]=null}var Ln=null,qt=null,Je=!1,os=null,Cr=!1,du=Error(s(519));function ls(t){var i=Error(s(418,""));throw ja(rr(i,t)),du}function lh(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[pn]=t,i[Wt]=l,a){case"dialog":Ye("cancel",i),Ye("close",i);break;case"iframe":case"object":case"embed":Ye("load",i);break;case"video":case"audio":for(a=0;a<ao.length;a++)Ye(ao[a],i);break;case"source":Ye("error",i);break;case"img":case"image":case"link":Ye("error",i),Ye("load",i);break;case"details":Ye("toggle",i);break;case"input":Ye("invalid",i),$i(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Ss(i);break;case"select":Ye("invalid",i);break;case"textarea":Ye("invalid",i),Yi(i,l.value,l.defaultValue,l.children),Ss(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||Af(i.textContent,a)?(l.popover!=null&&(Ye("beforetoggle",i),Ye("toggle",i)),l.onScroll!=null&&Ye("scroll",i),l.onScrollEnd!=null&&Ye("scrollend",i),l.onClick!=null&&(i.onclick=Cl),i=!0):i=!1,i||ls(t)}function uh(t){for(Ln=t.return;Ln;)switch(Ln.tag){case 5:case 13:Cr=!1;return;case 27:case 3:Cr=!0;return;default:Ln=Ln.return}}function Ma(t){if(t!==Ln)return!1;if(!Je)return uh(t),Je=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Cc(t.type,t.memoizedProps)),a=!a),a&&qt&&ls(t),uh(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){qt=pr(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}qt=null}}else i===27?(i=qt,Ci(t.type)?(t=Oc,Oc=null,qt=t):qt=i):qt=Ln?pr(t.stateNode.nextSibling):null;return!0}function ka(){qt=Ln=null,Je=!1}function ch(){var t=os;return t!==null&&(zn===null?zn=t:zn.push.apply(zn,t),os=null),t}function ja(t){os===null?os=[t]:os.push(t)}var fu=Se(null),us=null,Qr=null;function fi(t,i,a){Ie(fu,i._currentValue),i._currentValue=a}function Xr(t){t._currentValue=fu.current,De(fu)}function mu(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function pu(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var _=h.child;f=f.firstContext;e:for(;f!==null;){var w=f;f=h;for(var te=0;te<i.length;te++)if(w.context===i[te]){f.lanes|=a,w=f.alternate,w!==null&&(w.lanes|=a),mu(f.return,a,t),l||(_=null);break e}f=w.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(s(341));_.lanes|=a,f=_.alternate,f!==null&&(f.lanes|=a),mu(_,a,t),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===t){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function Va(t,i,a,l){t=null;for(var h=i,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var w=h.type;Fn(h.pendingProps.value,_.value)||(t!==null?t.push(w):t=[w])}}else if(h===En.current){if(_=h.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(fo):t=[fo])}h=h.return}t!==null&&pu(i,t,a,l),i.flags|=262144}function Qo(t){for(t=t.firstContext;t!==null;){if(!Fn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function cs(t){us=t,Qr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Mn(t){return hh(us,t)}function Xo(t,i){return us===null&&cs(t),hh(t,i)}function hh(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Qr===null){if(t===null)throw Error(s(308));Qr=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Qr=Qr.next=i;return a}var um=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},cm=r.unstable_scheduleCallback,hm=r.unstable_NormalPriority,vn={$$typeof:Re,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gu(){return{controller:new um,data:new Map,refCount:0}}function La(t){t.refCount--,t.refCount===0&&cm(hm,function(){t.controller.abort()})}var Ua=null,yu=0,qs=0,Hs=null;function dm(t,i){if(Ua===null){var a=Ua=[];yu=0,qs=_c(),Hs={status:"pending",value:void 0,then:function(l){a.push(l)}}}return yu++,i.then(dh,dh),i}function dh(){if(--yu===0&&Ua!==null){Hs!==null&&(Hs.status="fulfilled");var t=Ua;Ua=null,qs=0,Hs=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function fm(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var fh=ge.S;ge.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&dm(t,i),fh!==null&&fh(t,i)};var hs=Se(null);function vu(){var t=hs.current;return t!==null?t:At.pooledCache}function Wo(t,i){i===null?Ie(hs,hs.current):Ie(hs,i.pool)}function mh(){var t=vu();return t===null?null:{parent:vn._currentValue,pool:t}}var Ba=Error(s(460)),ph=Error(s(474)),Zo=Error(s(542)),_u={then:function(){}};function gh(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Jo(){}function yh(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Jo,Jo),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,_h(t),t;default:if(typeof i.status=="string")i.then(Jo,Jo);else{if(t=At,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,_h(t),t}throw za=i,Ba}}var za=null;function vh(){if(za===null)throw Error(s(459));var t=za;return za=null,t}function _h(t){if(t===Ba||t===Zo)throw Error(s(483))}var mi=!1;function bu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Eu(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function pi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function gi(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(nt&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=Go(t),sh(t,null,a),i}return Fo(t,l,i,a),Go(t)}function qa(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,ga(t,a)}}function wu(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=_:f=f.next=_,a=a.next}while(a!==null);f===null?h=f=i:f=f.next=i}else h=f=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Tu=!1;function Ha(){if(Tu){var t=Hs;if(t!==null)throw t}}function Fa(t,i,a,l){Tu=!1;var h=t.updateQueue;mi=!1;var f=h.firstBaseUpdate,_=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var te=w,fe=te.next;te.next=null,_===null?f=fe:_.next=fe,_=te;var Ee=t.alternate;Ee!==null&&(Ee=Ee.updateQueue,w=Ee.lastBaseUpdate,w!==_&&(w===null?Ee.firstBaseUpdate=fe:w.next=fe,Ee.lastBaseUpdate=te))}if(f!==null){var xe=h.baseState;_=0,Ee=fe=te=null,w=f;do{var me=w.lane&-536870913,ye=me!==w.lane;if(ye?(Xe&me)===me:(l&me)===me){me!==0&&me===qs&&(Tu=!0),Ee!==null&&(Ee=Ee.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var ze=t,Ue=w;me=i;var mt=a;switch(Ue.tag){case 1:if(ze=Ue.payload,typeof ze=="function"){xe=ze.call(mt,xe,me);break e}xe=ze;break e;case 3:ze.flags=ze.flags&-65537|128;case 0:if(ze=Ue.payload,me=typeof ze=="function"?ze.call(mt,xe,me):ze,me==null)break e;xe=b({},xe,me);break e;case 2:mi=!0}}me=w.callback,me!==null&&(t.flags|=64,ye&&(t.flags|=8192),ye=h.callbacks,ye===null?h.callbacks=[me]:ye.push(me))}else ye={lane:me,tag:w.tag,payload:w.payload,callback:w.callback,next:null},Ee===null?(fe=Ee=ye,te=xe):Ee=Ee.next=ye,_|=me;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;ye=w,w=ye.next,ye.next=null,h.lastBaseUpdate=ye,h.shared.pending=null}}while(!0);Ee===null&&(te=xe),h.baseState=te,h.firstBaseUpdate=fe,h.lastBaseUpdate=Ee,f===null&&(h.shared.lanes=0),xi|=_,t.lanes=_,t.memoizedState=xe}}function bh(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function Eh(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)bh(a[t],i)}var Fs=Se(null),el=Se(0);function wh(t,i){t=ri,Ie(el,t),Ie(Fs,i),ri=t|i.baseLanes}function xu(){Ie(el,ri),Ie(Fs,Fs.current)}function Su(){ri=el.current,De(Fs),De(el)}var yi=0,He=null,st=null,dn=null,tl=!1,Gs=!1,ds=!1,nl=0,Ga=0,$s=null,mm=0;function $t(){throw Error(s(321))}function Au(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!Fn(t[a],i[a]))return!1;return!0}function Ru(t,i,a,l,h,f){return yi=f,He=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,ge.H=t===null||t.memoizedState===null?sd:ad,ds=!1,f=a(l,h),ds=!1,Gs&&(f=xh(i,a,l,h)),Th(t),f}function Th(t){ge.H=ll;var i=st!==null&&st.next!==null;if(yi=0,dn=st=He=null,tl=!1,Ga=0,$s=null,i)throw Error(s(300));t===null||xn||(t=t.dependencies,t!==null&&Qo(t)&&(xn=!0))}function xh(t,i,a,l){He=t;var h=0;do{if(Gs&&($s=null),Ga=0,Gs=!1,25<=h)throw Error(s(301));if(h+=1,dn=st=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}ge.H=Em,f=i(a,l)}while(Gs);return f}function pm(){var t=ge.H,i=t.useState()[0];return i=typeof i.then=="function"?$a(i):i,t=t.useState()[0],(st!==null?st.memoizedState:null)!==t&&(He.flags|=1024),i}function Cu(){var t=nl!==0;return nl=0,t}function Iu(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Nu(t){if(tl){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}tl=!1}yi=0,dn=st=He=null,Gs=!1,Ga=nl=0,$s=null}function Un(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?He.memoizedState=dn=t:dn=dn.next=t,dn}function fn(){if(st===null){var t=He.alternate;t=t!==null?t.memoizedState:null}else t=st.next;var i=dn===null?He.memoizedState:dn.next;if(i!==null)dn=i,st=t;else{if(t===null)throw He.alternate===null?Error(s(467)):Error(s(310));st=t,t={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},dn===null?He.memoizedState=dn=t:dn=dn.next=t}return dn}function Du(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $a(t){var i=Ga;return Ga+=1,$s===null&&($s=[]),t=yh($s,t,i),i=He,(dn===null?i.memoizedState:dn.next)===null&&(i=i.alternate,ge.H=i===null||i.memoizedState===null?sd:ad),t}function rl(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return $a(t);if(t.$$typeof===Re)return Mn(t)}throw Error(s(438,String(t)))}function Ou(t){var i=null,a=He.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=He.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Du(),He.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=ae;return i.index++,a}function Wr(t,i){return typeof i=="function"?i(t):i}function il(t){var i=fn();return Pu(i,st,t)}function Pu(t,i,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,f=l.pending;if(f!==null){if(h!==null){var _=h.next;h.next=f.next,f.next=_}i.baseQueue=h=f,l.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{i=h.next;var w=_=null,te=null,fe=i,Ee=!1;do{var xe=fe.lane&-536870913;if(xe!==fe.lane?(Xe&xe)===xe:(yi&xe)===xe){var me=fe.revertLane;if(me===0)te!==null&&(te=te.next={lane:0,revertLane:0,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null}),xe===qs&&(Ee=!0);else if((yi&me)===me){fe=fe.next,me===qs&&(Ee=!0);continue}else xe={lane:0,revertLane:fe.revertLane,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null},te===null?(w=te=xe,_=f):te=te.next=xe,He.lanes|=me,xi|=me;xe=fe.action,ds&&a(f,xe),f=fe.hasEagerState?fe.eagerState:a(f,xe)}else me={lane:xe,revertLane:fe.revertLane,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null},te===null?(w=te=me,_=f):te=te.next=me,He.lanes|=xe,xi|=xe;fe=fe.next}while(fe!==null&&fe!==i);if(te===null?_=f:te.next=w,!Fn(f,t.memoizedState)&&(xn=!0,Ee&&(a=Hs,a!==null)))throw a;t.memoizedState=f,t.baseState=_,t.baseQueue=te,l.lastRenderedState=f}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Mu(t){var i=fn(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,f=i.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do f=t(f,_.action),_=_.next;while(_!==h);Fn(f,i.memoizedState)||(xn=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,l]}function Sh(t,i,a){var l=He,h=fn(),f=Je;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=i();var _=!Fn((st||h).memoizedState,a);_&&(h.memoizedState=a,xn=!0),h=h.queue;var w=Ch.bind(null,l,h,t);if(Ya(2048,8,w,[t]),h.getSnapshot!==i||_||dn!==null&&dn.memoizedState.tag&1){if(l.flags|=2048,Ys(9,sl(),Rh.bind(null,l,h,a,i),null),At===null)throw Error(s(349));f||(yi&124)!==0||Ah(l,i,a)}return a}function Ah(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=He.updateQueue,i===null?(i=Du(),He.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function Rh(t,i,a,l){i.value=a,i.getSnapshot=l,Ih(i)&&Nh(t)}function Ch(t,i,a){return a(function(){Ih(i)&&Nh(t)})}function Ih(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!Fn(t,a)}catch{return!0}}function Nh(t){var i=Ls(t,2);i!==null&&Xn(i,t,2)}function ku(t){var i=Un();if(typeof t=="function"){var a=t;if(t=a(),ds){qn(!0);try{a()}finally{qn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wr,lastRenderedState:t},i}function Dh(t,i,a,l){return t.baseState=a,Pu(t,st,typeof l=="function"?l:Wr)}function gm(t,i,a,l,h){if(ol(t))throw Error(s(485));if(t=i.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){f.listeners.push(_)}};ge.T!==null?a(!0):f.isTransition=!1,l(f),a=i.pending,a===null?(f.next=i.pending=f,Oh(i,f)):(f.next=a.next,i.pending=a.next=f)}}function Oh(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var f=ge.T,_={};ge.T=_;try{var w=a(h,l),te=ge.S;te!==null&&te(_,w),Ph(t,i,w)}catch(fe){ju(t,i,fe)}finally{ge.T=f}}else try{f=a(h,l),Ph(t,i,f)}catch(fe){ju(t,i,fe)}}function Ph(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Mh(t,i,l)},function(l){return ju(t,i,l)}):Mh(t,i,a)}function Mh(t,i,a){i.status="fulfilled",i.value=a,kh(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Oh(t,a)))}function ju(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,kh(i),i=i.next;while(i!==l)}t.action=null}function kh(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function jh(t,i){return i}function Vh(t,i){if(Je){var a=At.formState;if(a!==null){e:{var l=He;if(Je){if(qt){t:{for(var h=qt,f=Cr;h.nodeType!==8;){if(!f){h=null;break t}if(h=pr(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){qt=pr(h.nextSibling),l=h.data==="F!";break e}}ls(l)}l=!1}l&&(i=a[0])}}return a=Un(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jh,lastRenderedState:i},a.queue=l,a=nd.bind(null,He,l),l.dispatch=a,l=ku(!1),f=zu.bind(null,He,!1,l.queue),l=Un(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=gm.bind(null,He,h,f,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function Lh(t){var i=fn();return Uh(i,st,t)}function Uh(t,i,a){if(i=Pu(t,i,jh)[0],t=il(Wr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=$a(i)}catch(_){throw _===Ba?Zo:_}else l=i;i=fn();var h=i.queue,f=h.dispatch;return a!==i.memoizedState&&(He.flags|=2048,Ys(9,sl(),ym.bind(null,h,a),null)),[l,f,t]}function ym(t,i){t.action=i}function Bh(t){var i=fn(),a=st;if(a!==null)return Uh(i,a,t);fn(),i=i.memoizedState,a=fn();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function Ys(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=He.updateQueue,i===null&&(i=Du(),He.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function sl(){return{destroy:void 0,resource:void 0}}function zh(){return fn().memoizedState}function al(t,i,a,l){var h=Un();l=l===void 0?null:l,He.flags|=t,h.memoizedState=Ys(1|i,sl(),a,l)}function Ya(t,i,a,l){var h=fn();l=l===void 0?null:l;var f=h.memoizedState.inst;st!==null&&l!==null&&Au(l,st.memoizedState.deps)?h.memoizedState=Ys(i,f,a,l):(He.flags|=t,h.memoizedState=Ys(1|i,f,a,l))}function qh(t,i){al(8390656,8,t,i)}function Hh(t,i){Ya(2048,8,t,i)}function Fh(t,i){return Ya(4,2,t,i)}function Gh(t,i){return Ya(4,4,t,i)}function $h(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Yh(t,i,a){a=a!=null?a.concat([t]):null,Ya(4,4,$h.bind(null,i,t),a)}function Vu(){}function Kh(t,i){var a=fn();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Au(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function Qh(t,i){var a=fn();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Au(i,l[1]))return l[0];if(l=t(),ds){qn(!0);try{t()}finally{qn(!1)}}return a.memoizedState=[l,i],l}function Lu(t,i,a){return a===void 0||(yi&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=Zd(),He.lanes|=t,xi|=t,a)}function Xh(t,i,a,l){return Fn(a,i)?a:Fs.current!==null?(t=Lu(t,a,l),Fn(t,i)||(xn=!0),t):(yi&42)===0?(xn=!0,t.memoizedState=a):(t=Zd(),He.lanes|=t,xi|=t,i)}function Wh(t,i,a,l,h){var f=Ce.p;Ce.p=f!==0&&8>f?f:8;var _=ge.T,w={};ge.T=w,zu(t,!1,i,a);try{var te=h(),fe=ge.S;if(fe!==null&&fe(w,te),te!==null&&typeof te=="object"&&typeof te.then=="function"){var Ee=fm(te,l);Ka(t,i,Ee,Qn(t))}else Ka(t,i,l,Qn(t))}catch(xe){Ka(t,i,{then:function(){},status:"rejected",reason:xe},Qn())}finally{Ce.p=f,ge.T=_}}function vm(){}function Uu(t,i,a,l){if(t.tag!==5)throw Error(s(476));var h=Zh(t).queue;Wh(t,h,i,ke,a===null?vm:function(){return Jh(t),a(l)})}function Zh(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:ke,baseState:ke,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wr,lastRenderedState:ke},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wr,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Jh(t){var i=Zh(t).next.queue;Ka(t,i,{},Qn())}function Bu(){return Mn(fo)}function ed(){return fn().memoizedState}function td(){return fn().memoizedState}function _m(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=Qn();t=pi(a);var l=gi(i,t,a);l!==null&&(Xn(l,i,a),qa(l,i,a)),i={cache:gu()},t.payload=i;return}i=i.return}}function bm(t,i,a){var l=Qn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},ol(t)?rd(i,a):(a=au(t,i,a,l),a!==null&&(Xn(a,t,l),id(a,i,l)))}function nd(t,i,a){var l=Qn();Ka(t,i,a,l)}function Ka(t,i,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(ol(t))rd(i,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var _=i.lastRenderedState,w=f(_,a);if(h.hasEagerState=!0,h.eagerState=w,Fn(w,_))return Fo(t,i,h,0),At===null&&Ho(),!1}catch{}finally{}if(a=au(t,i,h,l),a!==null)return Xn(a,t,l),id(a,i,l),!0}return!1}function zu(t,i,a,l){if(l={lane:2,revertLane:_c(),action:l,hasEagerState:!1,eagerState:null,next:null},ol(t)){if(i)throw Error(s(479))}else i=au(t,a,l,2),i!==null&&Xn(i,t,2)}function ol(t){var i=t.alternate;return t===He||i!==null&&i===He}function rd(t,i){Gs=tl=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function id(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,ga(t,a)}}var ll={readContext:Mn,use:rl,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useLayoutEffect:$t,useInsertionEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useSyncExternalStore:$t,useId:$t,useHostTransitionStatus:$t,useFormState:$t,useActionState:$t,useOptimistic:$t,useMemoCache:$t,useCacheRefresh:$t},sd={readContext:Mn,use:rl,useCallback:function(t,i){return Un().memoizedState=[t,i===void 0?null:i],t},useContext:Mn,useEffect:qh,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,al(4194308,4,$h.bind(null,i,t),a)},useLayoutEffect:function(t,i){return al(4194308,4,t,i)},useInsertionEffect:function(t,i){al(4,2,t,i)},useMemo:function(t,i){var a=Un();i=i===void 0?null:i;var l=t();if(ds){qn(!0);try{t()}finally{qn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=Un();if(a!==void 0){var h=a(i);if(ds){qn(!0);try{a(i)}finally{qn(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=bm.bind(null,He,t),[l.memoizedState,t]},useRef:function(t){var i=Un();return t={current:t},i.memoizedState=t},useState:function(t){t=ku(t);var i=t.queue,a=nd.bind(null,He,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:Vu,useDeferredValue:function(t,i){var a=Un();return Lu(a,t,i)},useTransition:function(){var t=ku(!1);return t=Wh.bind(null,He,t.queue,!0,!1),Un().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=He,h=Un();if(Je){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),At===null)throw Error(s(349));(Xe&124)!==0||Ah(l,i,a)}h.memoizedState=a;var f={value:a,getSnapshot:i};return h.queue=f,qh(Ch.bind(null,l,f,t),[t]),l.flags|=2048,Ys(9,sl(),Rh.bind(null,l,f,a,i),null),a},useId:function(){var t=Un(),i=At.identifierPrefix;if(Je){var a=Kr,l=Yr;a=(l&~(1<<32-On(l)-1)).toString(32)+a,i="\xAB"+i+"R"+a,a=nl++,0<a&&(i+="H"+a.toString(32)),i+="\xBB"}else a=mm++,i="\xAB"+i+"r"+a.toString(32)+"\xBB";return t.memoizedState=i},useHostTransitionStatus:Bu,useFormState:Vh,useActionState:Vh,useOptimistic:function(t){var i=Un();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=zu.bind(null,He,!0,a),a.dispatch=i,[t,i]},useMemoCache:Ou,useCacheRefresh:function(){return Un().memoizedState=_m.bind(null,He)}},ad={readContext:Mn,use:rl,useCallback:Kh,useContext:Mn,useEffect:Hh,useImperativeHandle:Yh,useInsertionEffect:Fh,useLayoutEffect:Gh,useMemo:Qh,useReducer:il,useRef:zh,useState:function(){return il(Wr)},useDebugValue:Vu,useDeferredValue:function(t,i){var a=fn();return Xh(a,st.memoizedState,t,i)},useTransition:function(){var t=il(Wr)[0],i=fn().memoizedState;return[typeof t=="boolean"?t:$a(t),i]},useSyncExternalStore:Sh,useId:ed,useHostTransitionStatus:Bu,useFormState:Lh,useActionState:Lh,useOptimistic:function(t,i){var a=fn();return Dh(a,st,t,i)},useMemoCache:Ou,useCacheRefresh:td},Em={readContext:Mn,use:rl,useCallback:Kh,useContext:Mn,useEffect:Hh,useImperativeHandle:Yh,useInsertionEffect:Fh,useLayoutEffect:Gh,useMemo:Qh,useReducer:Mu,useRef:zh,useState:function(){return Mu(Wr)},useDebugValue:Vu,useDeferredValue:function(t,i){var a=fn();return st===null?Lu(a,t,i):Xh(a,st.memoizedState,t,i)},useTransition:function(){var t=Mu(Wr)[0],i=fn().memoizedState;return[typeof t=="boolean"?t:$a(t),i]},useSyncExternalStore:Sh,useId:ed,useHostTransitionStatus:Bu,useFormState:Bh,useActionState:Bh,useOptimistic:function(t,i){var a=fn();return st!==null?Dh(a,st,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Ou,useCacheRefresh:td},Ks=null,Qa=0;function ul(t){var i=Qa;return Qa+=1,Ks===null&&(Ks=[]),yh(Ks,t,i)}function Xa(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function cl(t,i){throw i.$$typeof===W?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function od(t){var i=t._init;return i(t._payload)}function ld(t){function i(le,se){if(t){var de=le.deletions;de===null?(le.deletions=[se],le.flags|=16):de.push(se)}}function a(le,se){if(!t)return null;for(;se!==null;)i(le,se),se=se.sibling;return null}function l(le){for(var se=new Map;le!==null;)le.key!==null?se.set(le.key,le):se.set(le.index,le),le=le.sibling;return se}function h(le,se){return le=$r(le,se),le.index=0,le.sibling=null,le}function f(le,se,de){return le.index=de,t?(de=le.alternate,de!==null?(de=de.index,de<se?(le.flags|=67108866,se):de):(le.flags|=67108866,se)):(le.flags|=1048576,se)}function _(le){return t&&le.alternate===null&&(le.flags|=67108866),le}function w(le,se,de,Te){return se===null||se.tag!==6?(se=lu(de,le.mode,Te),se.return=le,se):(se=h(se,de),se.return=le,se)}function te(le,se,de,Te){var Me=de.type;return Me===_e?Ee(le,se,de.props.children,Te,de.key):se!==null&&(se.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===Z&&od(Me)===se.type)?(se=h(se,de.props),Xa(se,de),se.return=le,se):(se=$o(de.type,de.key,de.props,null,le.mode,Te),Xa(se,de),se.return=le,se)}function fe(le,se,de,Te){return se===null||se.tag!==4||se.stateNode.containerInfo!==de.containerInfo||se.stateNode.implementation!==de.implementation?(se=uu(de,le.mode,Te),se.return=le,se):(se=h(se,de.children||[]),se.return=le,se)}function Ee(le,se,de,Te,Me){return se===null||se.tag!==7?(se=is(de,le.mode,Te,Me),se.return=le,se):(se=h(se,de),se.return=le,se)}function xe(le,se,de){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return se=lu(""+se,le.mode,de),se.return=le,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case X:return de=$o(se.type,se.key,se.props,null,le.mode,de),Xa(de,se),de.return=le,de;case he:return se=uu(se,le.mode,de),se.return=le,se;case Z:var Te=se._init;return se=Te(se._payload),xe(le,se,de)}if(Mt(se)||ue(se))return se=is(se,le.mode,de,null),se.return=le,se;if(typeof se.then=="function")return xe(le,ul(se),de);if(se.$$typeof===Re)return xe(le,Xo(le,se),de);cl(le,se)}return null}function me(le,se,de,Te){var Me=se!==null?se.key:null;if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return Me!==null?null:w(le,se,""+de,Te);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case X:return de.key===Me?te(le,se,de,Te):null;case he:return de.key===Me?fe(le,se,de,Te):null;case Z:return Me=de._init,de=Me(de._payload),me(le,se,de,Te)}if(Mt(de)||ue(de))return Me!==null?null:Ee(le,se,de,Te,null);if(typeof de.then=="function")return me(le,se,ul(de),Te);if(de.$$typeof===Re)return me(le,se,Xo(le,de),Te);cl(le,de)}return null}function ye(le,se,de,Te,Me){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return le=le.get(de)||null,w(se,le,""+Te,Me);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case X:return le=le.get(Te.key===null?de:Te.key)||null,te(se,le,Te,Me);case he:return le=le.get(Te.key===null?de:Te.key)||null,fe(se,le,Te,Me);case Z:var Ge=Te._init;return Te=Ge(Te._payload),ye(le,se,de,Te,Me)}if(Mt(Te)||ue(Te))return le=le.get(de)||null,Ee(se,le,Te,Me,null);if(typeof Te.then=="function")return ye(le,se,de,ul(Te),Me);if(Te.$$typeof===Re)return ye(le,se,de,Xo(se,Te),Me);cl(se,Te)}return null}function ze(le,se,de,Te){for(var Me=null,Ge=null,je=se,Be=se=0,An=null;je!==null&&Be<de.length;Be++){je.index>Be?(An=je,je=null):An=je.sibling;var Ze=me(le,je,de[Be],Te);if(Ze===null){je===null&&(je=An);break}t&&je&&Ze.alternate===null&&i(le,je),se=f(Ze,se,Be),Ge===null?Me=Ze:Ge.sibling=Ze,Ge=Ze,je=An}if(Be===de.length)return a(le,je),Je&&as(le,Be),Me;if(je===null){for(;Be<de.length;Be++)je=xe(le,de[Be],Te),je!==null&&(se=f(je,se,Be),Ge===null?Me=je:Ge.sibling=je,Ge=je);return Je&&as(le,Be),Me}for(je=l(je);Be<de.length;Be++)An=ye(je,le,Be,de[Be],Te),An!==null&&(t&&An.alternate!==null&&je.delete(An.key===null?Be:An.key),se=f(An,se,Be),Ge===null?Me=An:Ge.sibling=An,Ge=An);return t&&je.forEach(function(Pi){return i(le,Pi)}),Je&&as(le,Be),Me}function Ue(le,se,de,Te){if(de==null)throw Error(s(151));for(var Me=null,Ge=null,je=se,Be=se=0,An=null,Ze=de.next();je!==null&&!Ze.done;Be++,Ze=de.next()){je.index>Be?(An=je,je=null):An=je.sibling;var Pi=me(le,je,Ze.value,Te);if(Pi===null){je===null&&(je=An);break}t&&je&&Pi.alternate===null&&i(le,je),se=f(Pi,se,Be),Ge===null?Me=Pi:Ge.sibling=Pi,Ge=Pi,je=An}if(Ze.done)return a(le,je),Je&&as(le,Be),Me;if(je===null){for(;!Ze.done;Be++,Ze=de.next())Ze=xe(le,Ze.value,Te),Ze!==null&&(se=f(Ze,se,Be),Ge===null?Me=Ze:Ge.sibling=Ze,Ge=Ze);return Je&&as(le,Be),Me}for(je=l(je);!Ze.done;Be++,Ze=de.next())Ze=ye(je,le,Be,Ze.value,Te),Ze!==null&&(t&&Ze.alternate!==null&&je.delete(Ze.key===null?Be:Ze.key),se=f(Ze,se,Be),Ge===null?Me=Ze:Ge.sibling=Ze,Ge=Ze);return t&&je.forEach(function(wp){return i(le,wp)}),Je&&as(le,Be),Me}function mt(le,se,de,Te){if(typeof de=="object"&&de!==null&&de.type===_e&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case X:e:{for(var Me=de.key;se!==null;){if(se.key===Me){if(Me=de.type,Me===_e){if(se.tag===7){a(le,se.sibling),Te=h(se,de.props.children),Te.return=le,le=Te;break e}}else if(se.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===Z&&od(Me)===se.type){a(le,se.sibling),Te=h(se,de.props),Xa(Te,de),Te.return=le,le=Te;break e}a(le,se);break}else i(le,se);se=se.sibling}de.type===_e?(Te=is(de.props.children,le.mode,Te,de.key),Te.return=le,le=Te):(Te=$o(de.type,de.key,de.props,null,le.mode,Te),Xa(Te,de),Te.return=le,le=Te)}return _(le);case he:e:{for(Me=de.key;se!==null;){if(se.key===Me)if(se.tag===4&&se.stateNode.containerInfo===de.containerInfo&&se.stateNode.implementation===de.implementation){a(le,se.sibling),Te=h(se,de.children||[]),Te.return=le,le=Te;break e}else{a(le,se);break}else i(le,se);se=se.sibling}Te=uu(de,le.mode,Te),Te.return=le,le=Te}return _(le);case Z:return Me=de._init,de=Me(de._payload),mt(le,se,de,Te)}if(Mt(de))return ze(le,se,de,Te);if(ue(de)){if(Me=ue(de),typeof Me!="function")throw Error(s(150));return de=Me.call(de),Ue(le,se,de,Te)}if(typeof de.then=="function")return mt(le,se,ul(de),Te);if(de.$$typeof===Re)return mt(le,se,Xo(le,de),Te);cl(le,de)}return typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint"?(de=""+de,se!==null&&se.tag===6?(a(le,se.sibling),Te=h(se,de),Te.return=le,le=Te):(a(le,se),Te=lu(de,le.mode,Te),Te.return=le,le=Te),_(le)):a(le,se)}return function(le,se,de,Te){try{Qa=0;var Me=mt(le,se,de,Te);return Ks=null,Me}catch(je){if(je===Ba||je===Zo)throw je;var Ge=Gn(29,je,null,le.mode);return Ge.lanes=Te,Ge.return=le,Ge}finally{}}}var Qs=ld(!0),ud=ld(!1),or=Se(null),Ir=null;function vi(t){var i=t.alternate;Ie(bn,bn.current&1),Ie(or,t),Ir===null&&(i===null||Fs.current!==null||i.memoizedState!==null)&&(Ir=t)}function cd(t){if(t.tag===22){if(Ie(bn,bn.current),Ie(or,t),Ir===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(Ir=t)}}else _i()}function _i(){Ie(bn,bn.current),Ie(or,or.current)}function Zr(t){De(or),Ir===t&&(Ir=null),De(bn)}var bn=Se(0);function hl(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Dc(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function qu(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:b({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Hu={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=Qn(),h=pi(l);h.payload=i,a!=null&&(h.callback=a),i=gi(t,h,l),i!==null&&(Xn(i,t,l),qa(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=Qn(),h=pi(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=gi(t,h,l),i!==null&&(Xn(i,t,l),qa(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=Qn(),l=pi(a);l.tag=2,i!=null&&(l.callback=i),i=gi(t,l,a),i!==null&&(Xn(i,t,a),qa(i,t,a))}};function hd(t,i,a,l,h,f,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,_):i.prototype&&i.prototype.isPureReactComponent?!Oa(a,l)||!Oa(h,f):!0}function dd(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&Hu.enqueueReplaceState(i,i.state,null)}function fs(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=b({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var dl=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function fd(t){dl(t)}function md(t){console.error(t)}function pd(t){dl(t)}function fl(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function gd(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Fu(t,i,a){return a=pi(a),a.tag=3,a.payload={element:null},a.callback=function(){fl(t,i)},a}function yd(t){return t=pi(t),t.tag=3,t}function vd(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=l.value;t.payload=function(){return h(f)},t.callback=function(){gd(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){gd(i,a,l),typeof h!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function wm(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Va(i,a,h,!0),a=or.current,a!==null){switch(a.tag){case 13:return Ir===null?mc():a.alternate===null&&Ft===0&&(Ft=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===_u?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),gc(t,l,h)),!1;case 22:return a.flags|=65536,l===_u?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),gc(t,l,h)),!1}throw Error(s(435,a.tag))}return gc(t,l,h),mc(),!1}if(Je)return i=or.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==du&&(t=Error(s(422),{cause:l}),ja(rr(t,a)))):(l!==du&&(i=Error(s(423),{cause:l}),ja(rr(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=rr(l,a),h=Fu(t.stateNode,l,h),wu(t,h),Ft!==4&&(Ft=2)),!1;var f=Error(s(520),{cause:l});if(f=rr(f,a),ro===null?ro=[f]:ro.push(f),Ft!==4&&(Ft=2),i===null)return!0;l=rr(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Fu(a.stateNode,l,t),wu(a,t),!1;case 1:if(i=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Si===null||!Si.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=yd(h),vd(h,t,a,l),wu(a,h),!1}a=a.return}while(a!==null);return!1}var _d=Error(s(461)),xn=!1;function In(t,i,a,l){i.child=t===null?ud(i,null,a,l):Qs(i,t.child,a,l)}function bd(t,i,a,l,h){a=a.render;var f=i.ref;if("ref"in l){var _={};for(var w in l)w!=="ref"&&(_[w]=l[w])}else _=l;return cs(i),l=Ru(t,i,a,_,f,h),w=Cu(),t!==null&&!xn?(Iu(t,i,h),Jr(t,i,h)):(Je&&w&&cu(i),i.flags|=1,In(t,i,l,h),i.child)}function Ed(t,i,a,l,h){if(t===null){var f=a.type;return typeof f=="function"&&!ou(f)&&f.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=f,wd(t,i,f,l,h)):(t=$o(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(f=t.child,!Zu(t,h)){var _=f.memoizedProps;if(a=a.compare,a=a!==null?a:Oa,a(_,l)&&t.ref===i.ref)return Jr(t,i,h)}return i.flags|=1,t=$r(f,l),t.ref=i.ref,t.return=i,i.child=t}function wd(t,i,a,l,h){if(t!==null){var f=t.memoizedProps;if(Oa(f,l)&&t.ref===i.ref)if(xn=!1,i.pendingProps=l=f,Zu(t,h))(t.flags&131072)!==0&&(xn=!0);else return i.lanes=t.lanes,Jr(t,i,h)}return Gu(t,i,a,l,h)}function Td(t,i,a){var l=i.pendingProps,h=l.children,f=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=f!==null?f.baseLanes|a:a,t!==null){for(h=i.child=t.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;i.childLanes=f&~l}else i.childLanes=0,i.child=null;return xd(t,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Wo(i,f!==null?f.cachePool:null),f!==null?wh(i,f):xu(),cd(i);else return i.lanes=i.childLanes=536870912,xd(t,i,f!==null?f.baseLanes|a:a,a)}else f!==null?(Wo(i,f.cachePool),wh(i,f),_i(),i.memoizedState=null):(t!==null&&Wo(i,null),xu(),_i());return In(t,i,h,a),i.child}function xd(t,i,a,l){var h=vu();return h=h===null?null:{parent:vn._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},t!==null&&Wo(i,null),xu(),cd(i),t!==null&&Va(t,i,l,!0),null}function ml(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Gu(t,i,a,l,h){return cs(i),a=Ru(t,i,a,l,void 0,h),l=Cu(),t!==null&&!xn?(Iu(t,i,h),Jr(t,i,h)):(Je&&l&&cu(i),i.flags|=1,In(t,i,a,h),i.child)}function Sd(t,i,a,l,h,f){return cs(i),i.updateQueue=null,a=xh(i,l,a,h),Th(t),l=Cu(),t!==null&&!xn?(Iu(t,i,f),Jr(t,i,f)):(Je&&l&&cu(i),i.flags|=1,In(t,i,a,f),i.child)}function Ad(t,i,a,l,h){if(cs(i),i.stateNode===null){var f=Us,_=a.contextType;typeof _=="object"&&_!==null&&(f=Mn(_)),f=new a(l,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Hu,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=l,f.state=i.memoizedState,f.refs={},bu(i),_=a.contextType,f.context=typeof _=="object"&&_!==null?Mn(_):Us,f.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(qu(i,a,_,l),f.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(_=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),_!==f.state&&Hu.enqueueReplaceState(f,f.state,null),Fa(i,l,f,h),Ha(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){f=i.stateNode;var w=i.memoizedProps,te=fs(a,w);f.props=te;var fe=f.context,Ee=a.contextType;_=Us,typeof Ee=="object"&&Ee!==null&&(_=Mn(Ee));var xe=a.getDerivedStateFromProps;Ee=typeof xe=="function"||typeof f.getSnapshotBeforeUpdate=="function",w=i.pendingProps!==w,Ee||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(w||fe!==_)&&dd(i,f,l,_),mi=!1;var me=i.memoizedState;f.state=me,Fa(i,l,f,h),Ha(),fe=i.memoizedState,w||me!==fe||mi?(typeof xe=="function"&&(qu(i,a,xe,l),fe=i.memoizedState),(te=mi||hd(i,a,te,l,me,fe,_))?(Ee||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=fe),f.props=l,f.state=fe,f.context=_,l=te):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{f=i.stateNode,Eu(t,i),_=i.memoizedProps,Ee=fs(a,_),f.props=Ee,xe=i.pendingProps,me=f.context,fe=a.contextType,te=Us,typeof fe=="object"&&fe!==null&&(te=Mn(fe)),w=a.getDerivedStateFromProps,(fe=typeof w=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(_!==xe||me!==te)&&dd(i,f,l,te),mi=!1,me=i.memoizedState,f.state=me,Fa(i,l,f,h),Ha();var ye=i.memoizedState;_!==xe||me!==ye||mi||t!==null&&t.dependencies!==null&&Qo(t.dependencies)?(typeof w=="function"&&(qu(i,a,w,l),ye=i.memoizedState),(Ee=mi||hd(i,a,Ee,l,me,ye,te)||t!==null&&t.dependencies!==null&&Qo(t.dependencies))?(fe||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,ye,te),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,ye,te)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||_===t.memoizedProps&&me===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&me===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=ye),f.props=l,f.state=ye,f.context=te,l=Ee):(typeof f.componentDidUpdate!="function"||_===t.memoizedProps&&me===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&me===t.memoizedState||(i.flags|=1024),l=!1)}return f=l,ml(t,i),l=(i.flags&128)!==0,f||l?(f=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,t!==null&&l?(i.child=Qs(i,t.child,null,h),i.child=Qs(i,null,a,h)):In(t,i,a,h),i.memoizedState=f.state,t=i.child):t=Jr(t,i,h),t}function Rd(t,i,a,l){return ka(),i.flags|=256,In(t,i,a,l),i.child}var $u={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yu(t){return{baseLanes:t,cachePool:mh()}}function Ku(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=lr),t}function Cd(t,i,a){var l=i.pendingProps,h=!1,f=(i.flags&128)!==0,_;if((_=f)||(_=t!==null&&t.memoizedState===null?!1:(bn.current&2)!==0),_&&(h=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,t===null){if(Je){if(h?vi(i):_i(),Je){var w=qt,te;if(te=w){e:{for(te=w,w=Cr;te.nodeType!==8;){if(!w){w=null;break e}if(te=pr(te.nextSibling),te===null){w=null;break e}}w=te}w!==null?(i.memoizedState={dehydrated:w,treeContext:ss!==null?{id:Yr,overflow:Kr}:null,retryLane:536870912,hydrationErrors:null},te=Gn(18,null,null,0),te.stateNode=w,te.return=i,i.child=te,Ln=i,qt=null,te=!0):te=!1}te||ls(i)}if(w=i.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return Dc(w)?i.lanes=32:i.lanes=536870912,null;Zr(i)}return w=l.children,l=l.fallback,h?(_i(),h=i.mode,w=pl({mode:"hidden",children:w},h),l=is(l,h,a,null),w.return=i,l.return=i,w.sibling=l,i.child=w,h=i.child,h.memoizedState=Yu(a),h.childLanes=Ku(t,_,a),i.memoizedState=$u,l):(vi(i),Qu(i,w))}if(te=t.memoizedState,te!==null&&(w=te.dehydrated,w!==null)){if(f)i.flags&256?(vi(i),i.flags&=-257,i=Xu(t,i,a)):i.memoizedState!==null?(_i(),i.child=t.child,i.flags|=128,i=null):(_i(),h=l.fallback,w=i.mode,l=pl({mode:"visible",children:l.children},w),h=is(h,w,a,null),h.flags|=2,l.return=i,h.return=i,l.sibling=h,i.child=l,Qs(i,t.child,null,a),l=i.child,l.memoizedState=Yu(a),l.childLanes=Ku(t,_,a),i.memoizedState=$u,i=h);else if(vi(i),Dc(w)){if(_=w.nextSibling&&w.nextSibling.dataset,_)var fe=_.dgst;_=fe,l=Error(s(419)),l.stack="",l.digest=_,ja({value:l,source:null,stack:null}),i=Xu(t,i,a)}else if(xn||Va(t,i,a,!1),_=(a&t.childLanes)!==0,xn||_){if(_=At,_!==null&&(l=a&-a,l=(l&42)!==0?1:ai(l),l=(l&(_.suspendedLanes|a))!==0?0:l,l!==0&&l!==te.retryLane))throw te.retryLane=l,Ls(t,l),Xn(_,t,l),_d;w.data==="$?"||mc(),i=Xu(t,i,a)}else w.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=te.treeContext,qt=pr(w.nextSibling),Ln=i,Je=!0,os=null,Cr=!1,t!==null&&(sr[ar++]=Yr,sr[ar++]=Kr,sr[ar++]=ss,Yr=t.id,Kr=t.overflow,ss=i),i=Qu(i,l.children),i.flags|=4096);return i}return h?(_i(),h=l.fallback,w=i.mode,te=t.child,fe=te.sibling,l=$r(te,{mode:"hidden",children:l.children}),l.subtreeFlags=te.subtreeFlags&65011712,fe!==null?h=$r(fe,h):(h=is(h,w,a,null),h.flags|=2),h.return=i,l.return=i,l.sibling=h,i.child=l,l=h,h=i.child,w=t.child.memoizedState,w===null?w=Yu(a):(te=w.cachePool,te!==null?(fe=vn._currentValue,te=te.parent!==fe?{parent:fe,pool:fe}:te):te=mh(),w={baseLanes:w.baseLanes|a,cachePool:te}),h.memoizedState=w,h.childLanes=Ku(t,_,a),i.memoizedState=$u,l):(vi(i),a=t.child,t=a.sibling,a=$r(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(_=i.deletions,_===null?(i.deletions=[t],i.flags|=16):_.push(t)),i.child=a,i.memoizedState=null,a)}function Qu(t,i){return i=pl({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function pl(t,i){return t=Gn(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Xu(t,i,a){return Qs(i,t.child,null,a),t=Qu(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Id(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),mu(t.return,i,a)}function Wu(t,i,a,l,h){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(f.isBackwards=i,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=a,f.tailMode=h)}function Nd(t,i,a){var l=i.pendingProps,h=l.revealOrder,f=l.tail;if(In(t,i,l.children,a),l=bn.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Id(t,a,i);else if(t.tag===19)Id(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(Ie(bn,l),h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&hl(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),Wu(i,!1,h,a,f);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&hl(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Wu(i,!0,a,null,f);break;case"together":Wu(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Jr(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),xi|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Va(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=$r(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=$r(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function Zu(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Qo(t)))}function Tm(t,i,a){switch(i.tag){case 3:wt(i,i.stateNode.containerInfo),fi(i,vn,t.memoizedState.cache),ka();break;case 27:case 5:si(i);break;case 4:wt(i,i.stateNode.containerInfo);break;case 10:fi(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(vi(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Cd(t,i,a):(vi(i),t=Jr(t,i,a),t!==null?t.sibling:null);vi(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Va(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return Nd(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Ie(bn,bn.current),l)break;return null;case 22:case 23:return i.lanes=0,Td(t,i,a);case 24:fi(i,vn,t.memoizedState.cache)}return Jr(t,i,a)}function Dd(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)xn=!0;else{if(!Zu(t,a)&&(i.flags&128)===0)return xn=!1,Tm(t,i,a);xn=(t.flags&131072)!==0}else xn=!1,Je&&(i.flags&1048576)!==0&&oh(i,Ko,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var l=i.elementType,h=l._init;if(l=h(l._payload),i.type=l,typeof l=="function")ou(l)?(t=fs(l,t),i.tag=1,i=Ad(null,i,l,t,a)):(i.tag=0,i=Gu(null,i,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===Pe){i.tag=11,i=bd(null,i,l,t,a);break e}else if(h===ie){i.tag=14,i=Ed(null,i,l,t,a);break e}}throw i=mn(l)||l,Error(s(306,i,""))}}return i;case 0:return Gu(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=fs(l,i.pendingProps),Ad(t,i,l,h,a);case 3:e:{if(wt(i,i.stateNode.containerInfo),t===null)throw Error(s(387));l=i.pendingProps;var f=i.memoizedState;h=f.element,Eu(t,i),Fa(i,l,null,a);var _=i.memoizedState;if(l=_.cache,fi(i,vn,l),l!==f.cache&&pu(i,[vn],a,!0),Ha(),l=_.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=Rd(t,i,l,a);break e}else if(l!==h){h=rr(Error(s(424)),i),ja(h),i=Rd(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(qt=pr(t.firstChild),Ln=i,Je=!0,os=null,Cr=!0,a=ud(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ka(),l===h){i=Jr(t,i,a);break e}In(t,i,l,a)}i=i.child}return i;case 26:return ml(t,i),t===null?(a=jf(i.type,null,i.pendingProps,null))?i.memoizedState=a:Je||(a=i.type,t=i.pendingProps,l=Il(qe.current).createElement(a),l[pn]=i,l[Wt]=t,Dn(l,a,t),Gt(l),i.stateNode=l):i.memoizedState=jf(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return si(i),t===null&&Je&&(l=i.stateNode=Pf(i.type,i.pendingProps,qe.current),Ln=i,Cr=!0,h=qt,Ci(i.type)?(Oc=h,qt=pr(l.firstChild)):qt=h),In(t,i,i.pendingProps.children,a),ml(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Je&&((h=l=qt)&&(l=Wm(l,i.type,i.pendingProps,Cr),l!==null?(i.stateNode=l,Ln=i,qt=pr(l.firstChild),Cr=!1,h=!0):h=!1),h||ls(i)),si(i),h=i.type,f=i.pendingProps,_=t!==null?t.memoizedProps:null,l=f.children,Cc(h,f)?l=null:_!==null&&Cc(h,_)&&(i.flags|=32),i.memoizedState!==null&&(h=Ru(t,i,pm,null,null,a),fo._currentValue=h),ml(t,i),In(t,i,l,a),i.child;case 6:return t===null&&Je&&((t=a=qt)&&(a=Zm(a,i.pendingProps,Cr),a!==null?(i.stateNode=a,Ln=i,qt=null,t=!0):t=!1),t||ls(i)),null;case 13:return Cd(t,i,a);case 4:return wt(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=Qs(i,null,l,a):In(t,i,l,a),i.child;case 11:return bd(t,i,i.type,i.pendingProps,a);case 7:return In(t,i,i.pendingProps,a),i.child;case 8:return In(t,i,i.pendingProps.children,a),i.child;case 12:return In(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,fi(i,i.type,l.value),In(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,cs(i),h=Mn(h),l=l(h),i.flags|=1,In(t,i,l,a),i.child;case 14:return Ed(t,i,i.type,i.pendingProps,a);case 15:return wd(t,i,i.type,i.pendingProps,a);case 19:return Nd(t,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},t===null?(a=pl(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=$r(t.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return Td(t,i,a);case 24:return cs(i),l=Mn(vn),t===null?(h=vu(),h===null&&(h=At,f=gu(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),i.memoizedState={parent:l,cache:h},bu(i),fi(i,vn,h)):((t.lanes&a)!==0&&(Eu(t,i),Fa(i,null,null,a),Ha()),h=t.memoizedState,f=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),fi(i,vn,l)):(l=f.cache,fi(i,vn,l),l!==h.cache&&pu(i,[vn],a,!0))),In(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function ei(t){t.flags|=4}function Od(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!zf(i)){if(i=or.current,i!==null&&((Xe&4194048)===Xe?Ir!==null:(Xe&62914560)!==Xe&&(Xe&536870912)===0||i!==Ir))throw za=_u,ph;t.flags|=8192}}function gl(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?ma():536870912,t.lanes|=i,Js|=i)}function Wa(t,i){if(!Je)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Lt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function xm(t,i,a){var l=i.pendingProps;switch(hu(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(i),null;case 1:return Lt(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Xr(vn),gr(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Ma(i)?ei(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,ch())),Lt(i),null;case 26:return a=i.memoizedState,t===null?(ei(i),a!==null?(Lt(i),Od(i,a)):(Lt(i),i.flags&=-16777217)):a?a!==t.memoizedState?(ei(i),Lt(i),Od(i,a)):(Lt(i),i.flags&=-16777217):(t.memoizedProps!==l&&ei(i),Lt(i),i.flags&=-16777217),null;case 27:Pr(i),a=qe.current;var h=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==l&&ei(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return Lt(i),null}t=Le.current,Ma(i)?lh(i):(t=Pf(h,l,a),i.stateNode=t,ei(i))}return Lt(i),null;case 5:if(Pr(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&ei(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return Lt(i),null}if(t=Le.current,Ma(i))lh(i);else{switch(h=Il(qe.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[pn]=i,t[Wt]=l;e:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=t;e:switch(Dn(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&ei(i)}}return Lt(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&ei(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(t=qe.current,Ma(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=Ln,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[pn]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Af(t.nodeValue,a)),t||ls(i)}else t=Il(t).createTextNode(l),t[pn]=i,i.stateNode=t}return Lt(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Ma(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[pn]=i}else ka(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Lt(i),h=!1}else h=ch(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Zr(i),i):(Zr(i),null)}if(Zr(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==h&&(l.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),gl(i,i.updateQueue),Lt(i),null;case 4:return gr(),t===null&&Tc(i.stateNode.containerInfo),Lt(i),null;case 10:return Xr(i.type),Lt(i),null;case 19:if(De(bn),h=i.memoizedState,h===null)return Lt(i),null;if(l=(i.flags&128)!==0,f=h.rendering,f===null)if(l)Wa(h,!1);else{if(Ft!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(f=hl(t),f!==null){for(i.flags|=128,Wa(h,!1),t=f.updateQueue,i.updateQueue=t,gl(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)ah(a,t),a=a.sibling;return Ie(bn,bn.current&1|2),i.child}t=t.sibling}h.tail!==null&&Wn()>_l&&(i.flags|=128,l=!0,Wa(h,!1),i.lanes=4194304)}else{if(!l)if(t=hl(f),t!==null){if(i.flags|=128,l=!0,t=t.updateQueue,i.updateQueue=t,gl(i,t),Wa(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!Je)return Lt(i),null}else 2*Wn()-h.renderingStartTime>_l&&a!==536870912&&(i.flags|=128,l=!0,Wa(h,!1),i.lanes=4194304);h.isBackwards?(f.sibling=i.child,i.child=f):(t=h.last,t!==null?t.sibling=f:i.child=f,h.last=f)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=Wn(),i.sibling=null,t=bn.current,Ie(bn,l?t&1|2:t&1),i):(Lt(i),null);case 22:case 23:return Zr(i),Su(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(Lt(i),i.subtreeFlags&6&&(i.flags|=8192)):Lt(i),a=i.updateQueue,a!==null&&gl(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&De(hs),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Xr(vn),Lt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function Sm(t,i){switch(hu(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Xr(vn),gr(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Pr(i),null;case 13:if(Zr(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));ka()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return De(bn),null;case 4:return gr(),null;case 10:return Xr(i.type),null;case 22:case 23:return Zr(i),Su(),t!==null&&De(hs),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Xr(vn),null;case 25:return null;default:return null}}function Pd(t,i){switch(hu(i),i.tag){case 3:Xr(vn),gr();break;case 26:case 27:case 5:Pr(i);break;case 4:gr();break;case 13:Zr(i);break;case 19:De(bn);break;case 10:Xr(i.type);break;case 22:case 23:Zr(i),Su(),t!==null&&De(hs);break;case 24:Xr(vn)}}function Za(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var f=a.create,_=a.inst;l=f(),_.destroy=l}a=a.next}while(a!==h)}}catch(w){vt(i,i.return,w)}}function bi(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var f=h.next;l=f;do{if((l.tag&t)===t){var _=l.inst,w=_.destroy;if(w!==void 0){_.destroy=void 0,h=i;var te=a,fe=w;try{fe()}catch(Ee){vt(h,te,Ee)}}}l=l.next}while(l!==f)}}catch(Ee){vt(i,i.return,Ee)}}function Md(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{Eh(i,a)}catch(l){vt(t,t.return,l)}}}function kd(t,i,a){a.props=fs(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){vt(t,i,l)}}function Ja(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){vt(t,i,h)}}function Nr(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){vt(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){vt(t,i,h)}else a.current=null}function jd(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){vt(t,t.return,h)}}function Ju(t,i,a){try{var l=t.stateNode;$m(l,t.type,a,i),l[Wt]=i}catch(h){vt(t,t.return,h)}}function Vd(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ci(t.type)||t.tag===4}function ec(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Vd(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ci(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function tc(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Cl));else if(l!==4&&(l===27&&Ci(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(tc(t,i,a),t=t.sibling;t!==null;)tc(t,i,a),t=t.sibling}function yl(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&Ci(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(yl(t,i,a),t=t.sibling;t!==null;)yl(t,i,a),t=t.sibling}function Ld(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Dn(i,l,a),i[pn]=t,i[Wt]=a}catch(f){vt(t,t.return,f)}}var ti=!1,Qt=!1,nc=!1,Ud=typeof WeakSet=="function"?WeakSet:Set,Sn=null;function Am(t,i){if(t=t.containerInfo,Ac=kl,t=Xc(t),eu(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var _=0,w=-1,te=-1,fe=0,Ee=0,xe=t,me=null;t:for(;;){for(var ye;xe!==a||h!==0&&xe.nodeType!==3||(w=_+h),xe!==f||l!==0&&xe.nodeType!==3||(te=_+l),xe.nodeType===3&&(_+=xe.nodeValue.length),(ye=xe.firstChild)!==null;)me=xe,xe=ye;for(;;){if(xe===t)break t;if(me===a&&++fe===h&&(w=_),me===f&&++Ee===l&&(te=_),(ye=xe.nextSibling)!==null)break;xe=me,me=xe.parentNode}xe=ye}a=w===-1||te===-1?null:{start:w,end:te}}else a=null}a=a||{start:0,end:0}}else a=null;for(Rc={focusedElem:t,selectionRange:a},kl=!1,Sn=i;Sn!==null;)if(i=Sn,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,Sn=t;else for(;Sn!==null;){switch(i=Sn,f=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=i,h=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var ze=fs(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(ze,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(Ue){vt(a,a.return,Ue)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Nc(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Nc(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,Sn=t;break}Sn=i.return}}function Bd(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Ei(t,a),l&4&&Za(5,a);break;case 1:if(Ei(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(_){vt(a,a.return,_)}else{var h=fs(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(_){vt(a,a.return,_)}}l&64&&Md(a),l&512&&Ja(a,a.return);break;case 3:if(Ei(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Eh(t,i)}catch(_){vt(a,a.return,_)}}break;case 27:i===null&&l&4&&Ld(a);case 26:case 5:Ei(t,a),i===null&&l&4&&jd(a),l&512&&Ja(a,a.return);break;case 12:Ei(t,a);break;case 13:Ei(t,a),l&4&&Hd(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=km.bind(null,a),Jm(t,a))));break;case 22:if(l=a.memoizedState!==null||ti,!l){i=i!==null&&i.memoizedState!==null||Qt,h=ti;var f=Qt;ti=l,(Qt=i)&&!f?wi(t,a,(a.subtreeFlags&8772)!==0):Ei(t,a),ti=h,Qt=f}break;case 30:break;default:Ei(t,a)}}function zd(t){var i=t.alternate;i!==null&&(t.alternate=null,zd(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&ui(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var jt=null,Bn=!1;function ni(t,i,a){for(a=a.child;a!==null;)qd(t,i,a),a=a.sibling}function qd(t,i,a){if(tt&&typeof tt.onCommitFiberUnmount=="function")try{tt.onCommitFiberUnmount(zt,a)}catch{}switch(a.tag){case 26:Qt||Nr(a,i),ni(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Qt||Nr(a,i);var l=jt,h=Bn;Ci(a.type)&&(jt=a.stateNode,Bn=!1),ni(t,i,a),lo(a.stateNode),jt=l,Bn=h;break;case 5:Qt||Nr(a,i);case 6:if(l=jt,h=Bn,jt=null,ni(t,i,a),jt=l,Bn=h,jt!==null)if(Bn)try{(jt.nodeType===9?jt.body:jt.nodeName==="HTML"?jt.ownerDocument.body:jt).removeChild(a.stateNode)}catch(f){vt(a,i,f)}else try{jt.removeChild(a.stateNode)}catch(f){vt(a,i,f)}break;case 18:jt!==null&&(Bn?(t=jt,Df(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),yo(t)):Df(jt,a.stateNode));break;case 4:l=jt,h=Bn,jt=a.stateNode.containerInfo,Bn=!0,ni(t,i,a),jt=l,Bn=h;break;case 0:case 11:case 14:case 15:Qt||bi(2,a,i),Qt||bi(4,a,i),ni(t,i,a);break;case 1:Qt||(Nr(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&kd(a,i,l)),ni(t,i,a);break;case 21:ni(t,i,a);break;case 22:Qt=(l=Qt)||a.memoizedState!==null,ni(t,i,a),Qt=l;break;default:ni(t,i,a)}}function Hd(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{yo(t)}catch(a){vt(i,i.return,a)}}function Rm(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new Ud),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new Ud),i;default:throw Error(s(435,t.tag))}}function rc(t,i){var a=Rm(t);i.forEach(function(l){var h=jm.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function $n(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],f=t,_=i,w=_;e:for(;w!==null;){switch(w.tag){case 27:if(Ci(w.type)){jt=w.stateNode,Bn=!1;break e}break;case 5:jt=w.stateNode,Bn=!1;break e;case 3:case 4:jt=w.stateNode.containerInfo,Bn=!0;break e}w=w.return}if(jt===null)throw Error(s(160));qd(f,_,h),jt=null,Bn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Fd(i,t),i=i.sibling}var mr=null;function Fd(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:$n(i,t),Yn(t),l&4&&(bi(3,t,t.return),Za(3,t),bi(5,t,t.return));break;case 1:$n(i,t),Yn(t),l&512&&(Qt||a===null||Nr(a,a.return)),l&64&&ti&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=mr;if($n(i,t),Yn(t),l&512&&(Qt||a===null||Nr(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":f=h.getElementsByTagName("title")[0],(!f||f[qi]||f[pn]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(l),h.head.insertBefore(f,h.querySelector("head > title"))),Dn(f,l,a),f[pn]=t,Gt(f),l=f;break e;case"link":var _=Uf("link","href",h).get(l+(a.href||""));if(_){for(var w=0;w<_.length;w++)if(f=_[w],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(w,1);break t}}f=h.createElement(l),Dn(f,l,a),h.head.appendChild(f);break;case"meta":if(_=Uf("meta","content",h).get(l+(a.content||""))){for(w=0;w<_.length;w++)if(f=_[w],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(w,1);break t}}f=h.createElement(l),Dn(f,l,a),h.head.appendChild(f);break;default:throw Error(s(468,l))}f[pn]=t,Gt(f),l=f}t.stateNode=l}else Bf(h,t.type,t.stateNode);else t.stateNode=Lf(h,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?Bf(h,t.type,t.stateNode):Lf(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Ju(t,t.memoizedProps,a.memoizedProps)}break;case 27:$n(i,t),Yn(t),l&512&&(Qt||a===null||Nr(a,a.return)),a!==null&&l&4&&Ju(t,t.memoizedProps,a.memoizedProps);break;case 5:if($n(i,t),Yn(t),l&512&&(Qt||a===null||Nr(a,a.return)),t.flags&32){h=t.stateNode;try{Jn(h,"")}catch(ye){vt(t,t.return,ye)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Ju(t,h,a!==null?a.memoizedProps:h)),l&1024&&(nc=!0);break;case 6:if($n(i,t),Yn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(ye){vt(t,t.return,ye)}}break;case 3:if(Ol=null,h=mr,mr=Nl(i.containerInfo),$n(i,t),mr=h,Yn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{yo(i.containerInfo)}catch(ye){vt(t,t.return,ye)}nc&&(nc=!1,Gd(t));break;case 4:l=mr,mr=Nl(t.stateNode.containerInfo),$n(i,t),Yn(t),mr=l;break;case 12:$n(i,t),Yn(t);break;case 13:$n(i,t),Yn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(uc=Wn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,rc(t,l)));break;case 22:h=t.memoizedState!==null;var te=a!==null&&a.memoizedState!==null,fe=ti,Ee=Qt;if(ti=fe||h,Qt=Ee||te,$n(i,t),Qt=Ee,ti=fe,Yn(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||te||ti||Qt||ms(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){te=a=i;try{if(f=te.stateNode,h)_=f.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{w=te.stateNode;var xe=te.memoizedProps.style,me=xe!=null&&xe.hasOwnProperty("display")?xe.display:null;w.style.display=me==null||typeof me=="boolean"?"":(""+me).trim()}}catch(ye){vt(te,te.return,ye)}}}else if(i.tag===6){if(a===null){te=i;try{te.stateNode.nodeValue=h?"":te.memoizedProps}catch(ye){vt(te,te.return,ye)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,rc(t,a))));break;case 19:$n(i,t),Yn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,rc(t,l)));break;case 30:break;case 21:break;default:$n(i,t),Yn(t)}}function Yn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(Vd(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,f=ec(t);yl(t,f,h);break;case 5:var _=a.stateNode;a.flags&32&&(Jn(_,""),a.flags&=-33);var w=ec(t);yl(t,w,_);break;case 3:case 4:var te=a.stateNode.containerInfo,fe=ec(t);tc(t,fe,te);break;default:throw Error(s(161))}}catch(Ee){vt(t,t.return,Ee)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Gd(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;Gd(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Ei(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Bd(t,i.alternate,i),i=i.sibling}function ms(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:bi(4,i,i.return),ms(i);break;case 1:Nr(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&kd(i,i.return,a),ms(i);break;case 27:lo(i.stateNode);case 26:case 5:Nr(i,i.return),ms(i);break;case 22:i.memoizedState===null&&ms(i);break;case 30:ms(i);break;default:ms(i)}t=t.sibling}}function wi(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,f=i,_=f.flags;switch(f.tag){case 0:case 11:case 15:wi(h,f,a),Za(4,f);break;case 1:if(wi(h,f,a),l=f,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(fe){vt(l,l.return,fe)}if(l=f,h=l.updateQueue,h!==null){var w=l.stateNode;try{var te=h.shared.hiddenCallbacks;if(te!==null)for(h.shared.hiddenCallbacks=null,h=0;h<te.length;h++)bh(te[h],w)}catch(fe){vt(l,l.return,fe)}}a&&_&64&&Md(f),Ja(f,f.return);break;case 27:Ld(f);case 26:case 5:wi(h,f,a),a&&l===null&&_&4&&jd(f),Ja(f,f.return);break;case 12:wi(h,f,a);break;case 13:wi(h,f,a),a&&_&4&&Hd(h,f);break;case 22:f.memoizedState===null&&wi(h,f,a),Ja(f,f.return);break;case 30:break;default:wi(h,f,a)}i=i.sibling}}function ic(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&La(a))}function sc(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&La(t))}function Dr(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)$d(t,i,a,l),i=i.sibling}function $d(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:Dr(t,i,a,l),h&2048&&Za(9,i);break;case 1:Dr(t,i,a,l);break;case 3:Dr(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&La(t)));break;case 12:if(h&2048){Dr(t,i,a,l),t=i.stateNode;try{var f=i.memoizedProps,_=f.id,w=f.onPostCommit;typeof w=="function"&&w(_,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(te){vt(i,i.return,te)}}else Dr(t,i,a,l);break;case 13:Dr(t,i,a,l);break;case 23:break;case 22:f=i.stateNode,_=i.alternate,i.memoizedState!==null?f._visibility&2?Dr(t,i,a,l):eo(t,i):f._visibility&2?Dr(t,i,a,l):(f._visibility|=2,Xs(t,i,a,l,(i.subtreeFlags&10256)!==0)),h&2048&&ic(_,i);break;case 24:Dr(t,i,a,l),h&2048&&sc(i.alternate,i);break;default:Dr(t,i,a,l)}}function Xs(t,i,a,l,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var f=t,_=i,w=a,te=l,fe=_.flags;switch(_.tag){case 0:case 11:case 15:Xs(f,_,w,te,h),Za(8,_);break;case 23:break;case 22:var Ee=_.stateNode;_.memoizedState!==null?Ee._visibility&2?Xs(f,_,w,te,h):eo(f,_):(Ee._visibility|=2,Xs(f,_,w,te,h)),h&&fe&2048&&ic(_.alternate,_);break;case 24:Xs(f,_,w,te,h),h&&fe&2048&&sc(_.alternate,_);break;default:Xs(f,_,w,te,h)}i=i.sibling}}function eo(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:eo(a,l),h&2048&&ic(l.alternate,l);break;case 24:eo(a,l),h&2048&&sc(l.alternate,l);break;default:eo(a,l)}i=i.sibling}}var to=8192;function Ws(t){if(t.subtreeFlags&to)for(t=t.child;t!==null;)Yd(t),t=t.sibling}function Yd(t){switch(t.tag){case 26:Ws(t),t.flags&to&&t.memoizedState!==null&&dp(mr,t.memoizedState,t.memoizedProps);break;case 5:Ws(t);break;case 3:case 4:var i=mr;mr=Nl(t.stateNode.containerInfo),Ws(t),mr=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=to,to=16777216,Ws(t),to=i):Ws(t));break;default:Ws(t)}}function Kd(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function no(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Sn=l,Xd(l,t)}Kd(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Qd(t),t=t.sibling}function Qd(t){switch(t.tag){case 0:case 11:case 15:no(t),t.flags&2048&&bi(9,t,t.return);break;case 3:no(t);break;case 12:no(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,vl(t)):no(t);break;default:no(t)}}function vl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Sn=l,Xd(l,t)}Kd(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:bi(8,i,i.return),vl(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,vl(i));break;default:vl(i)}t=t.sibling}}function Xd(t,i){for(;Sn!==null;){var a=Sn;switch(a.tag){case 0:case 11:case 15:bi(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:La(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Sn=l;else e:for(a=t;Sn!==null;){l=Sn;var h=l.sibling,f=l.return;if(zd(l),l===a){Sn=null;break e}if(h!==null){h.return=f,Sn=h;break e}Sn=f}}}var Cm={getCacheForType:function(t){var i=Mn(vn),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},Im=typeof WeakMap=="function"?WeakMap:Map,nt=0,At=null,$e=null,Xe=0,rt=0,Kn=null,Ti=!1,Zs=!1,ac=!1,ri=0,Ft=0,xi=0,ps=0,oc=0,lr=0,Js=0,ro=null,zn=null,lc=!1,uc=0,_l=1/0,bl=null,Si=null,Nn=0,Ai=null,ea=null,ta=0,cc=0,hc=null,Wd=null,io=0,dc=null;function Qn(){if((nt&2)!==0&&Xe!==0)return Xe&-Xe;if(ge.T!==null){var t=qs;return t!==0?t:_c()}return oi()}function Zd(){lr===0&&(lr=(Xe&536870912)===0||Je?fa():536870912);var t=or.current;return t!==null&&(t.flags|=32),lr}function Xn(t,i,a){(t===At&&(rt===2||rt===9)||t.cancelPendingCommit!==null)&&(na(t,0),Ri(t,Xe,lr,!1)),kr(t,a),((nt&2)===0||t!==At)&&(t===At&&((nt&2)===0&&(ps|=a),Ft===4&&Ri(t,Xe,lr,!1)),Or(t))}function Jd(t,i,a){if((nt&6)!==0)throw Error(s(327));var l=!a&&(i&124)===0&&(i&t.expiredLanes)===0||zi(t,i),h=l?Om(t,i):pc(t,i,!0),f=l;do{if(h===0){Zs&&!l&&Ri(t,i,0,!1);break}else{if(a=t.current.alternate,f&&!Nm(a)){h=pc(t,i,!1),f=!1;continue}if(h===2){if(f=i,t.errorRecoveryDisabledLanes&f)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var w=t;h=ro;var te=w.current.memoizedState.isDehydrated;if(te&&(na(w,_).flags|=256),_=pc(w,_,!1),_!==2){if(ac&&!te){w.errorRecoveryDisabledLanes|=f,ps|=f,h=4;break e}f=zn,zn=h,f!==null&&(zn===null?zn=f:zn.push.apply(zn,f))}h=_}if(f=!1,h!==2)continue}}if(h===1){na(t,0),Ri(t,i,0,!0);break}e:{switch(l=t,f=h,f){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Ri(l,i,lr,!Ti);break e;case 2:zn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=uc+300-Wn(),10<h)){if(Ri(l,i,lr,!Ti),_s(l,0,!0)!==0)break e;l.timeoutHandle=If(ef.bind(null,l,a,zn,bl,lc,i,lr,ps,Js,Ti,f,2,-0,0),h);break e}ef(l,a,zn,bl,lc,i,lr,ps,Js,Ti,f,0,-0,0)}}break}while(!0);Or(t)}function ef(t,i,a,l,h,f,_,w,te,fe,Ee,xe,me,ye){if(t.timeoutHandle=-1,xe=i.subtreeFlags,(xe&8192||(xe&16785408)===16785408)&&(ho={stylesheets:null,count:0,unsuspend:hp},Yd(i),xe=fp(),xe!==null)){t.cancelPendingCommit=xe(lf.bind(null,t,i,f,a,l,h,_,w,te,Ee,1,me,ye)),Ri(t,f,_,!fe);return}lf(t,i,f,a,l,h,_,w,te)}function Nm(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],f=h.getSnapshot;h=h.value;try{if(!Fn(f(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ri(t,i,a,l){i&=~oc,i&=~ps,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var f=31-On(h),_=1<<f;l[f]=-1,h&=~_}a!==0&&yr(t,a,i)}function El(){return(nt&6)===0?(so(0),!1):!0}function fc(){if($e!==null){if(rt===0)var t=$e.return;else t=$e,Qr=us=null,Nu(t),Ks=null,Qa=0,t=$e;for(;t!==null;)Pd(t.alternate,t),t=t.return;$e=null}}function na(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,Km(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),fc(),At=t,$e=a=$r(t.current,null),Xe=i,rt=0,Kn=null,Ti=!1,Zs=zi(t,i),ac=!1,Js=lr=oc=ps=xi=Ft=0,zn=ro=null,lc=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-On(l),f=1<<h;i|=t[h],l&=~f}return ri=i,Ho(),a}function tf(t,i){He=null,ge.H=ll,i===Ba||i===Zo?(i=vh(),rt=3):i===ph?(i=vh(),rt=4):rt=i===_d?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Kn=i,$e===null&&(Ft=1,fl(t,rr(i,t.current)))}function nf(){var t=ge.H;return ge.H=ll,t===null?ll:t}function rf(){var t=ge.A;return ge.A=Cm,t}function mc(){Ft=4,Ti||(Xe&4194048)!==Xe&&or.current!==null||(Zs=!0),(xi&134217727)===0&&(ps&134217727)===0||At===null||Ri(At,Xe,lr,!1)}function pc(t,i,a){var l=nt;nt|=2;var h=nf(),f=rf();(At!==t||Xe!==i)&&(bl=null,na(t,i)),i=!1;var _=Ft;e:do try{if(rt!==0&&$e!==null){var w=$e,te=Kn;switch(rt){case 8:fc(),_=6;break e;case 3:case 2:case 9:case 6:or.current===null&&(i=!0);var fe=rt;if(rt=0,Kn=null,ra(t,w,te,fe),a&&Zs){_=0;break e}break;default:fe=rt,rt=0,Kn=null,ra(t,w,te,fe)}}Dm(),_=Ft;break}catch(Ee){tf(t,Ee)}while(!0);return i&&t.shellSuspendCounter++,Qr=us=null,nt=l,ge.H=h,ge.A=f,$e===null&&(At=null,Xe=0,Ho()),_}function Dm(){for(;$e!==null;)sf($e)}function Om(t,i){var a=nt;nt|=2;var l=nf(),h=rf();At!==t||Xe!==i?(bl=null,_l=Wn()+500,na(t,i)):Zs=zi(t,i);e:do try{if(rt!==0&&$e!==null){i=$e;var f=Kn;t:switch(rt){case 1:rt=0,Kn=null,ra(t,i,f,1);break;case 2:case 9:if(gh(f)){rt=0,Kn=null,af(i);break}i=function(){rt!==2&&rt!==9||At!==t||(rt=7),Or(t)},f.then(i,i);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:gh(f)?(rt=0,Kn=null,af(i)):(rt=0,Kn=null,ra(t,i,f,7));break;case 5:var _=null;switch($e.tag){case 26:_=$e.memoizedState;case 5:case 27:var w=$e;if(!_||zf(_)){rt=0,Kn=null;var te=w.sibling;if(te!==null)$e=te;else{var fe=w.return;fe!==null?($e=fe,wl(fe)):$e=null}break t}}rt=0,Kn=null,ra(t,i,f,5);break;case 6:rt=0,Kn=null,ra(t,i,f,6);break;case 8:fc(),Ft=6;break e;default:throw Error(s(462))}}Pm();break}catch(Ee){tf(t,Ee)}while(!0);return Qr=us=null,ge.H=l,ge.A=h,nt=a,$e!==null?0:(At=null,Xe=0,Ho(),Ft)}function Pm(){for(;$e!==null&&!ua();)sf($e)}function sf(t){var i=Dd(t.alternate,t,ri);t.memoizedProps=t.pendingProps,i===null?wl(t):$e=i}function af(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=Sd(a,i,i.pendingProps,i.type,void 0,Xe);break;case 11:i=Sd(a,i,i.pendingProps,i.type.render,i.ref,Xe);break;case 5:Nu(i);default:Pd(a,i),i=$e=ah(i,ri),i=Dd(a,i,ri)}t.memoizedProps=t.pendingProps,i===null?wl(t):$e=i}function ra(t,i,a,l){Qr=us=null,Nu(i),Ks=null,Qa=0;var h=i.return;try{if(wm(t,h,i,a,Xe)){Ft=1,fl(t,rr(a,t.current)),$e=null;return}}catch(f){if(h!==null)throw $e=h,f;Ft=1,fl(t,rr(a,t.current)),$e=null;return}i.flags&32768?(Je||l===1?t=!0:Zs||(Xe&536870912)!==0?t=!1:(Ti=t=!0,(l===2||l===9||l===3||l===6)&&(l=or.current,l!==null&&l.tag===13&&(l.flags|=16384))),of(i,t)):wl(i)}function wl(t){var i=t;do{if((i.flags&32768)!==0){of(i,Ti);return}t=i.return;var a=xm(i.alternate,i,ri);if(a!==null){$e=a;return}if(i=i.sibling,i!==null){$e=i;return}$e=i=t}while(i!==null);Ft===0&&(Ft=5)}function of(t,i){do{var a=Sm(t.alternate,t);if(a!==null){a.flags&=32767,$e=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){$e=t;return}$e=t=a}while(t!==null);Ft=6,$e=null}function lf(t,i,a,l,h,f,_,w,te){t.cancelPendingCommit=null;do Tl();while(Nn!==0);if((nt&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(f=i.lanes|i.childLanes,f|=su,pa(t,a,f,_,w,te),t===At&&($e=At=null,Xe=0),ea=i,Ai=t,ta=a,cc=f,hc=h,Wd=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Vm(Vi,function(){return ff(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=ge.T,ge.T=null,h=Ce.p,Ce.p=2,_=nt,nt|=4;try{Am(t,i,a)}finally{nt=_,Ce.p=h,ge.T=l}}Nn=1,uf(),cf(),hf()}}function uf(){if(Nn===1){Nn=0;var t=Ai,i=ea,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=ge.T,ge.T=null;var l=Ce.p;Ce.p=2;var h=nt;nt|=4;try{Fd(i,t);var f=Rc,_=Xc(t.containerInfo),w=f.focusedElem,te=f.selectionRange;if(_!==w&&w&&w.ownerDocument&&Qc(w.ownerDocument.documentElement,w)){if(te!==null&&eu(w)){var fe=te.start,Ee=te.end;if(Ee===void 0&&(Ee=fe),"selectionStart"in w)w.selectionStart=fe,w.selectionEnd=Math.min(Ee,w.value.length);else{var xe=w.ownerDocument||document,me=xe&&xe.defaultView||window;if(me.getSelection){var ye=me.getSelection(),ze=w.textContent.length,Ue=Math.min(te.start,ze),mt=te.end===void 0?Ue:Math.min(te.end,ze);!ye.extend&&Ue>mt&&(_=mt,mt=Ue,Ue=_);var le=Kc(w,Ue),se=Kc(w,mt);if(le&&se&&(ye.rangeCount!==1||ye.anchorNode!==le.node||ye.anchorOffset!==le.offset||ye.focusNode!==se.node||ye.focusOffset!==se.offset)){var de=xe.createRange();de.setStart(le.node,le.offset),ye.removeAllRanges(),Ue>mt?(ye.addRange(de),ye.extend(se.node,se.offset)):(de.setEnd(se.node,se.offset),ye.addRange(de))}}}}for(xe=[],ye=w;ye=ye.parentNode;)ye.nodeType===1&&xe.push({element:ye,left:ye.scrollLeft,top:ye.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<xe.length;w++){var Te=xe[w];Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}}kl=!!Ac,Rc=Ac=null}finally{nt=h,Ce.p=l,ge.T=a}}t.current=i,Nn=2}}function cf(){if(Nn===2){Nn=0;var t=Ai,i=ea,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=ge.T,ge.T=null;var l=Ce.p;Ce.p=2;var h=nt;nt|=4;try{Bd(t,i.alternate,i)}finally{nt=h,Ce.p=l,ge.T=a}}Nn=3}}function hf(){if(Nn===4||Nn===3){Nn=0,vo();var t=Ai,i=ea,a=ta,l=Wd;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Nn=5:(Nn=0,ea=Ai=null,df(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Si=null),bs(a),i=i.stateNode,tt&&typeof tt.onCommitFiberRoot=="function")try{tt.onCommitFiberRoot(zt,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=ge.T,h=Ce.p,Ce.p=2,ge.T=null;try{for(var f=t.onRecoverableError,_=0;_<l.length;_++){var w=l[_];f(w.value,{componentStack:w.stack})}}finally{ge.T=i,Ce.p=h}}(ta&3)!==0&&Tl(),Or(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===dc?io++:(io=0,dc=t):io=0,so(0)}}function df(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,La(i)))}function Tl(t){return uf(),cf(),hf(),ff()}function ff(){if(Nn!==5)return!1;var t=Ai,i=cc;cc=0;var a=bs(ta),l=ge.T,h=Ce.p;try{Ce.p=32>a?32:a,ge.T=null,a=hc,hc=null;var f=Ai,_=ta;if(Nn=0,ea=Ai=null,ta=0,(nt&6)!==0)throw Error(s(331));var w=nt;if(nt|=4,Qd(f.current),$d(f,f.current,_,a),nt=w,so(0,!1),tt&&typeof tt.onPostCommitFiberRoot=="function")try{tt.onPostCommitFiberRoot(zt,f)}catch{}return!0}finally{Ce.p=h,ge.T=l,df(t,i)}}function mf(t,i,a){i=rr(a,i),i=Fu(t.stateNode,i,2),t=gi(t,i,2),t!==null&&(kr(t,2),Or(t))}function vt(t,i,a){if(t.tag===3)mf(t,t,a);else for(;i!==null;){if(i.tag===3){mf(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Si===null||!Si.has(l))){t=rr(a,t),a=yd(2),l=gi(i,a,2),l!==null&&(vd(a,l,i,t),kr(l,2),Or(l));break}}i=i.return}}function gc(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new Im;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(ac=!0,h.add(a),t=Mm.bind(null,t,i,a),i.then(t,t))}function Mm(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,At===t&&(Xe&a)===a&&(Ft===4||Ft===3&&(Xe&62914560)===Xe&&300>Wn()-uc?(nt&2)===0&&na(t,0):oc|=a,Js===Xe&&(Js=0)),Or(t)}function pf(t,i){i===0&&(i=ma()),t=Ls(t,i),t!==null&&(kr(t,i),Or(t))}function km(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),pf(t,a)}function jm(t,i){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),pf(t,a)}function Vm(t,i){return ki(t,i)}var xl=null,ia=null,yc=!1,Sl=!1,vc=!1,gs=0;function Or(t){t!==ia&&t.next===null&&(ia===null?xl=ia=t:ia=ia.next=t),Sl=!0,yc||(yc=!0,Um())}function so(t,i){if(!vc&&Sl){vc=!0;do for(var a=!1,l=xl;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var f=0;else{var _=l.suspendedLanes,w=l.pingedLanes;f=(1<<31-On(42|t)+1)-1,f&=h&~(_&~w),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,_f(l,f))}else f=Xe,f=_s(l,l===At?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||zi(l,f)||(a=!0,_f(l,f));l=l.next}while(a);vc=!1}}function Lm(){gf()}function gf(){Sl=yc=!1;var t=0;gs!==0&&(Ym()&&(t=gs),gs=0);for(var i=Wn(),a=null,l=xl;l!==null;){var h=l.next,f=yf(l,i);f===0?(l.next=null,a===null?xl=h:a.next=h,h===null&&(ia=a)):(a=l,(t!==0||(f&3)!==0)&&(Sl=!0)),l=h}so(t)}function yf(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var _=31-On(f),w=1<<_,te=h[_];te===-1?((w&a)===0||(w&l)!==0)&&(h[_]=da(w,i)):te<=i&&(t.expiredLanes|=w),f&=~w}if(i=At,a=Xe,a=_s(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(rt===2||rt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&ji(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||zi(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&ji(l),bs(a)){case 2:case 8:a=ys;break;case 32:a=Vi;break;case 268435456:a=vs;break;default:a=Vi}return l=vf.bind(null,t),a=ki(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&ji(l),t.callbackPriority=2,t.callbackNode=null,2}function vf(t,i){if(Nn!==0&&Nn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Tl()&&t.callbackNode!==a)return null;var l=Xe;return l=_s(t,t===At?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Jd(t,l,i),yf(t,Wn()),t.callbackNode!=null&&t.callbackNode===a?vf.bind(null,t):null)}function _f(t,i){if(Tl())return null;Jd(t,i,!0)}function Um(){Qm(function(){(nt&6)!==0?ki(ca,Lm):gf()})}function _c(){return gs===0&&(gs=fa()),gs}function bf(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:As(""+t)}function Ef(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function Bm(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var f=bf((h[Wt]||null).action),_=l.submitter;_&&(i=(i=_[Wt]||null)?bf(i.formAction):_.getAttribute("formAction"),i!==null&&(f=i,_=null));var w=new Rs("action","action",null,l,h);t.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(gs!==0){var te=_?Ef(h,_):new FormData(h);Uu(a,{pending:!0,data:te,method:h.method,action:f},null,te)}}else typeof f=="function"&&(w.preventDefault(),te=_?Ef(h,_):new FormData(h),Uu(a,{pending:!0,data:te,method:h.method,action:f},f,te))},currentTarget:h}]})}}for(var bc=0;bc<iu.length;bc++){var Ec=iu[bc],zm=Ec.toLowerCase(),qm=Ec[0].toUpperCase()+Ec.slice(1);fr(zm,"on"+qm)}fr(Jc,"onAnimationEnd"),fr(eh,"onAnimationIteration"),fr(th,"onAnimationStart"),fr("dblclick","onDoubleClick"),fr("focusin","onFocus"),fr("focusout","onBlur"),fr(sm,"onTransitionRun"),fr(am,"onTransitionStart"),fr(om,"onTransitionCancel"),fr(nh,"onTransitionEnd"),Vr("onMouseEnter",["mouseout","mouseover"]),Vr("onMouseLeave",["mouseout","mouseover"]),Vr("onPointerEnter",["pointerout","pointerover"]),Vr("onPointerLeave",["pointerout","pointerover"]),hr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hr("onBeforeInput",["compositionend","keypress","textInput","paste"]),hr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ao="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hm=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ao));function wf(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var f=void 0;if(i)for(var _=l.length-1;0<=_;_--){var w=l[_],te=w.instance,fe=w.currentTarget;if(w=w.listener,te!==f&&h.isPropagationStopped())break e;f=w,h.currentTarget=fe;try{f(h)}catch(Ee){dl(Ee)}h.currentTarget=null,f=te}else for(_=0;_<l.length;_++){if(w=l[_],te=w.instance,fe=w.currentTarget,w=w.listener,te!==f&&h.isPropagationStopped())break e;f=w,h.currentTarget=fe;try{f(h)}catch(Ee){dl(Ee)}h.currentTarget=null,f=te}}}}function Ye(t,i){var a=i[ya];a===void 0&&(a=i[ya]=new Set);var l=t+"__bubble";a.has(l)||(Tf(i,t,2,!1),a.add(l))}function wc(t,i,a){var l=0;i&&(l|=4),Tf(a,t,l,i)}var Al="_reactListening"+Math.random().toString(36).slice(2);function Tc(t){if(!t[Al]){t[Al]=!0,va.forEach(function(a){a!=="selectionchange"&&(Hm.has(a)||wc(a,!1,t),wc(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Al]||(i[Al]=!0,wc("selectionchange",!1,i))}}function Tf(t,i,a,l){switch(Yf(i)){case 2:var h=gp;break;case 8:h=yp;break;default:h=Vc}a=h.bind(null,i,a,t),h=void 0,!tr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function xc(t,i,a,l,h){var f=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var w=l.stateNode.containerInfo;if(w===h)break;if(_===4)for(_=l.return;_!==null;){var te=_.tag;if((te===3||te===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;w!==null;){if(_=jr(w),_===null)return;if(te=_.tag,te===5||te===6||te===26||te===27){l=f=_;continue e}w=w.parentNode}}l=l.return}Co(function(){var fe=f,Ee=er(a),xe=[];e:{var me=rh.get(t);if(me!==void 0){var ye=Rs,ze=t;switch(t){case"keypress":if(Tr(a)===0)break e;case"keydown":case"keyup":ye=Ps;break;case"focusin":ze="focus",ye=Ns;break;case"focusout":ze="blur",ye=Ns;break;case"beforeblur":case"afterblur":ye=Ns;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=nr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=Xl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=jo;break;case Jc:case eh:case th:ye=Ds;break;case nh:ye=Lo;break;case"scroll":case"scrollend":ye=Io;break;case"wheel":ye=Ms;break;case"copy":case"cut":case"paste":ye=Os;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=Na;break;case"toggle":case"beforetoggle":ye=Bo}var Ue=(i&4)!==0,mt=!Ue&&(t==="scroll"||t==="scrollend"),le=Ue?me!==null?me+"Capture":null:me;Ue=[];for(var se=fe,de;se!==null;){var Te=se;if(de=Te.stateNode,Te=Te.tag,Te!==5&&Te!==26&&Te!==27||de===null||le===null||(Te=Qi(se,le),Te!=null&&Ue.push(oo(se,Te,de))),mt)break;se=se.return}0<Ue.length&&(me=new ye(me,ze,null,a,Ee),xe.push({event:me,listeners:Ue}))}}if((i&7)===0){e:{if(me=t==="mouseover"||t==="pointerover",ye=t==="mouseout"||t==="pointerout",me&&a!==Br&&(ze=a.relatedTarget||a.fromElement)&&(jr(ze)||ze[Zn]))break e;if((ye||me)&&(me=Ee.window===Ee?Ee:(me=Ee.ownerDocument)?me.defaultView||me.parentWindow:window,ye?(ze=a.relatedTarget||a.toElement,ye=fe,ze=ze?jr(ze):null,ze!==null&&(mt=u(ze),Ue=ze.tag,ze!==mt||Ue!==5&&Ue!==27&&Ue!==6)&&(ze=null)):(ye=null,ze=fe),ye!==ze)){if(Ue=nr,Te="onMouseLeave",le="onMouseEnter",se="mouse",(t==="pointerout"||t==="pointerover")&&(Ue=Na,Te="onPointerLeave",le="onPointerEnter",se="pointer"),mt=ye==null?me:_r(ye),de=ze==null?me:_r(ze),me=new Ue(Te,se+"leave",ye,a,Ee),me.target=mt,me.relatedTarget=de,Te=null,jr(Ee)===fe&&(Ue=new Ue(le,se+"enter",ze,a,Ee),Ue.target=de,Ue.relatedTarget=mt,Te=Ue),mt=Te,ye&&ze)t:{for(Ue=ye,le=ze,se=0,de=Ue;de;de=sa(de))se++;for(de=0,Te=le;Te;Te=sa(Te))de++;for(;0<se-de;)Ue=sa(Ue),se--;for(;0<de-se;)le=sa(le),de--;for(;se--;){if(Ue===le||le!==null&&Ue===le.alternate)break t;Ue=sa(Ue),le=sa(le)}Ue=null}else Ue=null;ye!==null&&xf(xe,me,ye,Ue,!1),ze!==null&&mt!==null&&xf(xe,mt,ze,Ue,!0)}}e:{if(me=fe?_r(fe):window,ye=me.nodeName&&me.nodeName.toLowerCase(),ye==="select"||ye==="input"&&me.type==="file")var Me=qc;else if(yn(me))if(Hc)Me=nm;else{Me=em;var Ge=Jf}else ye=me.nodeName,!ye||ye.toLowerCase()!=="input"||me.type!=="checkbox"&&me.type!=="radio"?fe&&Ta(fe.elementType)&&(Me=qc):Me=tm;if(Me&&(Me=Me(t,fe))){Gr(xe,Me,a,Ee);break e}Ge&&Ge(t,me,fe),t==="focusout"&&fe&&me.type==="number"&&fe.memoizedProps.value!=null&&hi(me,"number",me.value)}switch(Ge=fe?_r(fe):window,t){case"focusin":(yn(Ge)||Ge.contentEditable==="true")&&(ks=Ge,tu=fe,Pa=null);break;case"focusout":Pa=tu=ks=null;break;case"mousedown":nu=!0;break;case"contextmenu":case"mouseup":case"dragend":nu=!1,Wc(xe,a,Ee);break;case"selectionchange":if(im)break;case"keydown":case"keyup":Wc(xe,a,Ee)}var je;if(Ar)e:{switch(t){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else Ke?be(t,a)&&(Be="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Be="onCompositionStart");Be&&(v&&a.locale!=="ko"&&(Ke||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&Ke&&(je=Sa()):(wr=Ee,di="value"in wr?wr.value:wr.textContent,Ke=!0)),Ge=Rl(fe,Be),0<Ge.length&&(Be=new Ca(Be,t,null,a,Ee),xe.push({event:Be,listeners:Ge}),je?Be.data=je:(je=Ne(a),je!==null&&(Be.data=je)))),(je=y?gn(t,a):Qe(t,a))&&(Be=Rl(fe,"onBeforeInput"),0<Be.length&&(Ge=new Ca("onBeforeInput","beforeinput",null,a,Ee),xe.push({event:Ge,listeners:Be}),Ge.data=je)),Bm(xe,t,fe,a,Ee)}wf(xe,i)})}function oo(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Rl(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=Qi(t,a),h!=null&&l.unshift(oo(t,h,f)),h=Qi(t,i),h!=null&&l.push(oo(t,h,f))),t.tag===3)return l;t=t.return}return[]}function sa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function xf(t,i,a,l,h){for(var f=i._reactName,_=[];a!==null&&a!==l;){var w=a,te=w.alternate,fe=w.stateNode;if(w=w.tag,te!==null&&te===l)break;w!==5&&w!==26&&w!==27||fe===null||(te=fe,h?(fe=Qi(a,f),fe!=null&&_.unshift(oo(a,fe,te))):h||(fe=Qi(a,f),fe!=null&&_.push(oo(a,fe,te)))),a=a.return}_.length!==0&&t.push({event:i,listeners:_})}var Fm=/\r\n?/g,Gm=/\u0000|\uFFFD/g;function Sf(t){return(typeof t=="string"?t:""+t).replace(Fm,`
`).replace(Gm,"")}function Af(t,i){return i=Sf(i),Sf(t)===i}function Cl(){}function dt(t,i,a,l,h,f){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Jn(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Jn(t,""+l);break;case"className":br(t,"class",l);break;case"tabIndex":br(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":br(t,a,l);break;case"style":wa(t,l,f);break;case"data":if(i!=="object"){br(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=As(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(i!=="input"&&dt(t,i,"name",h.name,h,null),dt(t,i,"formEncType",h.formEncType,h,null),dt(t,i,"formMethod",h.formMethod,h,null),dt(t,i,"formTarget",h.formTarget,h,null)):(dt(t,i,"encType",h.encType,h,null),dt(t,i,"method",h.method,h,null),dt(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=As(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Cl);break;case"onScroll":l!=null&&Ye("scroll",t);break;case"onScrollEnd":l!=null&&Ye("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=As(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Ye("beforetoggle",t),Ye("toggle",t),ci(t,"popover",l);break;case"xlinkActuate":Rn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Rn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Rn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Rn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Rn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Rn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Rn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Rn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Rn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ci(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Kl.get(a)||a,ci(t,a,l))}}function Sc(t,i,a,l,h,f){switch(a){case"style":wa(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Jn(t,l):(typeof l=="number"||typeof l=="bigint")&&Jn(t,""+l);break;case"onScroll":l!=null&&Ye("scroll",t);break;case"onScrollEnd":l!=null&&Ye("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Cl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Es.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),f=t[Wt]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(i,f,h),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):ci(t,a,l)}}}function Dn(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",t),Ye("load",t);var l=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var _=a[f];if(_!=null)switch(f){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:dt(t,i,f,_,a,null)}}h&&dt(t,i,"srcSet",a.srcSet,a,null),l&&dt(t,i,"src",a.src,a,null);return;case"input":Ye("invalid",t);var w=f=_=h=null,te=null,fe=null;for(l in a)if(a.hasOwnProperty(l)){var Ee=a[l];if(Ee!=null)switch(l){case"name":h=Ee;break;case"type":_=Ee;break;case"checked":te=Ee;break;case"defaultChecked":fe=Ee;break;case"value":f=Ee;break;case"defaultValue":w=Ee;break;case"children":case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(s(137,i));break;default:dt(t,i,l,Ee,a,null)}}$i(t,f,w,te,fe,_,h,!1),Ss(t);return;case"select":Ye("invalid",t),l=_=f=null;for(h in a)if(a.hasOwnProperty(h)&&(w=a[h],w!=null))switch(h){case"value":f=w;break;case"defaultValue":_=w;break;case"multiple":l=w;default:dt(t,i,h,w,a,null)}i=f,a=_,t.multiple=!!l,i!=null?Ur(t,!!l,i,!1):a!=null&&Ur(t,!!l,a,!0);return;case"textarea":Ye("invalid",t),f=h=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(w=a[_],w!=null))switch(_){case"value":l=w;break;case"defaultValue":h=w;break;case"children":f=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:dt(t,i,_,w,a,null)}Yi(t,l,h,f),Ss(t);return;case"option":for(te in a)if(a.hasOwnProperty(te)&&(l=a[te],l!=null))switch(te){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:dt(t,i,te,l,a,null)}return;case"dialog":Ye("beforetoggle",t),Ye("toggle",t),Ye("cancel",t),Ye("close",t);break;case"iframe":case"object":Ye("load",t);break;case"video":case"audio":for(l=0;l<ao.length;l++)Ye(ao[l],t);break;case"image":Ye("error",t),Ye("load",t);break;case"details":Ye("toggle",t);break;case"embed":case"source":case"link":Ye("error",t),Ye("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(fe in a)if(a.hasOwnProperty(fe)&&(l=a[fe],l!=null))switch(fe){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:dt(t,i,fe,l,a,null)}return;default:if(Ta(i)){for(Ee in a)a.hasOwnProperty(Ee)&&(l=a[Ee],l!==void 0&&Sc(t,i,Ee,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&dt(t,i,w,l,a,null))}function $m(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,_=null,w=null,te=null,fe=null,Ee=null;for(ye in a){var xe=a[ye];if(a.hasOwnProperty(ye)&&xe!=null)switch(ye){case"checked":break;case"value":break;case"defaultValue":te=xe;default:l.hasOwnProperty(ye)||dt(t,i,ye,null,l,xe)}}for(var me in l){var ye=l[me];if(xe=a[me],l.hasOwnProperty(me)&&(ye!=null||xe!=null))switch(me){case"type":f=ye;break;case"name":h=ye;break;case"checked":fe=ye;break;case"defaultChecked":Ee=ye;break;case"value":_=ye;break;case"defaultValue":w=ye;break;case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(s(137,i));break;default:ye!==xe&&dt(t,i,me,ye,l,xe)}}Hn(t,_,w,te,fe,Ee,f,h);return;case"select":ye=_=w=me=null;for(f in a)if(te=a[f],a.hasOwnProperty(f)&&te!=null)switch(f){case"value":break;case"multiple":ye=te;default:l.hasOwnProperty(f)||dt(t,i,f,null,l,te)}for(h in l)if(f=l[h],te=a[h],l.hasOwnProperty(h)&&(f!=null||te!=null))switch(h){case"value":me=f;break;case"defaultValue":w=f;break;case"multiple":_=f;default:f!==te&&dt(t,i,h,f,l,te)}i=w,a=_,l=ye,me!=null?Ur(t,!!a,me,!1):!!l!=!!a&&(i!=null?Ur(t,!!a,i,!0):Ur(t,!!a,a?[]:"",!1));return;case"textarea":ye=me=null;for(w in a)if(h=a[w],a.hasOwnProperty(w)&&h!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:dt(t,i,w,null,l,h)}for(_ in l)if(h=l[_],f=a[_],l.hasOwnProperty(_)&&(h!=null||f!=null))switch(_){case"value":me=h;break;case"defaultValue":ye=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&dt(t,i,_,h,l,f)}it(t,me,ye);return;case"option":for(var ze in a)if(me=a[ze],a.hasOwnProperty(ze)&&me!=null&&!l.hasOwnProperty(ze))switch(ze){case"selected":t.selected=!1;break;default:dt(t,i,ze,null,l,me)}for(te in l)if(me=l[te],ye=a[te],l.hasOwnProperty(te)&&me!==ye&&(me!=null||ye!=null))switch(te){case"selected":t.selected=me&&typeof me!="function"&&typeof me!="symbol";break;default:dt(t,i,te,me,l,ye)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ue in a)me=a[Ue],a.hasOwnProperty(Ue)&&me!=null&&!l.hasOwnProperty(Ue)&&dt(t,i,Ue,null,l,me);for(fe in l)if(me=l[fe],ye=a[fe],l.hasOwnProperty(fe)&&me!==ye&&(me!=null||ye!=null))switch(fe){case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(s(137,i));break;default:dt(t,i,fe,me,l,ye)}return;default:if(Ta(i)){for(var mt in a)me=a[mt],a.hasOwnProperty(mt)&&me!==void 0&&!l.hasOwnProperty(mt)&&Sc(t,i,mt,void 0,l,me);for(Ee in l)me=l[Ee],ye=a[Ee],!l.hasOwnProperty(Ee)||me===ye||me===void 0&&ye===void 0||Sc(t,i,Ee,me,l,ye);return}}for(var le in a)me=a[le],a.hasOwnProperty(le)&&me!=null&&!l.hasOwnProperty(le)&&dt(t,i,le,null,l,me);for(xe in l)me=l[xe],ye=a[xe],!l.hasOwnProperty(xe)||me===ye||me==null&&ye==null||dt(t,i,xe,me,l,ye)}var Ac=null,Rc=null;function Il(t){return t.nodeType===9?t:t.ownerDocument}function Rf(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Cf(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Cc(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ic=null;function Ym(){var t=window.event;return t&&t.type==="popstate"?t===Ic?!1:(Ic=t,!0):(Ic=null,!1)}var If=typeof setTimeout=="function"?setTimeout:void 0,Km=typeof clearTimeout=="function"?clearTimeout:void 0,Nf=typeof Promise=="function"?Promise:void 0,Qm=typeof queueMicrotask=="function"?queueMicrotask:typeof Nf<"u"?function(t){return Nf.resolve(null).then(t).catch(Xm)}:If;function Xm(t){setTimeout(function(){throw t})}function Ci(t){return t==="head"}function Df(t,i){var a=i,l=0,h=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<l&&8>l){a=l;var _=t.ownerDocument;if(a&1&&lo(_.documentElement),a&2&&lo(_.body),a&4)for(a=_.head,lo(a),_=a.firstChild;_;){var w=_.nextSibling,te=_.nodeName;_[qi]||te==="SCRIPT"||te==="STYLE"||te==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=w}}if(h===0){t.removeChild(f),yo(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=f}while(a);yo(i)}function Nc(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Nc(a),ui(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function Wm(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[qi])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=pr(t.nextSibling),t===null)break}return null}function Zm(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=pr(t.nextSibling),t===null))return null;return t}function Dc(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Jm(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function pr(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var Oc=null;function Of(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function Pf(t,i,a){switch(i=Il(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function lo(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);ui(t)}var ur=new Map,Mf=new Set;function Nl(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ii=Ce.d;Ce.d={f:ep,r:tp,D:np,C:rp,L:ip,m:sp,X:op,S:ap,M:lp};function ep(){var t=ii.f(),i=El();return t||i}function tp(t){var i=vr(t);i!==null&&i.tag===5&&i.type==="form"?Jh(i):ii.r(t)}var aa=typeof document>"u"?null:document;function kf(t,i,a){var l=aa;if(l&&typeof i=="string"&&i){var h=ln(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Mf.has(h)||(Mf.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),Dn(i,"link",t),Gt(i),l.head.appendChild(i)))}}function np(t){ii.D(t),kf("dns-prefetch",t,null)}function rp(t,i){ii.C(t,i),kf("preconnect",t,i)}function ip(t,i,a){ii.L(t,i,a);var l=aa;if(l&&t&&i){var h='link[rel="preload"][as="'+ln(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+ln(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+ln(a.imageSizes)+'"]')):h+='[href="'+ln(t)+'"]';var f=h;switch(i){case"style":f=oa(t);break;case"script":f=la(t)}ur.has(f)||(t=b({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),ur.set(f,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(uo(f))||i==="script"&&l.querySelector(co(f))||(i=l.createElement("link"),Dn(i,"link",t),Gt(i),l.head.appendChild(i)))}}function sp(t,i){ii.m(t,i);var a=aa;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+ln(l)+'"][href="'+ln(t)+'"]',f=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=la(t)}if(!ur.has(f)&&(t=b({rel:"modulepreload",href:t},i),ur.set(f,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(co(f)))return}l=a.createElement("link"),Dn(l,"link",t),Gt(l),a.head.appendChild(l)}}}function ap(t,i,a){ii.S(t,i,a);var l=aa;if(l&&t){var h=kn(l).hoistableStyles,f=oa(t);i=i||"default";var _=h.get(f);if(!_){var w={loading:0,preload:null};if(_=l.querySelector(uo(f)))w.loading=5;else{t=b({rel:"stylesheet",href:t,"data-precedence":i},a),(a=ur.get(f))&&Pc(t,a);var te=_=l.createElement("link");Gt(te),Dn(te,"link",t),te._p=new Promise(function(fe,Ee){te.onload=fe,te.onerror=Ee}),te.addEventListener("load",function(){w.loading|=1}),te.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Dl(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:w},h.set(f,_)}}}function op(t,i){ii.X(t,i);var a=aa;if(a&&t){var l=kn(a).hoistableScripts,h=la(t),f=l.get(h);f||(f=a.querySelector(co(h)),f||(t=b({src:t,async:!0},i),(i=ur.get(h))&&Mc(t,i),f=a.createElement("script"),Gt(f),Dn(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function lp(t,i){ii.M(t,i);var a=aa;if(a&&t){var l=kn(a).hoistableScripts,h=la(t),f=l.get(h);f||(f=a.querySelector(co(h)),f||(t=b({src:t,async:!0,type:"module"},i),(i=ur.get(h))&&Mc(t,i),f=a.createElement("script"),Gt(f),Dn(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function jf(t,i,a,l){var h=(h=qe.current)?Nl(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=oa(a.href),a=kn(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=oa(a.href);var f=kn(h).hoistableStyles,_=f.get(t);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,_),(f=h.querySelector(uo(t)))&&!f._p&&(_.instance=f,_.state.loading=5),ur.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ur.set(t,a),f||up(h,t,a,_.state))),i&&l===null)throw Error(s(528,""));return _}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=la(a),a=kn(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function oa(t){return'href="'+ln(t)+'"'}function uo(t){return'link[rel="stylesheet"]['+t+"]"}function Vf(t){return b({},t,{"data-precedence":t.precedence,precedence:null})}function up(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Dn(i,"link",a),Gt(i),t.head.appendChild(i))}function la(t){return'[src="'+ln(t)+'"]'}function co(t){return"script[async]"+t}function Lf(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+ln(a.href)+'"]');if(l)return i.instance=l,Gt(l),l;var h=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Gt(l),Dn(l,"style",h),Dl(l,a.precedence,t),i.instance=l;case"stylesheet":h=oa(a.href);var f=t.querySelector(uo(h));if(f)return i.state.loading|=4,i.instance=f,Gt(f),f;l=Vf(a),(h=ur.get(h))&&Pc(l,h),f=(t.ownerDocument||t).createElement("link"),Gt(f);var _=f;return _._p=new Promise(function(w,te){_.onload=w,_.onerror=te}),Dn(f,"link",l),i.state.loading|=4,Dl(f,a.precedence,t),i.instance=f;case"script":return f=la(a.src),(h=t.querySelector(co(f)))?(i.instance=h,Gt(h),h):(l=a,(h=ur.get(f))&&(l=b({},a),Mc(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Gt(h),Dn(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Dl(l,a.precedence,t));return i.instance}function Dl(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,f=h,_=0;_<l.length;_++){var w=l[_];if(w.dataset.precedence===i)f=w;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Pc(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Mc(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Ol=null;function Uf(t,i,a){if(Ol===null){var l=new Map,h=Ol=new Map;h.set(a,l)}else h=Ol,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var f=a[h];if(!(f[qi]||f[pn]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var _=f.getAttribute(i)||"";_=t+_;var w=l.get(_);w?w.push(f):l.set(_,[f])}}return l}function Bf(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function cp(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function zf(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var ho=null;function hp(){}function dp(t,i,a){if(ho===null)throw Error(s(475));var l=ho;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=oa(a.href),f=t.querySelector(uo(h));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Pl.bind(l),t.then(l,l)),i.state.loading|=4,i.instance=f,Gt(f);return}f=t.ownerDocument||t,a=Vf(a),(h=ur.get(h))&&Pc(a,h),f=f.createElement("link"),Gt(f);var _=f;_._p=new Promise(function(w,te){_.onload=w,_.onerror=te}),Dn(f,"link",a),i.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=Pl.bind(l),t.addEventListener("load",i),t.addEventListener("error",i))}}function fp(){if(ho===null)throw Error(s(475));var t=ho;return t.stylesheets&&t.count===0&&kc(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&kc(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Pl(){if(this.count--,this.count===0){if(this.stylesheets)kc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ml=null;function kc(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ml=new Map,i.forEach(mp,t),Ml=null,Pl.call(t))}function mp(t,i){if(!(i.state.loading&4)){var a=Ml.get(t);if(a)var l=a.get(null);else{a=new Map,Ml.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var _=h[f];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}h=i.instance,_=h.getAttribute("data-precedence"),f=a.get(_)||l,f===l&&a.set(null,h),a.set(_,h),this.count++,l=Pl.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var fo={$$typeof:Re,Provider:null,Consumer:null,_currentValue:ke,_currentValue2:ke,_threadCount:0};function pp(t,i,a,l,h,f,_,w){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mr(0),this.hiddenUpdates=Mr(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function qf(t,i,a,l,h,f,_,w,te,fe,Ee,xe){return t=new pp(t,i,a,_,w,te,fe,xe),i=1,f===!0&&(i|=24),f=Gn(3,null,null,i),t.current=f,f.stateNode=t,i=gu(),i.refCount++,t.pooledCache=i,i.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:i},bu(f),t}function Hf(t){return t?(t=Us,t):Us}function Ff(t,i,a,l,h,f){h=Hf(h),l.context===null?l.context=h:l.pendingContext=h,l=pi(i),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=gi(t,l,i),a!==null&&(Xn(a,t,i),qa(a,t,i))}function Gf(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function jc(t,i){Gf(t,i),(t=t.alternate)&&Gf(t,i)}function $f(t){if(t.tag===13){var i=Ls(t,67108864);i!==null&&Xn(i,t,67108864),jc(t,67108864)}}var kl=!0;function gp(t,i,a,l){var h=ge.T;ge.T=null;var f=Ce.p;try{Ce.p=2,Vc(t,i,a,l)}finally{Ce.p=f,ge.T=h}}function yp(t,i,a,l){var h=ge.T;ge.T=null;var f=Ce.p;try{Ce.p=8,Vc(t,i,a,l)}finally{Ce.p=f,ge.T=h}}function Vc(t,i,a,l){if(kl){var h=Lc(l);if(h===null)xc(t,i,l,jl,a),Kf(t,l);else if(_p(h,t,i,a,l))l.stopPropagation();else if(Kf(t,l),i&4&&-1<vp.indexOf(t)){for(;h!==null;){var f=vr(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var _=cr(f.pendingLanes);if(_!==0){var w=f;for(w.pendingLanes|=2,w.entangledLanes|=2;_;){var te=1<<31-On(_);w.entanglements[1]|=te,_&=~te}Or(f),(nt&6)===0&&(_l=Wn()+500,so(0))}}break;case 13:w=Ls(f,2),w!==null&&Xn(w,f,2),El(),jc(f,2)}if(f=Lc(l),f===null&&xc(t,i,l,jl,a),f===h)break;h=f}h!==null&&l.stopPropagation()}else xc(t,i,l,null,a)}}function Lc(t){return t=er(t),Uc(t)}var jl=null;function Uc(t){if(jl=null,t=jr(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=d(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return jl=t,null}function Yf(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ql()){case ca:return 2;case ys:return 8;case Vi:case Hl:return 32;case vs:return 268435456;default:return 32}default:return 32}}var Bc=!1,Ii=null,Ni=null,Di=null,mo=new Map,po=new Map,Oi=[],vp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Kf(t,i){switch(t){case"focusin":case"focusout":Ii=null;break;case"dragenter":case"dragleave":Ni=null;break;case"mouseover":case"mouseout":Di=null;break;case"pointerover":case"pointerout":mo.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":po.delete(i.pointerId)}}function go(t,i,a,l,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[h]},i!==null&&(i=vr(i),i!==null&&$f(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function _p(t,i,a,l,h){switch(i){case"focusin":return Ii=go(Ii,t,i,a,l,h),!0;case"dragenter":return Ni=go(Ni,t,i,a,l,h),!0;case"mouseover":return Di=go(Di,t,i,a,l,h),!0;case"pointerover":var f=h.pointerId;return mo.set(f,go(mo.get(f)||null,t,i,a,l,h)),!0;case"gotpointercapture":return f=h.pointerId,po.set(f,go(po.get(f)||null,t,i,a,l,h)),!0}return!1}function Qf(t){var i=jr(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){t.blockedOn=i,Eo(t.priority,function(){if(a.tag===13){var l=Qn();l=ai(l);var h=Ls(a,l);h!==null&&Xn(h,a,l),jc(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Vl(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Lc(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Br=l,a.target.dispatchEvent(l),Br=null}else return i=vr(a),i!==null&&$f(i),t.blockedOn=a,!1;i.shift()}return!0}function Xf(t,i,a){Vl(t)&&a.delete(i)}function bp(){Bc=!1,Ii!==null&&Vl(Ii)&&(Ii=null),Ni!==null&&Vl(Ni)&&(Ni=null),Di!==null&&Vl(Di)&&(Di=null),mo.forEach(Xf),po.forEach(Xf)}function Ll(t,i){t.blockedOn===i&&(t.blockedOn=null,Bc||(Bc=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,bp)))}var Ul=null;function Wf(t){Ul!==t&&(Ul=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Ul===t&&(Ul=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(Uc(l||a)===null)continue;break}var f=vr(a);f!==null&&(t.splice(i,3),i-=3,Uu(f,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function yo(t){function i(te){return Ll(te,t)}Ii!==null&&Ll(Ii,t),Ni!==null&&Ll(Ni,t),Di!==null&&Ll(Di,t),mo.forEach(i),po.forEach(i);for(var a=0;a<Oi.length;a++){var l=Oi[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Oi.length&&(a=Oi[0],a.blockedOn===null);)Qf(a),a.blockedOn===null&&Oi.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],f=a[l+1],_=h[Wt]||null;if(typeof f=="function")_||Wf(a);else if(_){var w=null;if(f&&f.hasAttribute("formAction")){if(h=f,_=f[Wt]||null)w=_.formAction;else if(Uc(h)!==null)continue}else w=_.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),Wf(a)}}}function zc(t){this._internalRoot=t}Bl.prototype.render=zc.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=Qn();Ff(a,l,t,i,null,null)},Bl.prototype.unmount=zc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;Ff(t.current,2,null,t,null,null),El(),i[Zn]=null}};function Bl(t){this._internalRoot=t}Bl.prototype.unstable_scheduleHydration=function(t){if(t){var i=oi();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Oi.length&&i!==0&&i<Oi[a].priority;a++);Oi.splice(a,0,t),a===0&&Qf(t)}};var Zf=e.version;if(Zf!=="19.1.1")throw Error(s(527,Zf,"19.1.1"));Ce.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(i),t=t!==null?g(t):null,t=t===null?null:t.stateNode,t};var Ep={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:ge,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zl.isDisabled&&zl.supportsFiber)try{zt=zl.inject(Ep),tt=zl}catch{}}return reactDomClient_production.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,l="",h=fd,f=md,_=pd,w=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(w=i.unstable_transitionCallbacks)),i=qf(t,1,!1,null,null,a,l,h,f,_,w,null),t[Zn]=i.current,Tc(t),new zc(i)},reactDomClient_production.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var l=!1,h="",f=fd,_=md,w=pd,te=null,fe=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(te=a.unstable_transitionCallbacks),a.formState!==void 0&&(fe=a.formState)),i=qf(t,1,!0,i,a??null,l,h,f,_,w,te,fe),i.context=Hf(null),a=i.current,l=Qn(),l=ai(l),h=pi(l),h.callback=null,gi(a,h,l),a=l,i.current.lanes=a,kr(i,a),Or(i),t[Zn]=i.current,Tc(t),new Bl(i)},reactDomClient_production.version="19.1.1",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();const ReactDOM=getDefaultExportFromCjs(clientExports);/**
 * react-router v7.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var PopStateEventType="popstate";function createBrowserHistory(r={}){function e(s,o){let{pathname:u,search:d,hash:m}=s.location;return createLocation("",{pathname:u,search:d,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){return typeof o=="string"?o:createPath(o)}return getUrlBasedHistory(e,n,null,r)}function invariant(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function warning(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(r,e){return{usr:r.state,key:r.key,idx:e}}function createLocation(r,e,n=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?parsePath(e):e,state:n,key:e&&e.key||s||createKey()}}function createPath({pathname:r="/",search:e="",hash:n=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function parsePath(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substring(n),r=r.substring(0,n));let s=r.indexOf("?");s>=0&&(e.search=r.substring(s),r=r.substring(0,s)),r&&(e.pathname=r)}return e}function getUrlBasedHistory(r,e,n,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,d=o.history,m="POP",p=null,g=b();g==null&&(g=0,d.replaceState({...d.state,idx:g},""));function b(){return(d.state||{idx:null}).idx}function W(){m="POP";let ve=b(),pe=ve==null?null:ve-g;g=ve,p&&p({action:m,location:we.location,delta:pe})}function X(ve,pe){m="PUSH";let Ae=createLocation(we.location,ve,pe);g=b()+1;let Re=getHistoryState(Ae,g),Pe=we.createHref(Ae);try{d.pushState(Re,"",Pe)}catch(Oe){if(Oe instanceof DOMException&&Oe.name==="DataCloneError")throw Oe;o.location.assign(Pe)}u&&p&&p({action:m,location:we.location,delta:1})}function he(ve,pe){m="REPLACE";let Ae=createLocation(we.location,ve,pe);g=b();let Re=getHistoryState(Ae,g),Pe=we.createHref(Ae);d.replaceState(Re,"",Pe),u&&p&&p({action:m,location:we.location,delta:0})}function _e(ve){return createBrowserURLImpl(ve)}let we={get action(){return m},get location(){return r(o,d)},listen(ve){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(PopStateEventType,W),p=ve,()=>{o.removeEventListener(PopStateEventType,W),p=null}},createHref(ve){return e(o,ve)},createURL:_e,encodeLocation(ve){let pe=_e(ve);return{pathname:pe.pathname,search:pe.search,hash:pe.hash}},push:X,replace:he,go(ve){return d.go(ve)}};return we}function createBrowserURLImpl(r,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),invariant(n,"No window.location.(origin|href) available to create URL");let s=typeof r=="string"?r:createPath(r);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function matchRoutes(r,e,n="/"){return matchRoutesImpl(r,e,n,!1)}function matchRoutesImpl(r,e,n,s){let o=typeof e=="string"?parsePath(e):e,u=stripBasename(o.pathname||"/",n);if(u==null)return null;let d=flattenRoutes(r);rankRouteBranches(d);let m=null;for(let p=0;m==null&&p<d.length;++p){let g=decodePath(u);m=matchRouteBranch(d[p],g,s)}return m}function flattenRoutes(r,e=[],n=[],s=""){let o=(u,d,m)=>{let p={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};p.relativePath.startsWith("/")&&(invariant(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length));let g=joinPaths([s,p.relativePath]),b=n.concat(p);u.children&&u.children.length>0&&(invariant(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),flattenRoutes(u.children,e,b,g)),!(u.path==null&&!u.index)&&e.push({path:g,score:computeScore(g,u.index),routesMeta:b})};return r.forEach((u,d)=>{if(u.path===""||!u.path?.includes("?"))o(u,d);else for(let m of explodeOptionalSegments(u.path))o(u,d,m)}),e}function explodeOptionalSegments(r){let e=r.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let d=explodeOptionalSegments(s.join("/")),m=[];return m.push(...d.map(p=>p===""?u:[u,p].join("/"))),o&&m.push(...d),m.map(p=>r.startsWith("/")&&p===""?"/":p)}function rankRouteBranches(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:compareIndexes(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=r=>r==="*";function computeScore(r,e){let n=r.split("/"),s=n.length;return n.some(isSplat)&&(s+=splatPenalty),e&&(s+=indexRouteValue),n.filter(o=>!isSplat(o)).reduce((o,u)=>o+(paramRe.test(u)?dynamicSegmentValue:u===""?emptySegmentValue:staticSegmentValue),s)}function compareIndexes(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function matchRouteBranch(r,e,n=!1){let{routesMeta:s}=r,o={},u="/",d=[];for(let m=0;m<s.length;++m){let p=s[m],g=m===s.length-1,b=u==="/"?e:e.slice(u.length)||"/",W=matchPath({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},b),X=p.route;if(!W&&g&&n&&!s[s.length-1].route.index&&(W=matchPath({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},b)),!W)return null;Object.assign(o,W.params),d.push({params:o,pathname:joinPaths([u,W.pathname]),pathnameBase:normalizePathname(joinPaths([u,W.pathnameBase])),route:X}),W.pathnameBase!=="/"&&(u=joinPaths([u,W.pathnameBase]))}return d}function matchPath(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,s]=compilePath(r.path,r.caseSensitive,r.end),o=e.match(n);if(!o)return null;let u=o[0],d=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((g,{paramName:b,isOptional:W},X)=>{if(b==="*"){let _e=m[X]||"";d=u.slice(0,u.length-_e.length).replace(/(.)\/+$/,"$1")}const he=m[X];return W&&!he?g[b]=void 0:g[b]=(he||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:d,pattern:r}}function compilePath(r,e=!1,n=!0){warning(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,p)=>(s.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function decodePath(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return warning(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function stripBasename(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=r.charAt(n);return s&&s!=="/"?null:r.slice(n)||"/"}function resolvePath(r,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof r=="string"?parsePath(r):r;return{pathname:n?n.startsWith("/")?n:resolvePathname(n,e):e,search:normalizeSearch(s),hash:normalizeHash(o)}}function resolvePathname(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function getInvalidPathError(r,e,n,s){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function getResolveToMatches(r){let e=getPathContributingMatches(r);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function resolveTo(r,e,n,s=!1){let o;typeof r=="string"?o=parsePath(r):(o={...r},invariant(!o.pathname||!o.pathname.includes("?"),getInvalidPathError("?","pathname","search",o)),invariant(!o.pathname||!o.pathname.includes("#"),getInvalidPathError("#","pathname","hash",o)),invariant(!o.search||!o.search.includes("#"),getInvalidPathError("#","search","hash",o)));let u=r===""||o.pathname==="",d=u?"/":o.pathname,m;if(d==null)m=n;else{let W=e.length-1;if(!s&&d.startsWith("..")){let X=d.split("/");for(;X[0]==="..";)X.shift(),W-=1;o.pathname=X.join("/")}m=W>=0?e[W]:"/"}let p=resolvePath(o,m),g=d&&d!=="/"&&d.endsWith("/"),b=(u||d===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(g||b)&&(p.pathname+="/"),p}var joinPaths=r=>r.join("/").replace(/\/\/+/g,"/"),normalizePathname=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,normalizeHash=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function isRouteErrorResponse(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState",reactExports.createContext(!1);var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(r,{relative:e}={}){invariant(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=reactExports.useContext(NavigationContext),{hash:o,pathname:u,search:d}=useResolvedPath(r,{relative:e}),m=u;return n!=="/"&&(m=u==="/"?n:joinPaths([n,u])),s.createHref({pathname:m,search:d,hash:o})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect(r){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(r)}function useNavigate(){let{isDataRoute:r}=reactExports.useContext(RouteContext);return r?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let r=reactExports.useContext(DataRouterContext),{basename:e,navigator:n}=reactExports.useContext(NavigationContext),{matches:s}=reactExports.useContext(RouteContext),{pathname:o}=useLocation(),u=JSON.stringify(getResolveToMatches(s)),d=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{d.current=!0}),reactExports.useCallback((p,g={})=>{if(warning(d.current,navigateEffectWarning),!d.current)return;if(typeof p=="number"){n.go(p);return}let b=resolveTo(p,JSON.parse(u),o,g.relative==="path");r==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:joinPaths([e,b.pathname])),(g.replace?n.replace:n.push)(b,g.state,g)},[e,n,u,o,r])}var OutletContext=reactExports.createContext(null);function useOutlet(r){let e=reactExports.useContext(RouteContext).outlet;return e&&reactExports.createElement(OutletContext.Provider,{value:r},e)}function useParams(){let{matches:r}=reactExports.useContext(RouteContext),e=r[r.length-1];return e?e.params:{}}function useResolvedPath(r,{relative:e}={}){let{matches:n}=reactExports.useContext(RouteContext),{pathname:s}=useLocation(),o=JSON.stringify(getResolveToMatches(n));return reactExports.useMemo(()=>resolveTo(r,JSON.parse(o),s,e==="path"),[r,o,s,e])}function useRoutes(r,e){return useRoutesImpl(r,e)}function useRoutesImpl(r,e,n,s){invariant(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=reactExports.useContext(NavigationContext),{matches:u}=reactExports.useContext(RouteContext),d=u[u.length-1],m=d?d.params:{},p=d?d.pathname:"/",g=d?d.pathnameBase:"/",b=d&&d.route;{let pe=b&&b.path||"";warningOnce(p,!b||pe.endsWith("*")||pe.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${pe}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${pe}"> to <Route path="${pe==="/"?"*":`${pe}/*`}">.`)}let W=useLocation(),X;if(e){let pe=typeof e=="string"?parsePath(e):e;invariant(g==="/"||pe.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${pe.pathname}" was given in the \`location\` prop.`),X=pe}else X=W;let he=X.pathname||"/",_e=he;if(g!=="/"){let pe=g.replace(/^\//,"").split("/");_e="/"+he.replace(/^\//,"").split("/").slice(pe.length).join("/")}let we=matchRoutes(r,{pathname:_e});warning(b||we!=null,`No routes matched location "${X.pathname}${X.search}${X.hash}" `),warning(we==null||we[we.length-1].route.element!==void 0||we[we.length-1].route.Component!==void 0||we[we.length-1].route.lazy!==void 0,`Matched leaf route at location "${X.pathname}${X.search}${X.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ve=_renderMatches(we&&we.map(pe=>Object.assign({},pe,{params:Object.assign({},m,pe.params),pathname:joinPaths([g,o.encodeLocation?o.encodeLocation(pe.pathname).pathname:pe.pathname]),pathnameBase:pe.pathnameBase==="/"?g:joinPaths([g,o.encodeLocation?o.encodeLocation(pe.pathnameBase).pathname:pe.pathnameBase])})),u,n,s);return e&&ve?reactExports.createElement(LocationContext.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...X},navigationType:"POP"}},ve):ve}function DefaultErrorComponent(){let r=useRouteError(),e=isRouteErrorResponse(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},d=null;return console.error("Error handled by React Router default ErrorBoundary:",r),d=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null,"\u{1F4BF} Hey developer \u{1F44B}"),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:u},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:u},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),n?reactExports.createElement("pre",{style:o},n):null,d)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:r,match:e,children:n}){let s=reactExports.useContext(DataRouterContext);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),reactExports.createElement(RouteContext.Provider,{value:r},n)}function _renderMatches(r,e=[],n=null,s=null){if(r==null){if(!n)return null;if(n.errors)r=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let o=r,u=n?.errors;if(u!=null){let p=o.findIndex(g=>g.route.id&&u?.[g.route.id]!==void 0);invariant(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let d=!1,m=-1;if(n)for(let p=0;p<o.length;p++){let g=o[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(m=p),g.route.id){let{loaderData:b,errors:W}=n,X=g.route.loader&&!b.hasOwnProperty(g.route.id)&&(!W||W[g.route.id]===void 0);if(g.route.lazy||X){d=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((p,g,b)=>{let W,X=!1,he=null,_e=null;n&&(W=u&&g.route.id?u[g.route.id]:void 0,he=g.route.errorElement||defaultErrorElement,d&&(m<0&&b===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),X=!0,_e=null):m===b&&(X=!0,_e=g.route.hydrateFallbackElement||null)));let we=e.concat(o.slice(0,b+1)),ve=()=>{let pe;return W?pe=he:X?pe=_e:g.route.Component?pe=reactExports.createElement(g.route.Component,null):g.route.element?pe=g.route.element:pe=p,reactExports.createElement(RenderedRoute,{match:g,routeContext:{outlet:p,matches:we,isDataRoute:n!=null},children:pe})};return n&&(g.route.ErrorBoundary||g.route.errorElement||b===0)?reactExports.createElement(RenderErrorBoundary,{location:n.location,revalidation:n.revalidation,component:he,error:W,children:ve(),routeContext:{outlet:null,matches:we,isDataRoute:!0}}):ve()},null)}function getDataRouterConsoleError(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(r){let e=reactExports.useContext(DataRouterContext);return invariant(e,getDataRouterConsoleError(r)),e}function useDataRouterState(r){let e=reactExports.useContext(DataRouterStateContext);return invariant(e,getDataRouterConsoleError(r)),e}function useRouteContext(r){let e=reactExports.useContext(RouteContext);return invariant(e,getDataRouterConsoleError(r)),e}function useCurrentRouteId(r){let e=useRouteContext(r),n=e.matches[e.matches.length-1];return invariant(n.route.id,`${r} can only be used on routes that contain a unique "id"`),n.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){let r=reactExports.useContext(RouteErrorContext),e=useDataRouterState("useRouteError"),n=useCurrentRouteId("useRouteError");return r!==void 0?r:e.errors?.[n]}function useNavigateStable(){let{router:r}=useDataRouterContext("useNavigate"),e=useCurrentRouteId("useNavigate"),n=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{n.current=!0}),reactExports.useCallback(async(o,u={})=>{warning(n.current,navigateEffectWarning),n.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...u}))},[r,e])}var alreadyWarned={};function warningOnce(r,e,n){!e&&!alreadyWarned[r]&&(alreadyWarned[r]=!0,warning(!1,n))}reactExports.memo(DataRoutes);function DataRoutes({routes:r,future:e,state:n}){return useRoutesImpl(r,void 0,n,e)}function Outlet(r){return useOutlet(r.context)}function Route(r){invariant(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Router({basename:r="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:u=!1}){invariant(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=r.replace(/^\/*/,"/"),m=reactExports.useMemo(()=>({basename:d,navigator:o,static:u,future:{}}),[d,o,u]);typeof n=="string"&&(n=parsePath(n));let{pathname:p="/",search:g="",hash:b="",state:W=null,key:X="default"}=n,he=reactExports.useMemo(()=>{let _e=stripBasename(p,d);return _e==null?null:{location:{pathname:_e,search:g,hash:b,state:W,key:X},navigationType:s}},[d,p,g,b,W,X,s]);return warning(he!=null,`<Router basename="${d}"> is not able to match the URL "${p}${g}${b}" because it does not start with the basename, so the <Router> won't render anything.`),he==null?null:reactExports.createElement(NavigationContext.Provider,{value:m},reactExports.createElement(LocationContext.Provider,{children:e,value:he}))}function Routes({children:r,location:e}){return useRoutes(createRoutesFromChildren(r),e)}function createRoutesFromChildren(r,e=[]){let n=[];return reactExports.Children.forEach(r,(s,o)=>{if(!reactExports.isValidElement(s))return;let u=[...e,o];if(s.type===reactExports.Fragment){n.push.apply(n,createRoutesFromChildren(s.props.children,u));return}invariant(s.type===Route,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),invariant(!s.props.index||!s.props.children,"An index route cannot have child routes.");let d={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(d.children=createRoutesFromChildren(s.props.children,u)),n.push(d)}),n}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(r){return r!=null&&typeof r.tagName=="string"}function isButtonElement(r){return isHtmlElement(r)&&r.tagName.toLowerCase()==="button"}function isFormElement(r){return isHtmlElement(r)&&r.tagName.toLowerCase()==="form"}function isInputElement(r){return isHtmlElement(r)&&r.tagName.toLowerCase()==="input"}function isModifiedEvent(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function shouldProcessLinkClick(r,e){return r.button===0&&(!e||e==="_self")&&!isModifiedEvent(r)}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(r){return r!=null&&!supportedFormEncTypes.has(r)?(warning(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):r}function getFormSubmissionInfo(r,e){let n,s,o,u,d;if(isFormElement(r)){let m=r.getAttribute("action");s=m?stripBasename(m,e):null,n=r.getAttribute("method")||defaultMethod,o=getFormEncType(r.getAttribute("enctype"))||defaultEncType,u=new FormData(r)}else if(isButtonElement(r)||isInputElement(r)&&(r.type==="submit"||r.type==="image")){let m=r.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||m.getAttribute("action");if(s=p?stripBasename(p,e):null,n=r.getAttribute("formmethod")||m.getAttribute("method")||defaultMethod,o=getFormEncType(r.getAttribute("formenctype"))||getFormEncType(m.getAttribute("enctype"))||defaultEncType,u=new FormData(m,r),!isFormDataSubmitterSupported()){let{name:g,type:b,value:W}=r;if(b==="image"){let X=g?`${g}.`:"";u.append(`${X}x`,"0"),u.append(`${X}y`,"0")}else g&&u.append(g,W)}}else{if(isHtmlElement(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=defaultMethod,s=null,o=defaultEncType,d=r}return u&&o==="text/plain"&&(d=u,u=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:u,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function invariant2(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function singleFetchUrl(r,e,n){let s=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return s.pathname==="/"?s.pathname=`_root.${n}`:e&&stripBasename(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function loadRouteModule(r,e){if(r.id in e)return e[r.id];try{let n=await import(r.module);return e[r.id]=n,n}catch(n){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function getKeyedPrefetchLinks(r,e,n){let s=await Promise.all(r.map(async o=>{let u=e.routes[o.route.id];if(u){let d=await loadRouteModule(u,n);return d.links?d.links():[]}return[]}));return dedupeLinkDescriptors(s.flat(1).filter(isHtmlLinkDescriptor).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function getNewMatchesForLinks(r,e,n,s,o,u){let d=(p,g)=>n[g]?p.route.id!==n[g].route.id:!0,m=(p,g)=>n[g].pathname!==p.pathname||n[g].route.path?.endsWith("*")&&n[g].params["*"]!==p.params["*"];return u==="assets"?e.filter((p,g)=>d(p,g)||m(p,g)):u==="data"?e.filter((p,g)=>{let b=s.routes[p.route.id];if(!b||!b.hasLoader)return!1;if(d(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let W=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof W=="boolean")return W}return!0}):[]}function getModuleLinkHrefs(r,e,{includeHydrateFallback:n}={}){return dedupeHrefs(r.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function dedupeHrefs(r){return[...new Set(r)]}function sortKeys(r){let e={},n=Object.keys(r).sort();for(let s of n)e[s]=r[s];return e}function dedupeLinkDescriptors(r,e){let n=new Set;return new Set(e),r.reduce((s,o)=>{let u=JSON.stringify(sortKeys(o));return n.has(u)||(n.add(u),s.push({key:u,link:o})),s},[])}function useDataRouterContext2(){let r=reactExports.useContext(DataRouterContext);return invariant2(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function useDataRouterStateContext(){let r=reactExports.useContext(DataRouterStateContext);return invariant2(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let r=reactExports.useContext(FrameworkContext);return invariant2(r,"You must render this element inside a <HydratedRouter> element"),r}function usePrefetchBehavior(r,e){let n=reactExports.useContext(FrameworkContext),[s,o]=reactExports.useState(!1),[u,d]=reactExports.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:b,onTouchStart:W}=e,X=reactExports.useRef(null);reactExports.useEffect(()=>{if(r==="render"&&d(!0),r==="viewport"){let we=pe=>{pe.forEach(Ae=>{d(Ae.isIntersecting)})},ve=new IntersectionObserver(we,{threshold:.5});return X.current&&ve.observe(X.current),()=>{ve.disconnect()}}},[r]),reactExports.useEffect(()=>{if(s){let we=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(we)}}},[s]);let he=()=>{o(!0)},_e=()=>{o(!1),d(!1)};return n?r!=="intent"?[u,X,{}]:[u,X,{onFocus:composeEventHandlers(m,he),onBlur:composeEventHandlers(p,_e),onMouseEnter:composeEventHandlers(g,he),onMouseLeave:composeEventHandlers(b,_e),onTouchStart:composeEventHandlers(W,he)}]:[!1,X,{}]}function composeEventHandlers(r,e){return n=>{r&&r(n),n.defaultPrevented||e(n)}}function PrefetchPageLinks({page:r,...e}){let{router:n}=useDataRouterContext2(),s=reactExports.useMemo(()=>matchRoutes(n.routes,r,n.basename),[n.routes,r,n.basename]);return s?reactExports.createElement(PrefetchPageLinksImpl,{page:r,matches:s,...e}):null}function useKeyedPrefetchLinks(r){let{manifest:e,routeModules:n}=useFrameworkContext(),[s,o]=reactExports.useState([]);return reactExports.useEffect(()=>{let u=!1;return getKeyedPrefetchLinks(r,e,n).then(d=>{u||o(d)}),()=>{u=!0}},[r,e,n]),s}function PrefetchPageLinksImpl({page:r,matches:e,...n}){let s=useLocation(),{manifest:o,routeModules:u}=useFrameworkContext(),{basename:d}=useDataRouterContext2(),{loaderData:m,matches:p}=useDataRouterStateContext(),g=reactExports.useMemo(()=>getNewMatchesForLinks(r,e,p,o,s,"data"),[r,e,p,o,s]),b=reactExports.useMemo(()=>getNewMatchesForLinks(r,e,p,o,s,"assets"),[r,e,p,o,s]),W=reactExports.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let _e=new Set,we=!1;if(e.forEach(pe=>{let Ae=o.routes[pe.route.id];!Ae||!Ae.hasLoader||(!g.some(Re=>Re.route.id===pe.route.id)&&pe.route.id in m&&u[pe.route.id]?.shouldRevalidate||Ae.hasClientLoader?we=!0:_e.add(pe.route.id))}),_e.size===0)return[];let ve=singleFetchUrl(r,d,"data");return we&&_e.size>0&&ve.searchParams.set("_routes",e.filter(pe=>_e.has(pe.route.id)).map(pe=>pe.route.id).join(",")),[ve.pathname+ve.search]},[d,m,s,o,g,e,r,u]),X=reactExports.useMemo(()=>getModuleLinkHrefs(b,o),[b,o]),he=useKeyedPrefetchLinks(b);return reactExports.createElement(reactExports.Fragment,null,W.map(_e=>reactExports.createElement("link",{key:_e,rel:"prefetch",as:"fetch",href:_e,...n})),X.map(_e=>reactExports.createElement("link",{key:_e,rel:"modulepreload",href:_e,...n})),he.map(({key:_e,link:we})=>reactExports.createElement("link",{key:_e,nonce:n.nonce,...we})))}function mergeRefs(...r){return e=>{r.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser&&(window.__reactRouterVersion="7.8.0")}catch{}function BrowserRouter({basename:r,children:e,window:n}){let s=reactExports.useRef();s.current==null&&(s.current=createBrowserHistory({window:n,v5Compat:!0}));let o=s.current,[u,d]=reactExports.useState({action:o.action,location:o.location}),m=reactExports.useCallback(p=>{reactExports.startTransition(()=>d(p))},[d]);return reactExports.useLayoutEffect(()=>o.listen(m),[o,m]),reactExports.createElement(Router,{basename:r,children:e,location:u.location,navigationType:u.action,navigator:o})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:u,replace:d,state:m,target:p,to:g,preventScrollReset:b,viewTransition:W,...X},he){let{basename:_e}=reactExports.useContext(NavigationContext),we=typeof g=="string"&&ABSOLUTE_URL_REGEX2.test(g),ve,pe=!1;if(typeof g=="string"&&we&&(ve=g,isBrowser))try{let ee=new URL(window.location.href),ae=g.startsWith("//")?new URL(ee.protocol+g):new URL(g),oe=stripBasename(ae.pathname,_e);ae.origin===ee.origin&&oe!=null?g=oe+ae.search+ae.hash:pe=!0}catch{warning(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Ae=useHref(g,{relative:o}),[Re,Pe,Oe]=usePrefetchBehavior(s,X),Ve=useLinkClickHandler(g,{replace:d,state:m,target:p,preventScrollReset:b,relative:o,viewTransition:W});function ie(ee){e&&e(ee),ee.defaultPrevented||Ve(ee)}let Z=reactExports.createElement("a",{...X,...Oe,href:ve||Ae,onClick:pe||u?e:ie,ref:mergeRefs(he,Pe),target:p,"data-discover":!we&&n==="render"?"true":void 0});return Re&&!we?reactExports.createElement(reactExports.Fragment,null,Z,reactExports.createElement(PrefetchPageLinks,{page:Ae})):Z});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:u,to:d,viewTransition:m,children:p,...g},b){let W=useResolvedPath(d,{relative:g.relative}),X=useLocation(),he=reactExports.useContext(DataRouterStateContext),{navigator:_e,basename:we}=reactExports.useContext(NavigationContext),ve=he!=null&&useViewTransitionState(W)&&m===!0,pe=_e.encodeLocation?_e.encodeLocation(W).pathname:W.pathname,Ae=X.pathname,Re=he&&he.navigation&&he.navigation.location?he.navigation.location.pathname:null;n||(Ae=Ae.toLowerCase(),Re=Re?Re.toLowerCase():null,pe=pe.toLowerCase()),Re&&we&&(Re=stripBasename(Re,we)||Re);const Pe=pe!=="/"&&pe.endsWith("/")?pe.length-1:pe.length;let Oe=Ae===pe||!o&&Ae.startsWith(pe)&&Ae.charAt(Pe)==="/",Ve=Re!=null&&(Re===pe||!o&&Re.startsWith(pe)&&Re.charAt(pe.length)==="/"),ie={isActive:Oe,isPending:Ve,isTransitioning:ve},Z=Oe?e:void 0,ee;typeof s=="function"?ee=s(ie):ee=[s,Oe?"active":null,Ve?"pending":null,ve?"transitioning":null].filter(Boolean).join(" ");let ae=typeof u=="function"?u(ie):u;return reactExports.createElement(Link,{...g,"aria-current":Z,className:ee,ref:b,style:ae,to:d,viewTransition:m},typeof p=="function"?p(ie):p)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:r="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:u,method:d=defaultMethod,action:m,onSubmit:p,relative:g,preventScrollReset:b,viewTransition:W,...X},he)=>{let _e=useSubmit(),we=useFormAction(m,{relative:g}),ve=d.toLowerCase()==="get"?"get":"post",pe=typeof m=="string"&&ABSOLUTE_URL_REGEX2.test(m),Ae=Re=>{if(p&&p(Re),Re.defaultPrevented)return;Re.preventDefault();let Pe=Re.nativeEvent.submitter,Oe=Pe?.getAttribute("formmethod")||d;_e(Pe||Re.currentTarget,{fetcherKey:e,method:Oe,navigate:n,replace:o,state:u,relative:g,preventScrollReset:b,viewTransition:W})};return reactExports.createElement("form",{ref:he,method:ve,action:we,onSubmit:s?p:Ae,...X,"data-discover":!pe&&r==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(r){let e=reactExports.useContext(DataRouterContext);return invariant(e,getDataRouterConsoleError2(r)),e}function useLinkClickHandler(r,{target:e,replace:n,state:s,preventScrollReset:o,relative:u,viewTransition:d}={}){let m=useNavigate(),p=useLocation(),g=useResolvedPath(r,{relative:u});return reactExports.useCallback(b=>{if(shouldProcessLinkClick(b,e)){b.preventDefault();let W=n!==void 0?n:createPath(p)===createPath(g);m(r,{replace:W,state:s,preventScrollReset:o,relative:u,viewTransition:d})}},[p,m,g,n,s,e,r,o,u,d])}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:r}=useDataRouterContext3("useSubmit"),{basename:e}=reactExports.useContext(NavigationContext),n=useRouteId();return reactExports.useCallback(async(s,o={})=>{let{action:u,method:d,encType:m,formData:p,body:g}=getFormSubmissionInfo(s,e);if(o.navigate===!1){let b=o.fetcherKey||getUniqueFetcherId();await r.fetch(b,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||d,formEncType:o.encType||m,flushSync:o.flushSync})}else await r.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||d,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,n])}function useFormAction(r,{relative:e}={}){let{basename:n}=reactExports.useContext(NavigationContext),s=reactExports.useContext(RouteContext);invariant(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...useResolvedPath(r||".",{relative:e})},d=useLocation();if(r==null){u.search=d.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(b=>b==="")){m.delete("index"),p.filter(W=>W).forEach(W=>m.append("index",W));let b=m.toString();u.search=b?`?${b}`:""}}return(!r||r===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:joinPaths([n,u.pathname])),createPath(u)}function useViewTransitionState(r,{relative:e}={}){let n=reactExports.useContext(ViewTransitionContext);invariant(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=useDataRouterContext3("useViewTransitionState"),o=useResolvedPath(r,{relative:e});if(!n.isTransitioning)return!1;let u=stripBasename(n.currentLocation.pathname,s)||n.currentLocation.pathname,d=stripBasename(n.nextLocation.pathname,s)||n.nextLocation.pathname;return matchPath(o.pathname,d)!=null||matchPath(o.pathname,u)!=null}const getDefaultsFromPostinstall=()=>{};var define_process_env_default={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray$1=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},byteArrayToString=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],d=r[n++],m=r[n++],p=((o&7)<<18|(u&63)<<12|(d&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=r[n++],d=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],d=o+1<r.length,m=d?r[o+1]:0,p=o+2<r.length,g=p?r[o+2]:0,b=u>>2,W=(u&3)<<4|m>>4;let X=(m&15)<<2|g>>6,he=g&63;p||(he=64,d||(X=64)),s.push(n[b],n[W],n[X],n[he])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(stringToByteArray$1(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):byteArrayToString(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],m=o<r.length?n[r.charAt(o)]:0;++o;const g=o<r.length?n[r.charAt(o)]:64;++o;const W=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||m==null||g==null||W==null)throw new DecodeBase64StringError;const X=u<<2|m>>4;if(s.push(X),g!==64){const he=m<<4&240|g>>2;if(s.push(he),W!==64){const _e=g<<6&192|W;s.push(_e)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const base64Encode=function(r){const e=stringToByteArray$1(r);return base64.encodeByteArray(e,!0)},base64urlEncodeWithoutPadding=function(r){return base64Encode(r).replace(/\./g,"")},base64Decode=function(r){try{return base64.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromGlobal=()=>getGlobal().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(typeof process>"u"||typeof define_process_env_default>"u")return;const r=define_process_env_default.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},getDefaultsFromCookie=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&base64Decode(r[1]);return e&&JSON.parse(e)},getDefaults=()=>{try{return getDefaultsFromPostinstall()||getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},getDefaultEmulatorHost=r=>getDefaults()?.emulatorHosts?.[r],getDefaultEmulatorHostnameAndPort=r=>{const e=getDefaultEmulatorHost(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},getDefaultAppConfig=()=>getDefaults()?.config,getExperimentalSetting=r=>getDefaults()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isCloudWorkstation(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function pingServer(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createMockUserToken(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[base64urlEncodeWithoutPadding(JSON.stringify(n)),base64urlEncodeWithoutPadding(JSON.stringify(d)),""].join(".")}const emulatorStatus={};function getEmulatorSummary(){const r={prod:[],emulator:[]};for(const e of Object.keys(emulatorStatus))emulatorStatus[e]?r.emulator.push(e):r.prod.push(e);return r}function getOrCreateEl(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let previouslyDismissed=!1;function updateEmulatorBanner(r,e){if(typeof window>"u"||typeof document>"u"||!isCloudWorkstation(window.location.host)||emulatorStatus[r]===e||emulatorStatus[r]||previouslyDismissed)return;emulatorStatus[r]=e;function n(X){return`__firebase__banner__${X}`}const s="__firebase__banner",u=getEmulatorSummary().prod.length>0;function d(){const X=document.getElementById(s);X&&X.remove()}function m(X){X.style.display="flex",X.style.background="#7faaf0",X.style.position="fixed",X.style.bottom="5px",X.style.left="5px",X.style.padding=".5em",X.style.borderRadius="5px",X.style.alignItems="center"}function p(X,he){X.setAttribute("width","24"),X.setAttribute("id",he),X.setAttribute("height","24"),X.setAttribute("viewBox","0 0 24 24"),X.setAttribute("fill","none"),X.style.marginLeft="-6px"}function g(){const X=document.createElement("span");return X.style.cursor="pointer",X.style.marginLeft="16px",X.style.fontSize="24px",X.innerHTML=" &times;",X.onclick=()=>{previouslyDismissed=!0,d()},X}function b(X,he){X.setAttribute("id",he),X.innerText="Learn more",X.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",X.setAttribute("target","__blank"),X.style.paddingLeft="5px",X.style.textDecoration="underline"}function W(){const X=getOrCreateEl(s),he=n("text"),_e=document.getElementById(he)||document.createElement("span"),we=n("learnmore"),ve=document.getElementById(we)||document.createElement("a"),pe=n("preprendIcon"),Ae=document.getElementById(pe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(X.created){const Re=X.element;m(Re),b(ve,we);const Pe=g();p(Ae,pe),Re.append(Ae,_e,ve,Pe),document.body.appendChild(Re)}u?(_e.innerText="Preview backend disconnected.",Ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_e.innerText="Preview backend running in this workspace."),_e.setAttribute("id",he)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",W):W()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getUA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function isMobileCordova(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())}function isNode(){const r=getDefaults()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function isCloudflareWorker(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function isBrowserExtension(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function isReactNative(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function isIE(){const r=getUA();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function isSafari(){return!isNode()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function isIndexedDBAvailable(){try{return typeof indexedDB=="object"}catch{return!1}}function validateIndexedDBOpenable(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}function areCookiesEnabled(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?replaceTemplate(u,s):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new FirebaseError(o,m,s)}}function replaceTemplate(r,e){return r.replace(PATTERN,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const PATTERN=/\{\$([^}]+)}/g;function isEmpty$1(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function deepEqual(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=r[o],d=e[o];if(isObject(u)&&isObject(d)){if(!deepEqual(u,d))return!1}else if(u!==d)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function isObject(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function querystring(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function querystringDecode(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function extractQuerystring(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function createSubscribe(r,e){const n=new ObserverProxy(r,e);return n.subscribe.bind(n)}class ObserverProxy{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");implementsAnyMethods(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=noop),o.error===void 0&&(o.error=noop),o.complete===void 0&&(o.complete=noop);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function implementsAnyMethods(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function noop(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_INTERVAL_MILLIS=1e3,DEFAULT_BACKOFF_FACTOR=2,MAX_VALUE_MILLIS=14400*1e3,RANDOM_FACTOR=.5;function calculateBackoffMillis(r,e=DEFAULT_INTERVAL_MILLIS,n=DEFAULT_BACKOFF_FACTOR){const s=e*Math.pow(n,r),o=Math.round(RANDOM_FACTOR*s*(Math.random()-.5)*2);return Math.min(MAX_VALUE_MILLIS,s+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance(r){return r&&r._delegate?r._delegate:r}class Component{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME$1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Provider{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Deferred;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(isComponentEager(e))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=DEFAULT_ENTRY_NAME$1){return this.instances.has(e)}getOptions(e=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&d.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?e:DEFAULT_ENTRY_NAME$1:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function normalizeIdentifierForFactory(r){return r===DEFAULT_ENTRY_NAME$1?void 0:r}function isComponentEager(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ComponentContainer{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Provider(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LogLevel;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(LogLevel||(LogLevel={}));const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=ConsoleMethod[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Logger{constructor(e){this.name=e,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in LogLevel))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?levelStringToEnum[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,...e),this._logHandler(this,LogLevel.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,...e),this._logHandler(this,LogLevel.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,...e),this._logHandler(this,LogLevel.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,...e),this._logHandler(this,LogLevel.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,...e),this._logHandler(this,LogLevel.ERROR,...e)}}const instanceOfAny=(r,e)=>e.some(n=>r instanceof n);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",d)},u=()=>{n(wrap(r.result)),o()},d=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&cursorRequestMap.set(n,r)}).catch(()=>{}),reverseTransformCache.set(e,r),e}function cacheDonePromiseForTransaction(r){if(transactionDoneMap.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",d),r.removeEventListener("abort",d)},u=()=>{n(),o()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",d),r.addEventListener("abort",d)});transactionDoneMap.set(r,e)}let idbProxyTraps={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return transactionDoneMap.get(r);if(e==="objectStoreNames")return r.objectStoreNames||transactionStoreNamesMap.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wrap(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function replaceTraps(r){idbProxyTraps=r(idbProxyTraps)}function wrapFunction(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(unwrap(this),e,...n);return transactionStoreNamesMap.set(s,e.sort?e.sort():[e]),wrap(s)}:getCursorAdvanceMethods().includes(r)?function(...e){return r.apply(unwrap(this),e),wrap(cursorRequestMap.get(this))}:function(...e){return wrap(r.apply(unwrap(this),e))}}function transformCachableValue(r){return typeof r=="function"?wrapFunction(r):(r instanceof IDBTransaction&&cacheDonePromiseForTransaction(r),instanceOfAny(r,getIdbProxyableTypes())?new Proxy(r,idbProxyTraps):r)}function wrap(r){if(r instanceof IDBRequest)return promisifyRequest(r);if(transformCache.has(r))return transformCache.get(r);const e=transformCachableValue(r);return e!==r&&(transformCache.set(r,e),reverseTransformCache.set(e,r)),e}const unwrap=r=>reverseTransformCache.get(r);function openDB(r,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const d=indexedDB.open(r,e),m=wrap(d);return s&&d.addEventListener("upgradeneeded",p=>{s(wrap(d.result),p.oldVersion,p.newVersion,wrap(d.transaction),p)}),n&&d.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(cachedMethods.get(e))return cachedMethods.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=writeMethods.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||readMethods.includes(n)))return;const u=async function(d,...m){const p=this.transaction(d,o?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(m.shift())),(await Promise.all([g[n](...m),o&&p.done]))[0]};return cachedMethods.set(e,u),u}replaceTraps(r=>({...r,get:(e,n,s)=>getMethod(e,n)||r.get(e,n,s),has:(e,n)=>!!getMethod(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PlatformLoggerServiceImpl{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(isVersionServiceProvider(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function isVersionServiceProvider(r){return r.getComponent()?.type==="VERSION"}const name$q="@firebase/app",version$1$1="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger$1=new Logger("@firebase/app"),name$p="@firebase/app-compat",name$o="@firebase/analytics-compat",name$n="@firebase/analytics",name$m="@firebase/app-check-compat",name$l="@firebase/app-check",name$k="@firebase/auth",name$j="@firebase/auth-compat",name$i="@firebase/database",name$h="@firebase/data-connect",name$g="@firebase/database-compat",name$f="@firebase/functions",name$e="@firebase/functions-compat",name$d="@firebase/installations",name$c="@firebase/installations-compat",name$b="@firebase/messaging",name$a="@firebase/messaging-compat",name$9="@firebase/performance",name$8="@firebase/performance-compat",name$7="@firebase/remote-config",name$6="@firebase/remote-config-compat",name$5="@firebase/storage",name$4="@firebase/storage-compat",name$3$1="@firebase/firestore",name$2$1="@firebase/ai",name$1$1="@firebase/firestore-compat",name$r="firebase",version$4="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$q]:"fire-core",[name$p]:"fire-core-compat",[name$n]:"fire-analytics",[name$o]:"fire-analytics-compat",[name$l]:"fire-app-check",[name$m]:"fire-app-check-compat",[name$k]:"fire-auth",[name$j]:"fire-auth-compat",[name$i]:"fire-rtdb",[name$h]:"fire-data-connect",[name$g]:"fire-rtdb-compat",[name$f]:"fire-fn",[name$e]:"fire-fn-compat",[name$d]:"fire-iid",[name$c]:"fire-iid-compat",[name$b]:"fire-fcm",[name$a]:"fire-fcm-compat",[name$9]:"fire-perf",[name$8]:"fire-perf-compat",[name$7]:"fire-rc",[name$6]:"fire-rc-compat",[name$5]:"fire-gcs",[name$4]:"fire-gcs-compat",[name$3$1]:"fire-fst",[name$1$1]:"fire-fst-compat",[name$2$1]:"fire-vertex","fire-js":"fire-js",[name$r]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _apps=new Map,_serverApps=new Map,_components=new Map;function _addComponent(r,e){try{r.container.addComponent(e)}catch(n){logger$1.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function _registerComponent(r){const e=r.name;if(_components.has(e))return logger$1.debug(`There were multiple attempts to register component ${e}.`),!1;_components.set(e,r);for(const n of _apps.values())_addComponent(n,r);for(const n of _serverApps.values())_addComponent(n,r);return!0}function _getProvider(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function _isFirebaseServerApp(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS$1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ERROR_FACTORY$2=new ErrorFactory("app","Firebase",ERRORS$1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAppImpl{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY$2.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDK_VERSION=version$4;function initializeApp(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s={name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw ERROR_FACTORY$2.create("bad-app-name",{appName:String(o)});if(n||(n=getDefaultAppConfig()),!n)throw ERROR_FACTORY$2.create("no-options");const u=_apps.get(o);if(u){if(deepEqual(n,u.options)&&deepEqual(s,u.config))return u;throw ERROR_FACTORY$2.create("duplicate-app",{appName:o})}const d=new ComponentContainer(o);for(const p of _components.values())d.addComponent(p);const m=new FirebaseAppImpl(n,s,d);return _apps.set(o,m),m}function getApp(r=DEFAULT_ENTRY_NAME){const e=_apps.get(r);if(!e&&r===DEFAULT_ENTRY_NAME&&getDefaultAppConfig())return initializeApp();if(!e)throw ERROR_FACTORY$2.create("no-app",{appName:r});return e}function registerVersion(r,e,n){let s=PLATFORM_LOG_STRING[r]??r;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const d=[`Unable to register library "${s}" with version "${e}":`];o&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),logger$1.warn(d.join(" "));return}_registerComponent(new Component(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME$1="firebase-heartbeat-database",DB_VERSION$1=1,STORE_NAME="firebase-heartbeat-store";let dbPromise$1=null;function getDbPromise$1(){return dbPromise$1||(dbPromise$1=openDB(DB_NAME$1,DB_VERSION$1,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(STORE_NAME)}catch(n){console.warn(n)}}}}).catch(r=>{throw ERROR_FACTORY$2.create("idb-open",{originalErrorMessage:r.message})})),dbPromise$1}async function readHeartbeatsFromIndexedDB(r){try{const n=(await getDbPromise$1()).transaction(STORE_NAME),s=await n.objectStore(STORE_NAME).get(computeKey(r));return await n.done,s}catch(e){if(e instanceof FirebaseError)logger$1.warn(e.message);else{const n=ERROR_FACTORY$2.create("idb-get",{originalErrorMessage:e?.message});logger$1.warn(n.message)}}}async function writeHeartbeatsToIndexedDB(r,e){try{const s=(await getDbPromise$1()).transaction(STORE_NAME,"readwrite");await s.objectStore(STORE_NAME).put(e,computeKey(r)),await s.done}catch(n){if(n instanceof FirebaseError)logger$1.warn(n.message);else{const s=ERROR_FACTORY$2.create("idb-set",{originalErrorMessage:n?.message});logger$1.warn(s.message)}}}function computeKey(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_HEADER_BYTES=1024,MAX_NUM_STORED_HEARTBEATS=30;class HeartbeatServiceImpl{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=getUTCDateString();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>MAX_NUM_STORED_HEARTBEATS){const o=getEarliestHeartbeatIdx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){logger$1.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=getUTCDateString(),{heartbeatsToSend:n,unsentEntries:s}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),o=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return logger$1.warn(e),""}}}function getUTCDateString(){return new Date().toISOString().substring(0,10)}function extractHeartbeatsForHeader(r,e=MAX_HEADER_BYTES){const n=[];let s=r.slice();for(const o of r){const u=n.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),countBytes(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),countBytes(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class HeartbeatStorageImpl{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return isIndexedDBAvailable()?validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await readHeartbeatsFromIndexedDB(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function countBytes(r){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:r})).length}function getEarliestHeartbeatIdx(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerCoreComponents(r){_registerComponent(new Component("platform-logger",e=>new PlatformLoggerServiceImpl(e),"PRIVATE")),_registerComponent(new Component("heartbeat",e=>new HeartbeatServiceImpl(e),"PRIVATE")),registerVersion(name$q,version$1$1,r),registerVersion(name$q,version$1$1,"esm2020"),registerVersion("fire-js","")}registerCoreComponents("");var name$3="firebase",version$3="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */registerVersion(name$3,version$3,"app");const name$2="@firebase/installations",version$2="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PENDING_TIMEOUT_MS=1e4,PACKAGE_VERSION=`w:${version$2}`,INTERNAL_AUTH_VERSION="FIS_v2",INSTALLATIONS_API_URL="https://firebaseinstallations.googleapis.com/v1",TOKEN_EXPIRATION_BUFFER=3600*1e3,SERVICE="installations",SERVICE_NAME="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_DESCRIPTION_MAP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ERROR_FACTORY$1=new ErrorFactory(SERVICE,SERVICE_NAME,ERROR_DESCRIPTION_MAP);function isServerError(r){return r instanceof FirebaseError&&r.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getInstallationsEndpoint({projectId:r}){return`${INSTALLATIONS_API_URL}/projects/${r}/installations`}function extractAuthTokenInfoFromResponse(r){return{token:r.token,requestStatus:2,expiresIn:getExpiresInFromResponseExpiresIn(r.expiresIn),creationTime:Date.now()}}async function getErrorFromResponse(r,e){const s=(await e.json()).error;return ERROR_FACTORY$1.create("request-failed",{requestName:r,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function getHeaders$1({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function getHeadersWithAuth(r,{refreshToken:e}){const n=getHeaders$1(r);return n.append("Authorization",getAuthorizationHeader(e)),n}async function retryIfServerError(r){const e=await r();return e.status>=500&&e.status<600?r():e}function getExpiresInFromResponseExpiresIn(r){return Number(r.replace("s","000"))}function getAuthorizationHeader(r){return`${INTERNAL_AUTH_VERSION} ${r}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function createInstallationRequest({appConfig:r,heartbeatServiceProvider:e},{fid:n}){const s=getInstallationsEndpoint(r),o=getHeaders$1(r),u=e.getImmediate({optional:!0});if(u){const g=await u.getHeartbeatsHeader();g&&o.append("x-firebase-client",g)}const d={fid:n,authVersion:INTERNAL_AUTH_VERSION,appId:r.appId,sdkVersion:PACKAGE_VERSION},m={method:"POST",headers:o,body:JSON.stringify(d)},p=await retryIfServerError(()=>fetch(s,m));if(p.ok){const g=await p.json();return{fid:g.fid||n,registrationStatus:2,refreshToken:g.refreshToken,authToken:extractAuthTokenInfoFromResponse(g.authToken)}}else throw await getErrorFromResponse("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sleep(r){return new Promise(e=>{setTimeout(e,r)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bufferToBase64UrlSafe(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VALID_FID_PATTERN=/^[cdef][\w-]{21}$/,INVALID_FID="";function generateFid(){try{const r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;const n=encode(r);return VALID_FID_PATTERN.test(n)?n:INVALID_FID}catch{return INVALID_FID}}function encode(r){return bufferToBase64UrlSafe(r).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getKey(r){return`${r.appName}!${r.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fidChangeCallbacks=new Map;function fidChanged(r,e){const n=getKey(r);callFidChangeCallbacks(n,e),broadcastFidChange(n,e)}function callFidChangeCallbacks(r,e){const n=fidChangeCallbacks.get(r);if(n)for(const s of n)s(e)}function broadcastFidChange(r,e){const n=getBroadcastChannel();n&&n.postMessage({key:r,fid:e}),closeBroadcastChannel()}let broadcastChannel=null;function getBroadcastChannel(){return!broadcastChannel&&"BroadcastChannel"in self&&(broadcastChannel=new BroadcastChannel("[Firebase] FID Change"),broadcastChannel.onmessage=r=>{callFidChangeCallbacks(r.data.key,r.data.fid)}),broadcastChannel}function closeBroadcastChannel(){fidChangeCallbacks.size===0&&broadcastChannel&&(broadcastChannel.close(),broadcastChannel=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DATABASE_NAME="firebase-installations-database",DATABASE_VERSION=1,OBJECT_STORE_NAME="firebase-installations-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DATABASE_NAME,DATABASE_VERSION,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(OBJECT_STORE_NAME)}}})),dbPromise}async function set(r,e){const n=getKey(r),o=(await getDbPromise()).transaction(OBJECT_STORE_NAME,"readwrite"),u=o.objectStore(OBJECT_STORE_NAME),d=await u.get(n);return await u.put(e,n),await o.done,(!d||d.fid!==e.fid)&&fidChanged(r,e.fid),e}async function remove(r){const e=getKey(r),s=(await getDbPromise()).transaction(OBJECT_STORE_NAME,"readwrite");await s.objectStore(OBJECT_STORE_NAME).delete(e),await s.done}async function update(r,e){const n=getKey(r),o=(await getDbPromise()).transaction(OBJECT_STORE_NAME,"readwrite"),u=o.objectStore(OBJECT_STORE_NAME),d=await u.get(n),m=e(d);return m===void 0?await u.delete(n):await u.put(m,n),await o.done,m&&(!d||d.fid!==m.fid)&&fidChanged(r,m.fid),m}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function getInstallationEntry(r){let e;const n=await update(r.appConfig,s=>{const o=updateOrCreateInstallationEntry(s),u=triggerRegistrationIfNecessary(r,o);return e=u.registrationPromise,u.installationEntry});return n.fid===INVALID_FID?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function updateOrCreateInstallationEntry(r){const e=r||{fid:generateFid(),registrationStatus:0};return clearTimedOutRequest(e)}function triggerRegistrationIfNecessary(r,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(ERROR_FACTORY$1.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=registerInstallation(r,n);return{installationEntry:n,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:waitUntilFidRegistration(r)}:{installationEntry:e}}async function registerInstallation(r,e){try{const n=await createInstallationRequest(r,e);return set(r.appConfig,n)}catch(n){throw isServerError(n)&&n.customData.serverCode===409?await remove(r.appConfig):await set(r.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function waitUntilFidRegistration(r){let e=await updateInstallationRequest(r.appConfig);for(;e.registrationStatus===1;)await sleep(100),e=await updateInstallationRequest(r.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await getInstallationEntry(r);return s||n}return e}function updateInstallationRequest(r){return update(r,e=>{if(!e)throw ERROR_FACTORY$1.create("installation-not-found");return clearTimedOutRequest(e)})}function clearTimedOutRequest(r){return hasInstallationRequestTimedOut(r)?{fid:r.fid,registrationStatus:0}:r}function hasInstallationRequestTimedOut(r){return r.registrationStatus===1&&r.registrationTime+PENDING_TIMEOUT_MS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function generateAuthTokenRequest({appConfig:r,heartbeatServiceProvider:e},n){const s=getGenerateAuthTokenEndpoint(r,n),o=getHeadersWithAuth(r,n),u=e.getImmediate({optional:!0});if(u){const g=await u.getHeartbeatsHeader();g&&o.append("x-firebase-client",g)}const d={installation:{sdkVersion:PACKAGE_VERSION,appId:r.appId}},m={method:"POST",headers:o,body:JSON.stringify(d)},p=await retryIfServerError(()=>fetch(s,m));if(p.ok){const g=await p.json();return extractAuthTokenInfoFromResponse(g)}else throw await getErrorFromResponse("Generate Auth Token",p)}function getGenerateAuthTokenEndpoint(r,{fid:e}){return`${getInstallationsEndpoint(r)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function refreshAuthToken(r,e=!1){let n;const s=await update(r.appConfig,u=>{if(!isEntryRegistered(u))throw ERROR_FACTORY$1.create("not-registered");const d=u.authToken;if(!e&&isAuthTokenValid(d))return u;if(d.requestStatus===1)return n=waitUntilAuthTokenRequest(r,e),u;{if(!navigator.onLine)throw ERROR_FACTORY$1.create("app-offline");const m=makeAuthTokenRequestInProgressEntry(u);return n=fetchAuthTokenFromServer(r,m),m}});return n?await n:s.authToken}async function waitUntilAuthTokenRequest(r,e){let n=await updateAuthTokenRequest(r.appConfig);for(;n.authToken.requestStatus===1;)await sleep(100),n=await updateAuthTokenRequest(r.appConfig);const s=n.authToken;return s.requestStatus===0?refreshAuthToken(r,e):s}function updateAuthTokenRequest(r){return update(r,e=>{if(!isEntryRegistered(e))throw ERROR_FACTORY$1.create("not-registered");const n=e.authToken;return hasAuthTokenRequestTimedOut(n)?{...e,authToken:{requestStatus:0}}:e})}async function fetchAuthTokenFromServer(r,e){try{const n=await generateAuthTokenRequest(r,e),s={...e,authToken:n};return await set(r.appConfig,s),n}catch(n){if(isServerError(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await remove(r.appConfig);else{const s={...e,authToken:{requestStatus:0}};await set(r.appConfig,s)}throw n}}function isEntryRegistered(r){return r!==void 0&&r.registrationStatus===2}function isAuthTokenValid(r){return r.requestStatus===2&&!isAuthTokenExpired(r)}function isAuthTokenExpired(r){const e=Date.now();return e<r.creationTime||r.creationTime+r.expiresIn<e+TOKEN_EXPIRATION_BUFFER}function makeAuthTokenRequestInProgressEntry(r){const e={requestStatus:1,requestTime:Date.now()};return{...r,authToken:e}}function hasAuthTokenRequestTimedOut(r){return r.requestStatus===1&&r.requestTime+PENDING_TIMEOUT_MS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function getId(r){const e=r,{installationEntry:n,registrationPromise:s}=await getInstallationEntry(e);return s?s.catch(console.error):refreshAuthToken(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function getToken(r,e=!1){const n=r;return await completeInstallationRegistration(n),(await refreshAuthToken(n,e)).token}async function completeInstallationRegistration(r){const{registrationPromise:e}=await getInstallationEntry(r);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function extractAppConfig(r){if(!r||!r.options)throw getMissingValueError("App Configuration");if(!r.name)throw getMissingValueError("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!r.options[n])throw getMissingValueError(n);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function getMissingValueError(r){return ERROR_FACTORY$1.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const INSTALLATIONS_NAME="installations",INSTALLATIONS_NAME_INTERNAL="installations-internal",publicFactory=r=>{const e=r.getProvider("app").getImmediate(),n=extractAppConfig(e),s=_getProvider(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},internalFactory=r=>{const e=r.getProvider("app").getImmediate(),n=_getProvider(e,INSTALLATIONS_NAME).getImmediate();return{getId:()=>getId(n),getToken:o=>getToken(n,o)}};function registerInstallations(){_registerComponent(new Component(INSTALLATIONS_NAME,publicFactory,"PUBLIC")),_registerComponent(new Component(INSTALLATIONS_NAME_INTERNAL,internalFactory,"PRIVATE"))}registerInstallations(),registerVersion(name$2,version$2),registerVersion(name$2,version$2,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ANALYTICS_TYPE="analytics",GA_FID_KEY="firebase_id",ORIGIN_KEY="origin",FETCH_TIMEOUT_MILLIS=60*1e3,DYNAMIC_CONFIG_URL="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",GTAG_URL="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger=new Logger("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ERROR_FACTORY=new ErrorFactory("analytics","Analytics",ERRORS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createGtagTrustedTypesScriptURL(r){if(!r.startsWith(GTAG_URL)){const e=ERROR_FACTORY.create("invalid-gtag-resource",{gtagURL:r});return logger.warn(e.message),""}return r}function promiseAllSettled(r){return Promise.all(r.map(e=>e.catch(n=>n)))}function createTrustedTypesPolicy(r,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(r,e)),n}function insertScriptTag(r,e){const n=createTrustedTypesPolicy("firebase-js-sdk-policy",{createScriptURL:createGtagTrustedTypesScriptURL}),s=document.createElement("script"),o=`${GTAG_URL}?l=${r}&id=${e}`;s.src=n?n?.createScriptURL(o):o,s.async=!0,document.head.appendChild(s)}function getOrCreateDataLayer(r){let e=[];return Array.isArray(window[r])?e=window[r]:window[r]=e,e}async function gtagOnConfig(r,e,n,s,o,u){const d=s[o];try{if(d)await e[d];else{const p=(await promiseAllSettled(n)).find(g=>g.measurementId===o);p&&await e[p.appId]}}catch(m){logger.error(m)}r("config",o,u)}async function gtagOnEvent(r,e,n,s,o){try{let u=[];if(o&&o.send_to){let d=o.send_to;Array.isArray(d)||(d=[d]);const m=await promiseAllSettled(n);for(const p of d){const g=m.find(W=>W.measurementId===p),b=g&&e[g.appId];if(b)u.push(b);else{u=[];break}}}u.length===0&&(u=Object.values(e)),await Promise.all(u),r("event",s,o||{})}catch(u){logger.error(u)}}function wrapGtag(r,e,n,s){async function o(u,...d){try{if(u==="event"){const[m,p]=d;await gtagOnEvent(r,e,n,m,p)}else if(u==="config"){const[m,p]=d;await gtagOnConfig(r,e,n,s,m,p)}else if(u==="consent"){const[m,p]=d;r("consent",m,p)}else if(u==="get"){const[m,p,g]=d;r("get",m,p,g)}else if(u==="set"){const[m]=d;r("set",m)}else r(u,...d)}catch(m){logger.error(m)}}return o}function wrapOrCreateGtag(r,e,n,s,o){let u=function(...d){window[s].push(arguments)};return window[o]&&typeof window[o]=="function"&&(u=window[o]),window[o]=wrapGtag(u,r,e,n),{gtagCore:u,wrappedGtag:window[o]}}function findGtagScriptOnPage(r){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(GTAG_URL)&&n.src.includes(r))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LONG_RETRY_FACTOR=30,BASE_INTERVAL_MILLIS=1e3;class RetryData{constructor(e={},n=BASE_INTERVAL_MILLIS){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const defaultRetryData=new RetryData;function getHeaders(r){return new Headers({Accept:"application/json","x-goog-api-key":r})}async function fetchDynamicConfig(r){const{appId:e,apiKey:n}=r,s={method:"GET",headers:getHeaders(n)},o=DYNAMIC_CONFIG_URL.replace("{app-id}",e),u=await fetch(o,s);if(u.status!==200&&u.status!==304){let d="";try{const m=await u.json();m.error?.message&&(d=m.error.message)}catch{}throw ERROR_FACTORY.create("config-fetch-failed",{httpStatus:u.status,responseMessage:d})}return u.json()}async function fetchDynamicConfigWithRetry(r,e=defaultRetryData,n){const{appId:s,apiKey:o,measurementId:u}=r.options;if(!s)throw ERROR_FACTORY.create("no-app-id");if(!o){if(u)return{measurementId:u,appId:s};throw ERROR_FACTORY.create("no-api-key")}const d=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},m=new AnalyticsAbortSignal;return setTimeout(async()=>{m.abort()},FETCH_TIMEOUT_MILLIS),attemptFetchDynamicConfigWithRetry({appId:s,apiKey:o,measurementId:u},d,m,e)}async function attemptFetchDynamicConfigWithRetry(r,{throttleEndTimeMillis:e,backoffCount:n},s,o=defaultRetryData){const{appId:u,measurementId:d}=r;try{await setAbortableTimeout(s,e)}catch(m){if(d)return logger.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:u,measurementId:d};throw m}try{const m=await fetchDynamicConfig(r);return o.deleteThrottleMetadata(u),m}catch(m){const p=m;if(!isRetriableError(p)){if(o.deleteThrottleMetadata(u),d)return logger.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:u,measurementId:d};throw m}const g=Number(p?.customData?.httpStatus)===503?calculateBackoffMillis(n,o.intervalMillis,LONG_RETRY_FACTOR):calculateBackoffMillis(n,o.intervalMillis),b={throttleEndTimeMillis:Date.now()+g,backoffCount:n+1};return o.setThrottleMetadata(u,b),logger.debug(`Calling attemptFetch again in ${g} millis`),attemptFetchDynamicConfigWithRetry(r,b,s,o)}}function setAbortableTimeout(r,e){return new Promise((n,s)=>{const o=Math.max(e-Date.now(),0),u=setTimeout(n,o);r.addEventListener(()=>{clearTimeout(u),s(ERROR_FACTORY.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function isRetriableError(r){if(!(r instanceof FirebaseError)||!r.customData)return!1;const e=Number(r.customData.httpStatus);return e===429||e===500||e===503||e===504}class AnalyticsAbortSignal{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function logEvent$1(r,e,n,s,o){if(o&&o.global){r("event",n,s);return}else{const u=await e,d={...s,send_to:u};r("event",n,d)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function validateIndexedDB(){if(isIndexedDBAvailable())try{await validateIndexedDBOpenable()}catch(r){return logger.warn(ERROR_FACTORY.create("indexeddb-unavailable",{errorInfo:r?.toString()}).message),!1}else return logger.warn(ERROR_FACTORY.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function _initializeAnalytics(r,e,n,s,o,u,d){const m=fetchDynamicConfigWithRetry(r);m.then(X=>{n[X.measurementId]=X.appId,r.options.measurementId&&X.measurementId!==r.options.measurementId&&logger.warn(`The measurement ID in the local Firebase config (${r.options.measurementId}) does not match the measurement ID fetched from the server (${X.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(X=>logger.error(X)),e.push(m);const p=validateIndexedDB().then(X=>{if(X)return s.getId()}),[g,b]=await Promise.all([m,p]);findGtagScriptOnPage(u)||insertScriptTag(u,g.measurementId),o("js",new Date);const W=d?.config??{};return W[ORIGIN_KEY]="firebase",W.update=!0,b!=null&&(W[GA_FID_KEY]=b),o("config",g.measurementId,W),g.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AnalyticsService{constructor(e){this.app=e}_delete(){return delete initializationPromisesMap[this.app.options.appId],Promise.resolve()}}let initializationPromisesMap={},dynamicConfigPromisesList=[];const measurementIdToAppId={};let dataLayerName="dataLayer",gtagName="gtag",gtagCoreFunction,wrappedGtagFunction,globalInitDone=!1;function warnOnBrowserContextMismatch(){const r=[];if(isBrowserExtension()&&r.push("This is a browser extension environment."),areCookiesEnabled()||r.push("Cookies are not available."),r.length>0){const e=r.map((s,o)=>`(${o+1}) ${s}`).join(" "),n=ERROR_FACTORY.create("invalid-analytics-context",{errorInfo:e});logger.warn(n.message)}}function factory(r,e,n){warnOnBrowserContextMismatch();const s=r.options.appId;if(!s)throw ERROR_FACTORY.create("no-app-id");if(!r.options.apiKey)if(r.options.measurementId)logger.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${r.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ERROR_FACTORY.create("no-api-key");if(initializationPromisesMap[s]!=null)throw ERROR_FACTORY.create("already-exists",{id:s});if(!globalInitDone){getOrCreateDataLayer(dataLayerName);const{wrappedGtag:u,gtagCore:d}=wrapOrCreateGtag(initializationPromisesMap,dynamicConfigPromisesList,measurementIdToAppId,dataLayerName,gtagName);wrappedGtagFunction=u,gtagCoreFunction=d,globalInitDone=!0}return initializationPromisesMap[s]=_initializeAnalytics(r,dynamicConfigPromisesList,measurementIdToAppId,e,gtagCoreFunction,dataLayerName,n),new AnalyticsService(r)}function getAnalytics(r=getApp()){r=getModularInstance(r);const e=_getProvider(r,ANALYTICS_TYPE);return e.isInitialized()?e.getImmediate():initializeAnalytics(r)}function initializeAnalytics(r,e={}){const n=_getProvider(r,ANALYTICS_TYPE);if(n.isInitialized()){const o=n.getImmediate();if(deepEqual(e,n.getOptions()))return o;throw ERROR_FACTORY.create("already-initialized")}return n.initialize({options:e})}function logEvent(r,e,n,s){r=getModularInstance(r),logEvent$1(wrappedGtagFunction,initializationPromisesMap[r.app.options.appId],e,n,s).catch(o=>logger.error(o))}const name$1="@firebase/analytics",version$1="0.10.18";function registerAnalytics(){_registerComponent(new Component(ANALYTICS_TYPE,(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return factory(s,o,n)},"PUBLIC")),_registerComponent(new Component("analytics-internal",r,"PRIVATE")),registerVersion(name$1,version$1),registerVersion(name$1,version$1,"esm2020");function r(e){try{const n=e.getProvider(ANALYTICS_TYPE).getImmediate();return{logEvent:(s,o,u)=>logEvent(n,s,o,u)}}catch(n){throw ERROR_FACTORY.create("interop-component-reg-failed",{reason:n})}}}registerAnalytics();var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Integer,Md5;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(ie,Z){function ee(){}ee.prototype=Z.prototype,ie.D=Z.prototype,ie.prototype=new ee,ie.prototype.constructor=ie,ie.C=function(ae,oe,ue){for(var ne=Array(arguments.length-2),mn=2;mn<arguments.length;mn++)ne[mn-2]=arguments[mn];return Z.prototype[oe].apply(ae,ne)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(ie,Z,ee){ee||(ee=0);var ae=Array(16);if(typeof Z=="string")for(var oe=0;16>oe;++oe)ae[oe]=Z.charCodeAt(ee++)|Z.charCodeAt(ee++)<<8|Z.charCodeAt(ee++)<<16|Z.charCodeAt(ee++)<<24;else for(oe=0;16>oe;++oe)ae[oe]=Z[ee++]|Z[ee++]<<8|Z[ee++]<<16|Z[ee++]<<24;Z=ie.g[0],ee=ie.g[1],oe=ie.g[2];var ue=ie.g[3],ne=Z+(ue^ee&(oe^ue))+ae[0]+3614090360&4294967295;Z=ee+(ne<<7&4294967295|ne>>>25),ne=ue+(oe^Z&(ee^oe))+ae[1]+3905402710&4294967295,ue=Z+(ne<<12&4294967295|ne>>>20),ne=oe+(ee^ue&(Z^ee))+ae[2]+606105819&4294967295,oe=ue+(ne<<17&4294967295|ne>>>15),ne=ee+(Z^oe&(ue^Z))+ae[3]+3250441966&4294967295,ee=oe+(ne<<22&4294967295|ne>>>10),ne=Z+(ue^ee&(oe^ue))+ae[4]+4118548399&4294967295,Z=ee+(ne<<7&4294967295|ne>>>25),ne=ue+(oe^Z&(ee^oe))+ae[5]+1200080426&4294967295,ue=Z+(ne<<12&4294967295|ne>>>20),ne=oe+(ee^ue&(Z^ee))+ae[6]+2821735955&4294967295,oe=ue+(ne<<17&4294967295|ne>>>15),ne=ee+(Z^oe&(ue^Z))+ae[7]+4249261313&4294967295,ee=oe+(ne<<22&4294967295|ne>>>10),ne=Z+(ue^ee&(oe^ue))+ae[8]+1770035416&4294967295,Z=ee+(ne<<7&4294967295|ne>>>25),ne=ue+(oe^Z&(ee^oe))+ae[9]+2336552879&4294967295,ue=Z+(ne<<12&4294967295|ne>>>20),ne=oe+(ee^ue&(Z^ee))+ae[10]+4294925233&4294967295,oe=ue+(ne<<17&4294967295|ne>>>15),ne=ee+(Z^oe&(ue^Z))+ae[11]+2304563134&4294967295,ee=oe+(ne<<22&4294967295|ne>>>10),ne=Z+(ue^ee&(oe^ue))+ae[12]+1804603682&4294967295,Z=ee+(ne<<7&4294967295|ne>>>25),ne=ue+(oe^Z&(ee^oe))+ae[13]+4254626195&4294967295,ue=Z+(ne<<12&4294967295|ne>>>20),ne=oe+(ee^ue&(Z^ee))+ae[14]+2792965006&4294967295,oe=ue+(ne<<17&4294967295|ne>>>15),ne=ee+(Z^oe&(ue^Z))+ae[15]+1236535329&4294967295,ee=oe+(ne<<22&4294967295|ne>>>10),ne=Z+(oe^ue&(ee^oe))+ae[1]+4129170786&4294967295,Z=ee+(ne<<5&4294967295|ne>>>27),ne=ue+(ee^oe&(Z^ee))+ae[6]+3225465664&4294967295,ue=Z+(ne<<9&4294967295|ne>>>23),ne=oe+(Z^ee&(ue^Z))+ae[11]+643717713&4294967295,oe=ue+(ne<<14&4294967295|ne>>>18),ne=ee+(ue^Z&(oe^ue))+ae[0]+3921069994&4294967295,ee=oe+(ne<<20&4294967295|ne>>>12),ne=Z+(oe^ue&(ee^oe))+ae[5]+3593408605&4294967295,Z=ee+(ne<<5&4294967295|ne>>>27),ne=ue+(ee^oe&(Z^ee))+ae[10]+38016083&4294967295,ue=Z+(ne<<9&4294967295|ne>>>23),ne=oe+(Z^ee&(ue^Z))+ae[15]+3634488961&4294967295,oe=ue+(ne<<14&4294967295|ne>>>18),ne=ee+(ue^Z&(oe^ue))+ae[4]+3889429448&4294967295,ee=oe+(ne<<20&4294967295|ne>>>12),ne=Z+(oe^ue&(ee^oe))+ae[9]+568446438&4294967295,Z=ee+(ne<<5&4294967295|ne>>>27),ne=ue+(ee^oe&(Z^ee))+ae[14]+3275163606&4294967295,ue=Z+(ne<<9&4294967295|ne>>>23),ne=oe+(Z^ee&(ue^Z))+ae[3]+4107603335&4294967295,oe=ue+(ne<<14&4294967295|ne>>>18),ne=ee+(ue^Z&(oe^ue))+ae[8]+1163531501&4294967295,ee=oe+(ne<<20&4294967295|ne>>>12),ne=Z+(oe^ue&(ee^oe))+ae[13]+2850285829&4294967295,Z=ee+(ne<<5&4294967295|ne>>>27),ne=ue+(ee^oe&(Z^ee))+ae[2]+4243563512&4294967295,ue=Z+(ne<<9&4294967295|ne>>>23),ne=oe+(Z^ee&(ue^Z))+ae[7]+1735328473&4294967295,oe=ue+(ne<<14&4294967295|ne>>>18),ne=ee+(ue^Z&(oe^ue))+ae[12]+2368359562&4294967295,ee=oe+(ne<<20&4294967295|ne>>>12),ne=Z+(ee^oe^ue)+ae[5]+4294588738&4294967295,Z=ee+(ne<<4&4294967295|ne>>>28),ne=ue+(Z^ee^oe)+ae[8]+2272392833&4294967295,ue=Z+(ne<<11&4294967295|ne>>>21),ne=oe+(ue^Z^ee)+ae[11]+1839030562&4294967295,oe=ue+(ne<<16&4294967295|ne>>>16),ne=ee+(oe^ue^Z)+ae[14]+4259657740&4294967295,ee=oe+(ne<<23&4294967295|ne>>>9),ne=Z+(ee^oe^ue)+ae[1]+2763975236&4294967295,Z=ee+(ne<<4&4294967295|ne>>>28),ne=ue+(Z^ee^oe)+ae[4]+1272893353&4294967295,ue=Z+(ne<<11&4294967295|ne>>>21),ne=oe+(ue^Z^ee)+ae[7]+4139469664&4294967295,oe=ue+(ne<<16&4294967295|ne>>>16),ne=ee+(oe^ue^Z)+ae[10]+3200236656&4294967295,ee=oe+(ne<<23&4294967295|ne>>>9),ne=Z+(ee^oe^ue)+ae[13]+681279174&4294967295,Z=ee+(ne<<4&4294967295|ne>>>28),ne=ue+(Z^ee^oe)+ae[0]+3936430074&4294967295,ue=Z+(ne<<11&4294967295|ne>>>21),ne=oe+(ue^Z^ee)+ae[3]+3572445317&4294967295,oe=ue+(ne<<16&4294967295|ne>>>16),ne=ee+(oe^ue^Z)+ae[6]+76029189&4294967295,ee=oe+(ne<<23&4294967295|ne>>>9),ne=Z+(ee^oe^ue)+ae[9]+3654602809&4294967295,Z=ee+(ne<<4&4294967295|ne>>>28),ne=ue+(Z^ee^oe)+ae[12]+3873151461&4294967295,ue=Z+(ne<<11&4294967295|ne>>>21),ne=oe+(ue^Z^ee)+ae[15]+530742520&4294967295,oe=ue+(ne<<16&4294967295|ne>>>16),ne=ee+(oe^ue^Z)+ae[2]+3299628645&4294967295,ee=oe+(ne<<23&4294967295|ne>>>9),ne=Z+(oe^(ee|~ue))+ae[0]+4096336452&4294967295,Z=ee+(ne<<6&4294967295|ne>>>26),ne=ue+(ee^(Z|~oe))+ae[7]+1126891415&4294967295,ue=Z+(ne<<10&4294967295|ne>>>22),ne=oe+(Z^(ue|~ee))+ae[14]+2878612391&4294967295,oe=ue+(ne<<15&4294967295|ne>>>17),ne=ee+(ue^(oe|~Z))+ae[5]+4237533241&4294967295,ee=oe+(ne<<21&4294967295|ne>>>11),ne=Z+(oe^(ee|~ue))+ae[12]+1700485571&4294967295,Z=ee+(ne<<6&4294967295|ne>>>26),ne=ue+(ee^(Z|~oe))+ae[3]+2399980690&4294967295,ue=Z+(ne<<10&4294967295|ne>>>22),ne=oe+(Z^(ue|~ee))+ae[10]+4293915773&4294967295,oe=ue+(ne<<15&4294967295|ne>>>17),ne=ee+(ue^(oe|~Z))+ae[1]+2240044497&4294967295,ee=oe+(ne<<21&4294967295|ne>>>11),ne=Z+(oe^(ee|~ue))+ae[8]+1873313359&4294967295,Z=ee+(ne<<6&4294967295|ne>>>26),ne=ue+(ee^(Z|~oe))+ae[15]+4264355552&4294967295,ue=Z+(ne<<10&4294967295|ne>>>22),ne=oe+(Z^(ue|~ee))+ae[6]+2734768916&4294967295,oe=ue+(ne<<15&4294967295|ne>>>17),ne=ee+(ue^(oe|~Z))+ae[13]+1309151649&4294967295,ee=oe+(ne<<21&4294967295|ne>>>11),ne=Z+(oe^(ee|~ue))+ae[4]+4149444226&4294967295,Z=ee+(ne<<6&4294967295|ne>>>26),ne=ue+(ee^(Z|~oe))+ae[11]+3174756917&4294967295,ue=Z+(ne<<10&4294967295|ne>>>22),ne=oe+(Z^(ue|~ee))+ae[2]+718787259&4294967295,oe=ue+(ne<<15&4294967295|ne>>>17),ne=ee+(ue^(oe|~Z))+ae[9]+3951481745&4294967295,ie.g[0]=ie.g[0]+Z&4294967295,ie.g[1]=ie.g[1]+(oe+(ne<<21&4294967295|ne>>>11))&4294967295,ie.g[2]=ie.g[2]+oe&4294967295,ie.g[3]=ie.g[3]+ue&4294967295}s.prototype.u=function(ie,Z){Z===void 0&&(Z=ie.length);for(var ee=Z-this.blockSize,ae=this.B,oe=this.h,ue=0;ue<Z;){if(oe==0)for(;ue<=ee;)o(this,ie,ue),ue+=this.blockSize;if(typeof ie=="string"){for(;ue<Z;)if(ae[oe++]=ie.charCodeAt(ue++),oe==this.blockSize){o(this,ae),oe=0;break}}else for(;ue<Z;)if(ae[oe++]=ie[ue++],oe==this.blockSize){o(this,ae),oe=0;break}}this.h=oe,this.o+=Z},s.prototype.v=function(){var ie=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);ie[0]=128;for(var Z=1;Z<ie.length-8;++Z)ie[Z]=0;var ee=8*this.o;for(Z=ie.length-8;Z<ie.length;++Z)ie[Z]=ee&255,ee/=256;for(this.u(ie),ie=Array(16),Z=ee=0;4>Z;++Z)for(var ae=0;32>ae;ae+=8)ie[ee++]=this.g[Z]>>>ae&255;return ie};function u(ie,Z){var ee=m;return Object.prototype.hasOwnProperty.call(ee,ie)?ee[ie]:ee[ie]=Z(ie)}function d(ie,Z){this.h=Z;for(var ee=[],ae=!0,oe=ie.length-1;0<=oe;oe--){var ue=ie[oe]|0;ae&&ue==Z||(ee[oe]=ue,ae=!1)}this.g=ee}var m={};function p(ie){return-128<=ie&&128>ie?u(ie,function(Z){return new d([Z|0],0>Z?-1:0)}):new d([ie|0],0>ie?-1:0)}function g(ie){if(isNaN(ie)||!isFinite(ie))return W;if(0>ie)return ve(g(-ie));for(var Z=[],ee=1,ae=0;ie>=ee;ae++)Z[ae]=ie/ee|0,ee*=4294967296;return new d(Z,0)}function b(ie,Z){if(ie.length==0)throw Error("number format error: empty string");if(Z=Z||10,2>Z||36<Z)throw Error("radix out of range: "+Z);if(ie.charAt(0)=="-")return ve(b(ie.substring(1),Z));if(0<=ie.indexOf("-"))throw Error('number format error: interior "-" character');for(var ee=g(Math.pow(Z,8)),ae=W,oe=0;oe<ie.length;oe+=8){var ue=Math.min(8,ie.length-oe),ne=parseInt(ie.substring(oe,oe+ue),Z);8>ue?(ue=g(Math.pow(Z,ue)),ae=ae.j(ue).add(g(ne))):(ae=ae.j(ee),ae=ae.add(g(ne)))}return ae}var W=p(0),X=p(1),he=p(16777216);r=d.prototype,r.m=function(){if(we(this))return-ve(this).m();for(var ie=0,Z=1,ee=0;ee<this.g.length;ee++){var ae=this.i(ee);ie+=(0<=ae?ae:4294967296+ae)*Z,Z*=4294967296}return ie},r.toString=function(ie){if(ie=ie||10,2>ie||36<ie)throw Error("radix out of range: "+ie);if(_e(this))return"0";if(we(this))return"-"+ve(this).toString(ie);for(var Z=g(Math.pow(ie,6)),ee=this,ae="";;){var oe=Pe(ee,Z).g;ee=pe(ee,oe.j(Z));var ue=((0<ee.g.length?ee.g[0]:ee.h)>>>0).toString(ie);if(ee=oe,_e(ee))return ue+ae;for(;6>ue.length;)ue="0"+ue;ae=ue+ae}},r.i=function(ie){return 0>ie?0:ie<this.g.length?this.g[ie]:this.h};function _e(ie){if(ie.h!=0)return!1;for(var Z=0;Z<ie.g.length;Z++)if(ie.g[Z]!=0)return!1;return!0}function we(ie){return ie.h==-1}r.l=function(ie){return ie=pe(this,ie),we(ie)?-1:_e(ie)?0:1};function ve(ie){for(var Z=ie.g.length,ee=[],ae=0;ae<Z;ae++)ee[ae]=~ie.g[ae];return new d(ee,~ie.h).add(X)}r.abs=function(){return we(this)?ve(this):this},r.add=function(ie){for(var Z=Math.max(this.g.length,ie.g.length),ee=[],ae=0,oe=0;oe<=Z;oe++){var ue=ae+(this.i(oe)&65535)+(ie.i(oe)&65535),ne=(ue>>>16)+(this.i(oe)>>>16)+(ie.i(oe)>>>16);ae=ne>>>16,ue&=65535,ne&=65535,ee[oe]=ne<<16|ue}return new d(ee,ee[ee.length-1]&-2147483648?-1:0)};function pe(ie,Z){return ie.add(ve(Z))}r.j=function(ie){if(_e(this)||_e(ie))return W;if(we(this))return we(ie)?ve(this).j(ve(ie)):ve(ve(this).j(ie));if(we(ie))return ve(this.j(ve(ie)));if(0>this.l(he)&&0>ie.l(he))return g(this.m()*ie.m());for(var Z=this.g.length+ie.g.length,ee=[],ae=0;ae<2*Z;ae++)ee[ae]=0;for(ae=0;ae<this.g.length;ae++)for(var oe=0;oe<ie.g.length;oe++){var ue=this.i(ae)>>>16,ne=this.i(ae)&65535,mn=ie.i(oe)>>>16,Mt=ie.i(oe)&65535;ee[2*ae+2*oe]+=ne*Mt,Ae(ee,2*ae+2*oe),ee[2*ae+2*oe+1]+=ue*Mt,Ae(ee,2*ae+2*oe+1),ee[2*ae+2*oe+1]+=ne*mn,Ae(ee,2*ae+2*oe+1),ee[2*ae+2*oe+2]+=ue*mn,Ae(ee,2*ae+2*oe+2)}for(ae=0;ae<Z;ae++)ee[ae]=ee[2*ae+1]<<16|ee[2*ae];for(ae=Z;ae<2*Z;ae++)ee[ae]=0;return new d(ee,0)};function Ae(ie,Z){for(;(ie[Z]&65535)!=ie[Z];)ie[Z+1]+=ie[Z]>>>16,ie[Z]&=65535,Z++}function Re(ie,Z){this.g=ie,this.h=Z}function Pe(ie,Z){if(_e(Z))throw Error("division by zero");if(_e(ie))return new Re(W,W);if(we(ie))return Z=Pe(ve(ie),Z),new Re(ve(Z.g),ve(Z.h));if(we(Z))return Z=Pe(ie,ve(Z)),new Re(ve(Z.g),Z.h);if(30<ie.g.length){if(we(ie)||we(Z))throw Error("slowDivide_ only works with positive integers.");for(var ee=X,ae=Z;0>=ae.l(ie);)ee=Oe(ee),ae=Oe(ae);var oe=Ve(ee,1),ue=Ve(ae,1);for(ae=Ve(ae,2),ee=Ve(ee,2);!_e(ae);){var ne=ue.add(ae);0>=ne.l(ie)&&(oe=oe.add(ee),ue=ne),ae=Ve(ae,1),ee=Ve(ee,1)}return Z=pe(ie,oe.j(Z)),new Re(oe,Z)}for(oe=W;0<=ie.l(Z);){for(ee=Math.max(1,Math.floor(ie.m()/Z.m())),ae=Math.ceil(Math.log(ee)/Math.LN2),ae=48>=ae?1:Math.pow(2,ae-48),ue=g(ee),ne=ue.j(Z);we(ne)||0<ne.l(ie);)ee-=ae,ue=g(ee),ne=ue.j(Z);_e(ue)&&(ue=X),oe=oe.add(ue),ie=pe(ie,ne)}return new Re(oe,ie)}r.A=function(ie){return Pe(this,ie).h},r.and=function(ie){for(var Z=Math.max(this.g.length,ie.g.length),ee=[],ae=0;ae<Z;ae++)ee[ae]=this.i(ae)&ie.i(ae);return new d(ee,this.h&ie.h)},r.or=function(ie){for(var Z=Math.max(this.g.length,ie.g.length),ee=[],ae=0;ae<Z;ae++)ee[ae]=this.i(ae)|ie.i(ae);return new d(ee,this.h|ie.h)},r.xor=function(ie){for(var Z=Math.max(this.g.length,ie.g.length),ee=[],ae=0;ae<Z;ae++)ee[ae]=this.i(ae)^ie.i(ae);return new d(ee,this.h^ie.h)};function Oe(ie){for(var Z=ie.g.length+1,ee=[],ae=0;ae<Z;ae++)ee[ae]=ie.i(ae)<<1|ie.i(ae-1)>>>31;return new d(ee,ie.h)}function Ve(ie,Z){var ee=Z>>5;Z%=32;for(var ae=ie.g.length-ee,oe=[],ue=0;ue<ae;ue++)oe[ue]=0<Z?ie.i(ue+ee)>>>Z|ie.i(ue+ee+1)<<32-Z:ie.i(ue+ee);return new d(oe,ie.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Md5=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=g,d.fromString=b,Integer=d}).apply(typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof self<"u"?self:typeof window<"u"?window:{});var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XhrIo,WebChannel,EventType,ErrorCode,Stat,Event,getStatEventTarget,createWebChannelTransport;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,y,v){return c==Array.prototype||c==Object.prototype||(c[y]=v.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof commonjsGlobal=="object"&&commonjsGlobal];for(var y=0;y<c.length;++y){var v=c[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function o(c,y){if(y)e:{var v=s;c=c.split(".");for(var z=0;z<c.length-1;z++){var ce=c[z];if(!(ce in v))break e;v=v[ce]}c=c[c.length-1],z=v[c],y=y(z),y!=z&&y!=null&&e(v,c,{configurable:!0,writable:!0,value:y})}}function u(c,y){c instanceof String&&(c+="");var v=0,z=!1,ce={next:function(){if(!z&&v<c.length){var be=v++;return{value:y(be,c[be]),done:!1}}return z=!0,{done:!0,value:void 0}}};return ce[Symbol.iterator]=function(){return ce},ce}o("Array.prototype.values",function(c){return c||function(){return u(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function p(c){var y=typeof c;return y=y!="object"?y:c?Array.isArray(c)?"array":y:"null",y=="array"||y=="object"&&typeof c.length=="number"}function g(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function b(c,y,v){return c.call.apply(c.bind,arguments)}function W(c,y,v){if(!c)throw Error();if(2<arguments.length){var z=Array.prototype.slice.call(arguments,2);return function(){var ce=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ce,z),c.apply(y,ce)}}return function(){return c.apply(y,arguments)}}function X(c,y,v){return X=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?b:W,X.apply(null,arguments)}function he(c,y){var v=Array.prototype.slice.call(arguments,1);return function(){var z=v.slice();return z.push.apply(z,arguments),c.apply(this,z)}}function _e(c,y){function v(){}v.prototype=y.prototype,c.aa=y.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(z,ce,be){for(var Ne=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)Ne[Ke-2]=arguments[Ke];return y.prototype[ce].apply(z,Ne)}}function we(c){const y=c.length;if(0<y){const v=Array(y);for(let z=0;z<y;z++)v[z]=c[z];return v}return[]}function ve(c,y){for(let v=1;v<arguments.length;v++){const z=arguments[v];if(p(z)){const ce=c.length||0,be=z.length||0;c.length=ce+be;for(let Ne=0;Ne<be;Ne++)c[ce+Ne]=z[Ne]}else c.push(z)}}class pe{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function Ae(c){return/^[\s\xa0]*$/.test(c)}function Re(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function Pe(c){return Pe[" "](c),c}Pe[" "]=function(){};var Oe=Re().indexOf("Gecko")!=-1&&!(Re().toLowerCase().indexOf("webkit")!=-1&&Re().indexOf("Edge")==-1)&&!(Re().indexOf("Trident")!=-1||Re().indexOf("MSIE")!=-1)&&Re().indexOf("Edge")==-1;function Ve(c,y,v){for(const z in c)y.call(v,c[z],z,c)}function ie(c,y){for(const v in c)y.call(void 0,c[v],v,c)}function Z(c){const y={};for(const v in c)y[v]=c[v];return y}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ae(c,y){let v,z;for(let ce=1;ce<arguments.length;ce++){z=arguments[ce];for(v in z)c[v]=z[v];for(let be=0;be<ee.length;be++)v=ee[be],Object.prototype.hasOwnProperty.call(z,v)&&(c[v]=z[v])}}function oe(c){var y=1;c=c.split(":");const v=[];for(;0<y&&c.length;)v.push(c.shift()),y--;return c.length&&v.push(c.join(":")),v}function ue(c){m.setTimeout(()=>{throw c},0)}function ne(){var c=We;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class mn{constructor(){this.h=this.g=null}add(y,v){const z=Mt.get();z.set(y,v),this.h?this.h.next=z:this.g=z,this.h=z}}var Mt=new pe(()=>new ge,c=>c.reset());class ge{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Ce,ke=!1,We=new mn,re=()=>{const c=m.Promise.resolve(void 0);Ce=()=>{c.then(Se)}};var Se=()=>{for(var c;c=ne();){try{c.h.call(c.g)}catch(v){ue(v)}var y=Mt;y.j(c),100>y.h&&(y.h++,c.next=y.g,y.g=c)}ke=!1};function De(){this.s=this.s,this.C=this.C}De.prototype.s=!1,De.prototype.ma=function(){this.s||(this.s=!0,this.N())},De.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ie(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}Ie.prototype.h=function(){this.defaultPrevented=!0};var Le=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};m.addEventListener("test",v,y),m.removeEventListener("test",v,y)}catch{}return c})();function Fe(c,y){if(Ie.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,z=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget){if(Oe){e:{try{Pe(y.nodeName);var ce=!0;break e}catch{}ce=!1}ce||(y=null)}}else v=="mouseover"?y=c.fromElement:v=="mouseout"&&(y=c.toElement);this.relatedTarget=y,z?(this.clientX=z.clientX!==void 0?z.clientX:z.pageX,this.clientY=z.clientY!==void 0?z.clientY:z.pageY,this.screenX=z.screenX||0,this.screenY=z.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:qe[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Fe.aa.h.call(this)}}_e(Fe,Ie);var qe={2:"touch",3:"pen",4:"mouse"};Fe.prototype.h=function(){Fe.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var En="closure_listenable_"+(1e6*Math.random()|0),wt=0;function gr(c,y,v,z,ce){this.listener=c,this.proxy=null,this.src=y,this.type=v,this.capture=!!z,this.ha=ce,this.key=++wt,this.da=this.fa=!1}function si(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Pr(c){this.src=c,this.g={},this.h=0}Pr.prototype.add=function(c,y,v,z,ce){var be=c.toString();c=this.g[be],c||(c=this.g[be]=[],this.h++);var Ne=ki(c,y,z,ce);return-1<Ne?(y=c[Ne],v||(y.fa=!1)):(y=new gr(y,this.src,be,!!z,ce),y.fa=v,c.push(y)),y};function Mi(c,y){var v=y.type;if(v in c.g){var z=c.g[v],ce=Array.prototype.indexOf.call(z,y,void 0),be;(be=0<=ce)&&Array.prototype.splice.call(z,ce,1),be&&(si(y),c.g[v].length==0&&(delete c.g[v],c.h--))}}function ki(c,y,v,z){for(var ce=0;ce<c.length;++ce){var be=c[ce];if(!be.da&&be.listener==y&&be.capture==!!v&&be.ha==z)return ce}return-1}var ji="closure_lm_"+(1e6*Math.random()|0),ua={};function vo(c,y,v,z,ce){if(Array.isArray(y)){for(var be=0;be<y.length;be++)vo(c,y[be],v,z,ce);return null}return v=_o(v),c&&c[En]?c.K(y,v,g(z)?!!z.capture:!1,ce):Wn(c,y,v,!1,z,ce)}function Wn(c,y,v,z,ce,be){if(!y)throw Error("Invalid event type");var Ne=g(ce)?!!ce.capture:!!ce,Ke=vs(c);if(Ke||(c[ji]=Ke=new Pr(c)),v=Ke.add(y,v,z,Ne,be),v.proxy)return v;if(z=ql(),v.proxy=z,z.src=c,z.listener=v,c.addEventListener)Le||(ce=Ne),ce===void 0&&(ce=!1),c.addEventListener(y.toString(),z,ce);else if(c.attachEvent)c.attachEvent(Vi(y.toString()),z);else if(c.addListener&&c.removeListener)c.addListener(z);else throw Error("addEventListener and attachEvent are unavailable.");return v}function ql(){function c(v){return y.call(c.src,c.listener,v)}const y=Hl;return c}function ca(c,y,v,z,ce){if(Array.isArray(y))for(var be=0;be<y.length;be++)ca(c,y[be],v,z,ce);else z=g(z)?!!z.capture:!!z,v=_o(v),c&&c[En]?(c=c.i,y=String(y).toString(),y in c.g&&(be=c.g[y],v=ki(be,v,z,ce),-1<v&&(si(be[v]),Array.prototype.splice.call(be,v,1),be.length==0&&(delete c.g[y],c.h--)))):c&&(c=vs(c))&&(y=c.g[y.toString()],c=-1,y&&(c=ki(y,v,z,ce)),(v=-1<c?y[c]:null)&&ys(v))}function ys(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[En])Mi(y.i,c);else{var v=c.type,z=c.proxy;y.removeEventListener?y.removeEventListener(v,z,c.capture):y.detachEvent?y.detachEvent(Vi(v),z):y.addListener&&y.removeListener&&y.removeListener(z),(v=vs(y))?(Mi(v,c),v.h==0&&(v.src=null,y[ji]=null)):si(c)}}}function Vi(c){return c in ua?ua[c]:ua[c]="on"+c}function Hl(c,y){if(c.da)c=!0;else{y=new Fe(y,this);var v=c.listener,z=c.ha||c.src;c.fa&&ys(c),c=v.call(z,y)}return c}function vs(c){return c=c[ji],c instanceof Pr?c:null}var ha="__closure_events_fn_"+(1e9*Math.random()>>>0);function _o(c){return typeof c=="function"?c:(c[ha]||(c[ha]=function(y){return c.handleEvent(y)}),c[ha])}function zt(){De.call(this),this.i=new Pr(this),this.M=this,this.F=null}_e(zt,De),zt.prototype[En]=!0,zt.prototype.removeEventListener=function(c,y,v,z){ca(this,c,y,v,z)};function tt(c,y){var v,z=c.F;if(z)for(v=[];z;z=z.F)v.push(z);if(c=c.M,z=y.type||y,typeof y=="string")y=new Ie(y,c);else if(y instanceof Ie)y.target=y.target||c;else{var ce=y;y=new Ie(z,c),ae(y,ce)}if(ce=!0,v)for(var be=v.length-1;0<=be;be--){var Ne=y.g=v[be];ce=qn(Ne,z,!0,y)&&ce}if(Ne=y.g=c,ce=qn(Ne,z,!0,y)&&ce,ce=qn(Ne,z,!1,y)&&ce,v)for(be=0;be<v.length;be++)Ne=y.g=v[be],ce=qn(Ne,z,!1,y)&&ce}zt.prototype.N=function(){if(zt.aa.N.call(this),this.i){var c=this.i,y;for(y in c.g){for(var v=c.g[y],z=0;z<v.length;z++)si(v[z]);delete c.g[y],c.h--}}this.F=null},zt.prototype.K=function(c,y,v,z){return this.i.add(String(c),y,!1,v,z)},zt.prototype.L=function(c,y,v,z){return this.i.add(String(c),y,!0,v,z)};function qn(c,y,v,z){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();for(var ce=!0,be=0;be<y.length;++be){var Ne=y[be];if(Ne&&!Ne.da&&Ne.capture==v){var Ke=Ne.listener,gn=Ne.ha||Ne.src;Ne.fa&&Mi(c.i,Ne),ce=Ke.call(gn,z)!==!1&&ce}}return ce&&!z.defaultPrevented}function On(c,y,v){if(typeof c=="function")v&&(c=X(c,v));else if(c&&typeof c.handleEvent=="function")c=X(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:m.setTimeout(c,y||0)}function bo(c){c.g=On(()=>{c.g=null,c.i&&(c.i=!1,bo(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class Fl extends De{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:bo(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Li(c){De.call(this),this.h=c,this.g={}}_e(Li,De);var Ui=[];function Bi(c){Ve(c.g,function(y,v){this.g.hasOwnProperty(v)&&ys(y)},c),c.g={}}Li.prototype.N=function(){Li.aa.N.call(this),Bi(this)},Li.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var cr=m.JSON.stringify,_s=m.JSON.parse,zi=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function da(){}da.prototype.h=null;function fa(c){return c.h||(c.h=c.i())}function ma(){}var Mr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function kr(){Ie.call(this,"d")}_e(kr,Ie);function pa(){Ie.call(this,"c")}_e(pa,Ie);var yr={},ga=null;function ai(){return ga=ga||new zt}yr.La="serverreachability";function bs(c){Ie.call(this,yr.La,c)}_e(bs,Ie);function oi(c){const y=ai();tt(y,new bs(y))}yr.STAT_EVENT="statevent";function Eo(c,y){Ie.call(this,yr.STAT_EVENT,c),this.stat=y}_e(Eo,Ie);function kt(c){const y=ai();tt(y,new Eo(y,c))}yr.Ma="timingevent";function pn(c,y){Ie.call(this,yr.Ma,c),this.size=y}_e(pn,Ie);function Wt(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},y)}function Zn(){this.g=!0}Zn.prototype.xa=function(){this.g=!1};function ya(c,y,v,z,ce,be){c.info(function(){if(c.g)if(be)for(var Ne="",Ke=be.split("&"),gn=0;gn<Ke.length;gn++){var Qe=Ke[gn].split("=");if(1<Qe.length){var Tn=Qe[0];Qe=Qe[1];var yn=Tn.split("_");Ne=2<=yn.length&&yn[1]=="type"?Ne+(Tn+"="+Qe+"&"):Ne+(Tn+"=redacted&")}}else Ne=null;else Ne=be;return"XMLHTTP REQ ("+z+") [attempt "+ce+"]: "+y+`
`+v+`
`+Ne})}function Gl(c,y,v,z,ce,be,Ne){c.info(function(){return"XMLHTTP RESP ("+z+") [ attempt "+ce+"]: "+y+`
`+v+`
`+be+" "+Ne})}function li(c,y,v,z){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+qi(c,v)+(z?" "+z:"")})}function wo(c,y){c.info(function(){return"TIMEOUT: "+y})}Zn.prototype.info=function(){};function qi(c,y){if(!c.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var z=v[c];if(!(2>z.length)){var ce=z[1];if(Array.isArray(ce)&&!(1>ce.length)){var be=ce[0];if(be!="noop"&&be!="stop"&&be!="close")for(var Ne=1;Ne<ce.length;Ne++)ce[Ne]=""}}}}return cr(v)}catch{return y}}var ui={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},jr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vr;function _r(){}_e(_r,da),_r.prototype.g=function(){return new XMLHttpRequest},_r.prototype.i=function(){return{}},vr=new _r;function kn(c,y,v,z){this.j=c,this.i=y,this.l=v,this.R=z||1,this.U=new Li(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Gt}function Gt(){this.i=null,this.g="",this.h=!1}var va={},Es={};function hr(c,y,v){c.L=1,c.v=Yi(Hn(y)),c.m=v,c.P=!0,Vr(c,null)}function Vr(c,y){c.F=Date.now(),Hi(c),c.A=Hn(c.v);var v=c.A,z=c.R;Array.isArray(z)||(z=[String(z)]),xa(v.i,"t",z),c.C=0,v=c.j.J,c.h=new Gt,c.g=Lo(c.j,v?y:null,!c.m),0<c.O&&(c.M=new Fl(X(c.Y,c,c.g),c.O)),y=c.U,v=c.g,z=c.ca;var ce="readystatechange";Array.isArray(ce)||(ce&&(Ui[0]=ce.toString()),ce=Ui);for(var be=0;be<ce.length;be++){var Ne=vo(v,ce[be],z||y.handleEvent,!1,y.h||y);if(!Ne)break;y.g[Ne.key]=Ne}y=c.H?Z(c.H):{},c.m?(c.u||(c.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,y)):(c.u="GET",c.g.ea(c.A,c.u,null,y)),oi(),ya(c.i,c.u,c.A,c.l,c.R,c.m)}kn.prototype.ca=function(c){c=c.target;const y=this.M;y&&nr(c)==3?y.j():this.Y(c)},kn.prototype.Y=function(c){try{if(c==this.g)e:{const yn=nr(this.g);var y=this.g.Ba();const Gr=this.g.Z();if(!(3>yn)&&(yn!=3||this.g&&(this.h.h||this.g.oa()||No(this.g)))){this.J||yn!=4||y==7||(y==8||0>=Gr?oi(3):oi(2)),ci(this);var v=this.g.Z();this.X=v;t:if(To(this)){var z=No(this.g);c="";var ce=z.length,be=nr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Rn(this),br(this);var Ne="";break t}this.h.i=new m.TextDecoder}for(y=0;y<ce;y++)this.h.h=!0,c+=this.h.i.decode(z[y],{stream:!(be&&y==ce-1)});z.length=0,this.h.g+=c,this.C=0,Ne=this.h.g}else Ne=this.g.oa();if(this.o=v==200,Gl(this.i,this.u,this.A,this.l,this.R,yn,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Ke,gn=this.g;if((Ke=gn.g?gn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ae(Ke)){var Qe=Ke;break t}}Qe=null}if(v=Qe)li(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fi(this,v);else{this.o=!1,this.s=3,kt(12),Rn(this),br(this);break e}}if(this.P){v=!0;let Cn;for(;!this.J&&this.C<Ne.length;)if(Cn=xo(this,Ne),Cn==Es){yn==4&&(this.s=4,kt(14),v=!1),li(this.i,this.l,null,"[Incomplete Response]");break}else if(Cn==va){this.s=4,kt(15),li(this.i,this.l,Ne,"[Invalid Chunk]"),v=!1;break}else li(this.i,this.l,Cn,null),Fi(this,Cn);if(To(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yn!=4||Ne.length!=0||this.h.h||(this.s=1,kt(16),v=!1),this.o=this.o&&v,!v)li(this.i,this.l,Ne,"[Invalid Chunked Response]"),Rn(this),br(this);else if(0<Ne.length&&!this.W){this.W=!0;var Tn=this.j;Tn.g==this&&Tn.ba&&!Tn.M&&(Tn.j.info("Great, no buffering proxy detected. Bytes received: "+Ne.length),ts(Tn),Tn.M=!0,kt(11))}}else li(this.i,this.l,Ne,null),Fi(this,Ne);yn==4&&Rn(this),this.o&&!this.J&&(yn==4?ko(this.j,this):(this.o=!1,Hi(this)))}else Xl(this.g),v==400&&0<Ne.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),Rn(this),br(this)}}}catch{}finally{}};function To(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function xo(c,y){var v=c.C,z=y.indexOf(`
`,v);return z==-1?Es:(v=Number(y.substring(v,z)),isNaN(v)?va:(z+=1,z+v>y.length?Es:(y=y.slice(z,z+v),c.C=z+v,y)))}kn.prototype.cancel=function(){this.J=!0,Rn(this)};function Hi(c){c.S=Date.now()+c.I,So(c,c.I)}function So(c,y){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Wt(X(c.ba,c),y)}function ci(c){c.B&&(m.clearTimeout(c.B),c.B=null)}kn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(wo(this.i,this.A),this.L!=2&&(oi(),kt(17)),Rn(this),this.s=2,br(this)):So(this,this.S-c)};function br(c){c.j.G==0||c.J||ko(c.j,c)}function Rn(c){ci(c);var y=c.M;y&&typeof y.ma=="function"&&y.ma(),c.M=null,Bi(c.U),c.g&&(y=c.g,c.g=null,y.abort(),y.ma())}function Fi(c,y){try{var v=c.j;if(v.G!=0&&(v.g==c||_a(v.h,c))){if(!c.K&&_a(v.h,c)&&v.G==3){try{var z=v.Da.g.parse(y)}catch{z=null}if(Array.isArray(z)&&z.length==3){var ce=z;if(ce[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)Ps(v),Ds(v);else break e;Ia(v),kt(18)}}else v.za=ce[1],0<v.za-v.T&&37500>ce[2]&&v.F&&v.v==0&&!v.C&&(v.C=Wt(X(v.Za,v),6e3));if(1>=Ts(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Fr(v,11)}else if((c.K||v.g==c)&&Ps(v),!Ae(y))for(ce=v.Da.g.parse(y),y=0;y<ce.length;y++){let Qe=ce[y];if(v.T=Qe[0],Qe=Qe[1],v.G==2)if(Qe[0]=="c"){v.K=Qe[1],v.ia=Qe[2];const Tn=Qe[3];Tn!=null&&(v.la=Tn,v.j.info("VER="+v.la));const yn=Qe[4];yn!=null&&(v.Aa=yn,v.j.info("SVER="+v.Aa));const Gr=Qe[5];Gr!=null&&typeof Gr=="number"&&0<Gr&&(z=1.5*Gr,v.L=z,v.j.info("backChannelRequestTimeoutMs_="+z)),z=v;const Cn=c.g;if(Cn){const Rr=Cn.g?Cn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rr){var be=z.h;be.g||Rr.indexOf("spdy")==-1&&Rr.indexOf("quic")==-1&&Rr.indexOf("h2")==-1||(be.j=be.l,be.g=new Set,be.h&&(xs(be,be.h),be.h=null))}if(z.D){const Da=Cn.g?Cn.g.getResponseHeader("X-HTTP-Session-Id"):null;Da&&(z.ya=Da,it(z.I,z.D,Da))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),z=v;var Ne=c;if(z.qa=Vo(z,z.J?z.ia:null,z.W),Ne.K){jn(z.h,Ne);var Ke=Ne,gn=z.L;gn&&(Ke.I=gn),Ke.B&&(ci(Ke),Hi(Ke)),z.g=Ne}else Po(z);0<v.i.length&&Os(v)}else Qe[0]!="stop"&&Qe[0]!="close"||Fr(v,7);else v.G==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?Fr(v,7):Ra(v):Qe[0]!="noop"&&v.l&&v.l.ta(Qe),v.v=0)}}oi(4)}catch{}}var Ao=class{constructor(c,y){this.g=c,this.map=y}};function Lr(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ws(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ts(c){return c.h?1:c.g?c.g.size:0}function _a(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function xs(c,y){c.g?c.g.add(y):c.h=y}function jn(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Lr.prototype.cancel=function(){if(this.i=ba(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function ba(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const v of c.g.values())y=y.concat(v.D);return y}return we(c.i)}function $l(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var y=[],v=c.length,z=0;z<v;z++)y.push(c[z]);return y}y=[],v=0;for(z in c)y[v++]=c[z];return y}function Ss(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var y=[];c=c.length;for(var v=0;v<c;v++)y.push(v);return y}y=[],v=0;for(const z in c)y[v++]=z;return y}}}function Ea(c,y){if(c.forEach&&typeof c.forEach=="function")c.forEach(y,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,y,void 0);else for(var v=Ss(c),z=$l(c),ce=z.length,be=0;be<ce;be++)y.call(void 0,z[be],v&&v[be],c)}var Gi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yl(c,y){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var z=c[v].indexOf("="),ce=null;if(0<=z){var be=c[v].substring(0,z);ce=c[v].substring(z+1)}else be=c[v];y(be,ce?decodeURIComponent(ce.replace(/\+/g," ")):"")}}}function ln(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ln){this.h=c.h,$i(this,c.j),this.o=c.o,this.g=c.g,hi(this,c.s),this.l=c.l;var y=c.i,v=new Br;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),Ur(this,v),this.m=c.m}else c&&(y=String(c).match(Gi))?(this.h=!1,$i(this,y[1]||"",!0),this.o=Jn(y[2]||""),this.g=Jn(y[3]||"",!0),hi(this,y[4]),this.l=Jn(y[5]||"",!0),Ur(this,y[6]||"",!0),this.m=Jn(y[7]||"")):(this.h=!1,this.i=new Br(null,this.h))}ln.prototype.toString=function(){var c=[],y=this.j;y&&c.push(Ki(y,wa,!0),":");var v=this.g;return(v||y=="file")&&(c.push("//"),(y=this.o)&&c.push(Ki(y,wa,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(Ki(v,v.charAt(0)=="/"?Kl:Ta,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",Ki(v,As)),c.join("")};function Hn(c){return new ln(c)}function $i(c,y,v){c.j=v?Jn(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function hi(c,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);c.s=y}else c.s=null}function Ur(c,y,v){y instanceof Br?(c.i=y,Co(c.i,c.h)):(v||(y=Ki(y,Ql)),c.i=new Br(y,c.h))}function it(c,y,v){c.i.set(y,v)}function Yi(c){return it(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Jn(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ki(c,y,v){return typeof c=="string"?(c=encodeURI(c).replace(y,Ro),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Ro(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var wa=/[#\/\?@]/g,Ta=/[#\?:]/g,Kl=/[#\?]/g,Ql=/[#\?@]/g,As=/#/g;function Br(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function er(c){c.g||(c.g=new Map,c.h=0,c.i&&Yl(c.i,function(y,v){c.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}r=Br.prototype,r.add=function(c,y){er(this),this.i=null,c=Er(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(y),this.h+=1,this};function zr(c,y){er(c),y=Er(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function qr(c,y){return er(c),y=Er(c,y),c.g.has(y)}r.forEach=function(c,y){er(this),this.g.forEach(function(v,z){v.forEach(function(ce){c.call(y,ce,z,this)},this)},this)},r.na=function(){er(this);const c=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let z=0;z<y.length;z++){const ce=c[z];for(let be=0;be<ce.length;be++)v.push(y[z])}return v},r.V=function(c){er(this);let y=[];if(typeof c=="string")qr(this,c)&&(y=y.concat(this.g.get(Er(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)y=y.concat(c[v])}return y},r.set=function(c,y){return er(this),this.i=null,c=Er(this,c),qr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},r.get=function(c,y){return c?(c=this.V(c),0<c.length?String(c[0]):y):y};function xa(c,y,v){zr(c,y),0<v.length&&(c.i=null,c.g.set(Er(c,y),we(v)),c.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var z=y[v];const be=encodeURIComponent(String(z)),Ne=this.V(z);for(z=0;z<Ne.length;z++){var ce=be;Ne[z]!==""&&(ce+="="+encodeURIComponent(String(Ne[z]))),c.push(ce)}}return this.i=c.join("&")};function Er(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function Co(c,y){y&&!c.j&&(er(c),c.i=null,c.g.forEach(function(v,z){var ce=z.toLowerCase();z!=ce&&(zr(this,z),xa(this,ce,v))},c)),c.j=y}function Qi(c,y){const v=new Zn;if(m.Image){const z=new Image;z.onload=he(tr,v,"TestLoadImage: loaded",!0,y,z),z.onerror=he(tr,v,"TestLoadImage: error",!1,y,z),z.onabort=he(tr,v,"TestLoadImage: abort",!1,y,z),z.ontimeout=he(tr,v,"TestLoadImage: timeout",!1,y,z),m.setTimeout(function(){z.ontimeout&&z.ontimeout()},1e4),z.src=c}else y(!1)}function dr(c,y){const v=new Zn,z=new AbortController,ce=setTimeout(()=>{z.abort(),tr(v,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:z.signal}).then(be=>{clearTimeout(ce),be.ok?tr(v,"TestPingServer: ok",!0,y):tr(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(ce),tr(v,"TestPingServer: error",!1,y)})}function tr(c,y,v,z,ce){try{ce&&(ce.onload=null,ce.onerror=null,ce.onabort=null,ce.ontimeout=null),z(v)}catch{}}function Xi(){this.g=new zi}function wr(c,y,v){const z=v||"";try{Ea(c,function(ce,be){let Ne=ce;g(ce)&&(Ne=cr(ce)),y.push(z+be+"="+encodeURIComponent(Ne))})}catch(ce){throw y.push(z+"type="+encodeURIComponent("_badmap")),ce}}function di(c){this.l=c.Ub||null,this.j=c.eb||!1}_e(di,da),di.prototype.g=function(){return new Hr(this.l,this.j)},di.prototype.i=(function(c){return function(){return c}})({});function Hr(c,y){zt.call(this),this.D=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_e(Hr,zt),r=Hr.prototype,r.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=y,this.readyState=1,xr(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(y.body=c),(this.D||m).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Tr(this)),this.readyState=0},r.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,xr(this)),this.g&&(this.readyState=3,xr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Sa(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Sa(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}r.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?Tr(this):xr(this),this.readyState==3&&Sa(this)}},r.Ra=function(c){this.g&&(this.response=this.responseText=c,Tr(this))},r.Qa=function(c){this.g&&(this.response=c,Tr(this))},r.ga=function(){this.g&&Tr(this)};function Tr(c){c.readyState=4,c.l=null,c.j=null,c.v=null,xr(c)}r.setRequestHeader=function(c,y){this.u.append(c,y)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=y.next();return c.join(`\r
`)};function xr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Hr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Aa(c){let y="";return Ve(c,function(v,z){y+=z,y+=":",y+=v,y+=`\r
`}),y}function wn(c,y,v){e:{for(z in v){var z=!1;break e}z=!0}z||(v=Aa(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):it(c,y,v))}function et(c){zt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_e(et,zt);var Rs=/^https?$/i,Wi=["POST","PUT"];r=et.prototype,r.Ha=function(c){this.J=c},r.ea=function(c,y,v,z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vr.g(),this.v=this.o?fa(this.o):fa(vr),this.g.onreadystatechange=X(this.Ea,this);try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(be){Io(this,be);return}if(c=v||"",v=new Map(this.headers),z)if(Object.getPrototypeOf(z)===Object.prototype)for(var ce in z)v.set(ce,z[ce]);else if(typeof z.keys=="function"&&typeof z.get=="function")for(const be of z.keys())v.set(be,z.get(be));else throw Error("Unknown input type for opt_headers: "+String(z));z=Array.from(v.keys()).find(be=>be.toLowerCase()=="content-type"),ce=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Wi,y,void 0))||z||ce||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[be,Ne]of v)this.g.setRequestHeader(be,Ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zi(this),this.u=!0,this.g.send(c),this.u=!1}catch(be){Io(this,be)}};function Io(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.m=5,Cs(c),Sr(c)}function Cs(c){c.A||(c.A=!0,tt(c,"complete"),tt(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,tt(this,"complete"),tt(this,"abort"),Sr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sr(this,!0)),et.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Is(this):this.bb())},r.bb=function(){Is(this)};function Is(c){if(c.h&&typeof d<"u"&&(!c.v[1]||nr(c)!=4||c.Z()!=2)){if(c.u&&nr(c)==4)On(c.Ea,0,c);else if(tt(c,"readystatechange"),nr(c)==4){c.h=!1;try{const Ne=c.Z();e:switch(Ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var z;if(z=Ne===0){var ce=String(c.D).match(Gi)[1]||null;!ce&&m.self&&m.self.location&&(ce=m.self.location.protocol.slice(0,-1)),z=!Rs.test(ce?ce.toLowerCase():"")}v=z}if(v)tt(c,"complete"),tt(c,"success");else{c.m=6;try{var be=2<nr(c)?c.g.statusText:""}catch{be=""}c.l=be+" ["+c.Z()+"]",Cs(c)}}finally{Sr(c)}}}}function Sr(c,y){if(c.g){Zi(c);const v=c.g,z=c.v[0]?()=>{}:null;c.g=null,c.v=null,y||tt(c,"ready");try{v.onreadystatechange=z}catch{}}}function Zi(c){c.I&&(m.clearTimeout(c.I),c.I=null)}r.isActive=function(){return!!this.g};function nr(c){return c.g?c.g.readyState:0}r.Z=function(){try{return 2<nr(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),_s(y)}};function No(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Xl(c){const y={};c=(c.g&&2<=nr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let z=0;z<c.length;z++){if(Ae(c[z]))continue;var v=oe(c[z]);const ce=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const be=y[ce]||[];y[ce]=be,be.push(v)}ie(y,function(z){return z.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ji(c,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||y}function Ns(c){this.Aa=0,this.i=[],this.j=new Zn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ji("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ji("baseRetryDelayMs",5e3,c),this.cb=Ji("retryDelaySeedMs",1e4,c),this.Wa=Ji("forwardChannelMaxRetries",2,c),this.wa=Ji("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Lr(c&&c.concurrentRequestLimit),this.Da=new Xi,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Ns.prototype,r.la=8,r.G=1,r.connect=function(c,y,v,z){kt(0),this.W=c,this.H=y||{},v&&z!==void 0&&(this.H.OSID=v,this.H.OAID=z),this.F=this.X,this.I=Vo(this,null,this.W),Os(this)};function Ra(c){if(Do(c),c.G==3){var y=c.U++,v=Hn(c.I);if(it(v,"SID",c.K),it(v,"RID",y),it(v,"TYPE","terminate"),es(c,v),y=new kn(c,c.j,y),y.L=2,y.v=Yi(Hn(v)),v=!1,m.navigator&&m.navigator.sendBeacon)try{v=m.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&m.Image&&(new Image().src=y.v,v=!0),v||(y.g=Lo(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Hi(y)}jo(c)}function Ds(c){c.g&&(ts(c),c.g.cancel(),c.g=null)}function Do(c){Ds(c),c.u&&(m.clearTimeout(c.u),c.u=null),Ps(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function Os(c){if(!ws(c.h)&&!c.s){c.s=!0;var y=c.Ga;Ce||re(),ke||(Ce(),ke=!0),We.add(y,c),c.B=0}}function Wl(c,y){return Ts(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=y.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Wt(X(c.Ga,c,y),Na(c,c.B)),c.B++,!0)}r.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const ce=new kn(this,this.j,c);let be=this.o;if(this.S&&(be?(be=Z(be),ae(be,this.S)):be=this.S),this.m!==null||this.O||(ce.H=be,be=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var z=this.i[v];if("__data__"in z.map&&(z=z.map.__data__,typeof z=="string")){z=z.length;break t}z=void 0}if(z===void 0)break;if(y+=z,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Oo(this,ce,y),v=Hn(this.I),it(v,"RID",c),it(v,"CVER",22),this.D&&it(v,"X-HTTP-Session-Id",this.D),es(this,v),be&&(this.O?y="headers="+encodeURIComponent(String(Aa(be)))+"&"+y:this.m&&wn(v,this.m,be)),xs(this.h,ce),this.Ua&&it(v,"TYPE","init"),this.P?(it(v,"$req",y),it(v,"SID","null"),ce.T=!0,hr(ce,v,null)):hr(ce,v,y),this.G=2}}else this.G==3&&(c?Ca(this,c):this.i.length==0||ws(this.h)||Ca(this))};function Ca(c,y){var v;y?v=y.l:v=c.U++;const z=Hn(c.I);it(z,"SID",c.K),it(z,"RID",v),it(z,"AID",c.T),es(c,z),c.m&&c.o&&wn(z,c.m,c.o),v=new kn(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),y&&(c.i=y.D.concat(c.i)),y=Oo(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),xs(c.h,v),hr(v,z,y)}function es(c,y){c.H&&Ve(c.H,function(v,z){it(y,z,v)}),c.l&&Ea({},function(v,z){it(y,z,v)})}function Oo(c,y,v){v=Math.min(c.i.length,v);var z=c.l?X(c.l.Na,c.l,c):null;e:{var ce=c.i;let be=-1;for(;;){const Ne=["count="+v];be==-1?0<v?(be=ce[0].g,Ne.push("ofs="+be)):be=0:Ne.push("ofs="+be);let Ke=!0;for(let gn=0;gn<v;gn++){let Qe=ce[gn].g;const Tn=ce[gn].map;if(Qe-=be,0>Qe)be=Math.max(0,ce[gn].g-100),Ke=!1;else try{wr(Tn,Ne,"req"+Qe+"_")}catch{z&&z(Tn)}}if(Ke){z=Ne.join("&");break e}}}return c=c.i.splice(0,v),y.D=c,z}function Po(c){if(!c.g&&!c.u){c.Y=1;var y=c.Fa;Ce||re(),ke||(Ce(),ke=!0),We.add(y,c),c.v=0}}function Ia(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Wt(X(c.Fa,c),Na(c,c.v)),c.v++,!0)}r.Fa=function(){if(this.u=null,Mo(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Wt(X(this.ab,this),c)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kt(10),Ds(this),Mo(this))};function ts(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function Mo(c){c.g=new kn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var y=Hn(c.qa);it(y,"RID","rpc"),it(y,"SID",c.K),it(y,"AID",c.T),it(y,"CI",c.F?"0":"1"),!c.F&&c.ja&&it(y,"TO",c.ja),it(y,"TYPE","xmlhttp"),es(c,y),c.m&&c.o&&wn(y,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=Yi(Hn(y)),v.m=null,v.P=!0,Vr(v,c)}r.Za=function(){this.C!=null&&(this.C=null,Ds(this),Ia(this),kt(19))};function Ps(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function ko(c,y){var v=null;if(c.g==y){Ps(c),ts(c),c.g=null;var z=2}else if(_a(c.h,y))v=y.D,jn(c.h,y),z=1;else return;if(c.G!=0){if(y.o)if(z==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var ce=c.B;z=ai(),tt(z,new pn(z,v)),Os(c)}else Po(c);else if(ce=y.s,ce==3||ce==0&&0<y.X||!(z==1&&Wl(c,y)||z==2&&Ia(c)))switch(v&&0<v.length&&(y=c.h,y.i=y.i.concat(v)),ce){case 1:Fr(c,5);break;case 4:Fr(c,10);break;case 3:Fr(c,6);break;default:Fr(c,2)}}}function Na(c,y){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*y}function Fr(c,y){if(c.j.info("Error code "+y),y==2){var v=X(c.fb,c),z=c.Xa;const ce=!z;z=new ln(z||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||$i(z,"https"),Yi(z),ce?Qi(z.toString(),v):dr(z.toString(),v)}else kt(2);c.G=0,c.l&&c.l.sa(y),jo(c),Do(c)}r.fb=function(c){c?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function jo(c){if(c.G=0,c.ka=[],c.l){const y=ba(c.h);(y.length!=0||c.i.length!=0)&&(ve(c.ka,y),ve(c.ka,c.i),c.h.i.length=0,we(c.i),c.i.length=0),c.l.ra()}}function Vo(c,y,v){var z=v instanceof ln?Hn(v):new ln(v);if(z.g!="")y&&(z.g=y+"."+z.g),hi(z,z.s);else{var ce=m.location;z=ce.protocol,y=y?y+"."+ce.hostname:ce.hostname,ce=+ce.port;var be=new ln(null);z&&$i(be,z),y&&(be.g=y),ce&&hi(be,ce),v&&(be.l=v),z=be}return v=c.D,y=c.ya,v&&y&&it(z,v,y),it(z,"VER",c.la),es(c,z),z}function Lo(c,y,v){if(y&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Ca&&!c.pa?new et(new di({eb:v})):new et(c.pa),y.Ha(c.J),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Uo(){}r=Uo.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Ms(){}Ms.prototype.g=function(c,y){return new Vn(c,y)};function Vn(c,y){zt.call(this),this.g=new Ns(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(c?c["X-WebChannel-Client-Profile"]=y.va:c={"X-WebChannel-Client-Profile":y.va}),this.g.S=c,(c=y&&y.Sb)&&!Ae(c)&&(this.g.m=c),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!Ae(y)&&(this.g.D=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new Ar(this)}_e(Vn,zt),Vn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vn.prototype.close=function(){Ra(this.g)},Vn.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=cr(c),c=v);y.i.push(new Ao(y.Ya++,c)),y.G==3&&Os(y)},Vn.prototype.N=function(){this.g.l=null,delete this.j,Ra(this.g),delete this.g,Vn.aa.N.call(this)};function Bo(c){kr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const v in y){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}_e(Bo,kr);function zo(){pa.call(this),this.status=1}_e(zo,pa);function Ar(c){this.g=c}_e(Ar,Uo),Ar.prototype.ua=function(){tt(this.g,"a")},Ar.prototype.ta=function(c){tt(this.g,new Bo(c))},Ar.prototype.sa=function(c){tt(this.g,new zo)},Ar.prototype.ra=function(){tt(this.g,"b")},Ms.prototype.createWebChannel=Ms.prototype.g,Vn.prototype.send=Vn.prototype.o,Vn.prototype.open=Vn.prototype.m,Vn.prototype.close=Vn.prototype.close,createWebChannelTransport=function(){return new Ms},getStatEventTarget=function(){return ai()},Event=yr,Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ui.NO_ERROR=0,ui.TIMEOUT=8,ui.HTTP_ERROR=6,ErrorCode=ui,jr.COMPLETE="complete",EventType=jr,ma.EventType=Mr,Mr.OPEN="a",Mr.CLOSE="b",Mr.ERROR="c",Mr.MESSAGE="d",zt.prototype.listen=zt.prototype.K,WebChannel=ma,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,XhrIo=et}).apply(typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{});const F$1="@firebase/firestore",M$1="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class User{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}User.UNAUTHENTICATED=new User(null),User.GOOGLE_CREDENTIALS=new User("google-credentials-uid"),User.FIRST_PARTY=new User("first-party-uid"),User.MOCK_USER=new User("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let x="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O$1=new Logger("@firebase/firestore");function __PRIVATE_getLogLevel(){return O$1.logLevel}function __PRIVATE_logDebug(r,...e){if(O$1.logLevel<=LogLevel.DEBUG){const n=e.map(__PRIVATE_argToString);O$1.debug(`Firestore (${x}): ${r}`,...n)}}function __PRIVATE_logError(r,...e){if(O$1.logLevel<=LogLevel.ERROR){const n=e.map(__PRIVATE_argToString);O$1.error(`Firestore (${x}): ${r}`,...n)}}function __PRIVATE_logWarn(r,...e){if(O$1.logLevel<=LogLevel.WARN){const n=e.map(__PRIVATE_argToString);O$1.warn(`Firestore (${x}): ${r}`,...n)}}function __PRIVATE_argToString(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fail(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,__PRIVATE__fail(r,s,n)}function __PRIVATE__fail(r,e,n){let s=`FIRESTORE (${x}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw __PRIVATE_logError(s),new Error(s)}function __PRIVATE_hardAssert(r,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||__PRIVATE__fail(e,o,s)}function __PRIVATE_debugCast(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N$1={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class FirestoreError extends FirebaseError{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Deferred{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_OAuthToken{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class __PRIVATE_EmptyAuthCredentialsProvider{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(User.UNAUTHENTICATED)))}shutdown(){}}class __PRIVATE_EmulatorAuthCredentialsProvider{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class __PRIVATE_FirebaseAuthCredentialsProvider{constructor(e){this.t=e,this.currentUser=User.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){__PRIVATE_hardAssert(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new __PRIVATE_Deferred;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new __PRIVATE_Deferred,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const p=u;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},m=p=>{__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new __PRIVATE_Deferred)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(__PRIVATE_hardAssert(typeof s.accessToken=="string",31837,{l:s}),new __PRIVATE_OAuthToken(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return __PRIVATE_hardAssert(e===null||typeof e=="string",2055,{h:e}),new User(e)}}class __PRIVATE_FirstPartyToken{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=User.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class __PRIVATE_FirstPartyAuthCredentialsProvider{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new __PRIVATE_FirstPartyToken(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(User.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class AppCheckToken{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class __PRIVATE_FirebaseAppCheckTokenProvider{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_isFirebaseServerApp(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){__PRIVATE_hardAssert(this.o===void 0,3512);const s=u=>{u.error!=null&&__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new AppCheckToken(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(__PRIVATE_hardAssert(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new AppCheckToken(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_randomBytes(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AutoId{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=__PRIVATE_randomBytes(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function __PRIVATE_primitiveComparator(r,e){return r<e?-1:r>e?1:0}function __PRIVATE_compareUtf8Strings(r,e){const n=Math.min(r.length,e.length);for(let s=0;s<n;s++){const o=r.charAt(s),u=e.charAt(s);if(o!==u)return __PRIVATE_isSurrogate(o)===__PRIVATE_isSurrogate(u)?__PRIVATE_primitiveComparator(o,u):__PRIVATE_isSurrogate(o)?1:-1}return __PRIVATE_primitiveComparator(r.length,e.length)}const B$1=55296,L$1=57343;function __PRIVATE_isSurrogate(r){const e=r.charCodeAt(0);return e>=B$1&&e<=L$1}function __PRIVATE_arrayEquals(r,e,n){return r.length===e.length&&r.every(((s,o)=>n(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k="__name__";class BasePath{constructor(e,n,s){n===void 0?n=0:n>e.length&&fail(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&fail(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return BasePath.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof BasePath?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=BasePath.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return __PRIVATE_primitiveComparator(e.length,n.length)}static compareSegments(e,n){const s=BasePath.isNumericId(e),o=BasePath.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?BasePath.extractNumericId(e).compare(BasePath.extractNumericId(n)):__PRIVATE_compareUtf8Strings(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Integer.fromString(e.substring(4,e.length-2))}}class ResourcePath extends BasePath{construct(e,n,s){return new ResourcePath(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new ResourcePath(n)}static emptyPath(){return new ResourcePath([])}}const q=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class FieldPath$1 extends BasePath{construct(e,n,s){return new FieldPath$1(e,n,s)}static isValidIdentifier(e){return q.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),FieldPath$1.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===k}static keyField(){return new FieldPath$1([k])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new FirestoreError(N$1.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(s+=m,o++):(u(),o++)}if(u(),d)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new FieldPath$1(n)}static emptyPath(){return new FieldPath$1([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentKey{constructor(e){this.path=e}static fromPath(e){return new DocumentKey(ResourcePath.fromString(e))}static fromName(e){return new DocumentKey(ResourcePath.fromString(e).popFirst(5))}static empty(){return new DocumentKey(ResourcePath.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ResourcePath.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ResourcePath.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new DocumentKey(new ResourcePath(e.slice()))}}function __PRIVATE_validateIsNotUsedTogether(r,e,n,s){if(e===!0&&s===!0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function __PRIVATE_validateCollectionPath(r){if(DocumentKey.isDocumentKey(r))throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function __PRIVATE_isPlainObject(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function __PRIVATE_valueDescription(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":fail(12329,{type:typeof r})}function __PRIVATE_cast(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=__PRIVATE_valueDescription(r);throw new FirestoreError(N$1.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}function __PRIVATE_validatePositiveNumber(r,e){if(e<=0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function property(r,e){const n={typeString:r};return e&&(n.value=e),n}function __PRIVATE_validateJSON(r,e){if(!__PRIVATE_isPlainObject(r))throw new FirestoreError(N$1.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const d=r[s];if(o&&typeof d!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&d!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new FirestoreError(N$1.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q=-62135596800,$=1e6;class Timestamp{static now(){return Timestamp.fromMillis(Date.now())}static fromDate(e){return Timestamp.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*$);return new Timestamp(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Q)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$}_compareTo(e){return this.seconds===e.seconds?__PRIVATE_primitiveComparator(this.nanoseconds,e.nanoseconds):__PRIVATE_primitiveComparator(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Timestamp._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(__PRIVATE_validateJSON(e,Timestamp._jsonSchema))return new Timestamp(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Q;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Timestamp._jsonSchemaVersion="firestore/timestamp/1.0",Timestamp._jsonSchema={type:property("string",Timestamp._jsonSchemaVersion),seconds:property("number"),nanoseconds:property("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotVersion{static fromTimestamp(e){return new SnapshotVersion(e)}static min(){return new SnapshotVersion(new Timestamp(0,0))}static max(){return new SnapshotVersion(new Timestamp(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U$1=-1;function __PRIVATE_newIndexOffsetSuccessorFromReadTime(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=SnapshotVersion.fromTimestamp(s===1e9?new Timestamp(n+1,0):new Timestamp(n,s));return new IndexOffset(o,DocumentKey.empty(),e)}function __PRIVATE_newIndexOffsetFromDocument(r){return new IndexOffset(r.readTime,r.key,U$1)}class IndexOffset{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new IndexOffset(SnapshotVersion.min(),DocumentKey.empty(),U$1)}static max(){return new IndexOffset(SnapshotVersion.max(),DocumentKey.empty(),U$1)}}function __PRIVATE_indexOffsetComparator(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=DocumentKey.comparator(r.documentKey,e.documentKey),n!==0?n:__PRIVATE_primitiveComparator(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K$1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PersistenceTransaction{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function __PRIVATE_ignoreIfPrimaryLeaseLoss(r){if(r.code!==N$1.FAILED_PRECONDITION||r.message!==K$1)throw r;__PRIVATE_logDebug("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PersistencePromise{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fail(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new PersistencePromise(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof PersistencePromise?n:PersistencePromise.resolve(n)}catch(n){return PersistencePromise.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):PersistencePromise.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):PersistencePromise.reject(n)}static resolve(e){return new PersistencePromise(((n,s)=>{n(e)}))}static reject(e){return new PersistencePromise(((n,s)=>{s(e)}))}static waitFor(e){return new PersistencePromise(((n,s)=>{let o=0,u=0,d=!1;e.forEach((m=>{++o,m.next((()=>{++u,d&&u===o&&n()}),(p=>s(p)))})),d=!0,u===o&&n()}))}static or(e){let n=PersistencePromise.resolve(!1);for(const s of e)n=n.next((o=>o?PersistencePromise.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new PersistencePromise(((s,o)=>{const u=e.length,d=new Array(u);let m=0;for(let p=0;p<u;p++){const g=p;n(e[g]).next((b=>{d[g]=b,++m,m===u&&s(d)}),(b=>o(b)))}}))}static doWhile(e,n){return new PersistencePromise(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function __PRIVATE_getAndroidVersion(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function __PRIVATE_isIndexedDbTransactionError(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ListenSequence{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}__PRIVATE_ListenSequence.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j=-1;function __PRIVATE_isNullOrUndefined(r){return r==null}function __PRIVATE_isNegativeZero(r){return r===0&&1/r==-1/0}function isSafeInteger(r){return typeof r=="number"&&Number.isInteger(r)&&!__PRIVATE_isNegativeZero(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J$1="";function __PRIVATE_encodeResourcePath(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=__PRIVATE_encodeSeparator(e)),e=__PRIVATE_encodeSegment(r.get(n),e);return __PRIVATE_encodeSeparator(e)}function __PRIVATE_encodeSegment(r,e){let n=e;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case J$1:n+="";break;default:n+=u}}return n}function __PRIVATE_encodeSeparator(r){return r+J$1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_objectSize(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function forEach(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function isEmpty(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedMap{constructor(e,n){this.comparator=e,this.root=n||LLRBNode.EMPTY}insert(e,n){return new SortedMap(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}remove(e){return new SortedMap(this.comparator,this.root.remove(e,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new SortedMapIterator(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!1)}getReverseIterator(){return new SortedMapIterator(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!0)}}class SortedMapIterator{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class LLRBNode{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??LLRBNode.RED,this.left=o??LLRBNode.EMPTY,this.right=u??LLRBNode.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new LLRBNode(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return LLRBNode.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return LLRBNode.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fail(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fail(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw fail(27949);return e+(this.isRed()?0:1)}}LLRBNode.EMPTY=null,LLRBNode.RED=!0,LLRBNode.BLACK=!1,LLRBNode.EMPTY=new class{constructor(){this.size=0}get key(){throw fail(57766)}get value(){throw fail(16141)}get color(){throw fail(16727)}get left(){throw fail(29726)}get right(){throw fail(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new LLRBNode(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedSet{constructor(e){this.comparator=e,this.data=new SortedMap(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new SortedSetIterator(this.data.getIterator())}getIteratorFrom(e){return new SortedSetIterator(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof SortedSet)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new SortedSet(this.comparator);return n.data=e,n}}class SortedSetIterator{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldMask{constructor(e){this.fields=e,e.sort(FieldPath$1.comparator)}static empty(){return new FieldMask([])}unionWith(e){let n=new SortedSet(FieldPath$1.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new FieldMask(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return __PRIVATE_arrayEquals(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Base64DecodeError extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ByteString{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new __PRIVATE_Base64DecodeError("Invalid base64 string: "+u):u}})(e);return new ByteString(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u})(e);return new ByteString(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return __PRIVATE_primitiveComparator(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ByteString.EMPTY_BYTE_STRING=new ByteString("");const ot=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function __PRIVATE_normalizeTimestamp(r){if(__PRIVATE_hardAssert(!!r,39018),typeof r=="string"){let e=0;const n=ot.exec(r);if(__PRIVATE_hardAssert(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:__PRIVATE_normalizeNumber(r.seconds),nanos:__PRIVATE_normalizeNumber(r.nanos)}}function __PRIVATE_normalizeNumber(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function __PRIVATE_normalizeByteString(r){return typeof r=="string"?ByteString.fromBase64String(r):ByteString.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _t="server_timestamp",at="__type__",ut="__previous_value__",ct="__local_write_time__";function __PRIVATE_isServerTimestamp(r){return(r?.mapValue?.fields||{})[at]?.stringValue===_t}function __PRIVATE_getPreviousValue(r){const e=r.mapValue.fields[ut];return __PRIVATE_isServerTimestamp(e)?__PRIVATE_getPreviousValue(e):e}function __PRIVATE_getLocalWriteTime(r){const e=__PRIVATE_normalizeTimestamp(r.mapValue.fields[ct].timestampValue);return new Timestamp(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DatabaseInfo{constructor(e,n,s,o,u,d,m,p,g,b){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=b}}const lt="(default)";class DatabaseId{constructor(e,n){this.projectId=e,this.database=n||lt}static empty(){return new DatabaseId("","")}get isDefaultDatabase(){return this.database===lt}isEqual(e){return e instanceof DatabaseId&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht="__type__",Pt="__max__",Tt={mapValue:{}},It="__vector__",Et="value";function __PRIVATE_typeOrder(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?__PRIVATE_isServerTimestamp(r)?4:__PRIVATE_isMaxValue(r)?9007199254740991:__PRIVATE_isVectorValue(r)?10:11:fail(28295,{value:r})}function __PRIVATE_valueEquals(r,e){if(r===e)return!0;const n=__PRIVATE_typeOrder(r);if(n!==__PRIVATE_typeOrder(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return __PRIVATE_getLocalWriteTime(r).isEqual(__PRIVATE_getLocalWriteTime(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=__PRIVATE_normalizeTimestamp(o.timestampValue),m=__PRIVATE_normalizeTimestamp(u.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,u){return __PRIVATE_normalizeByteString(o.bytesValue).isEqual(__PRIVATE_normalizeByteString(u.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,u){return __PRIVATE_normalizeNumber(o.geoPointValue.latitude)===__PRIVATE_normalizeNumber(u.geoPointValue.latitude)&&__PRIVATE_normalizeNumber(o.geoPointValue.longitude)===__PRIVATE_normalizeNumber(u.geoPointValue.longitude)})(r,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return __PRIVATE_normalizeNumber(o.integerValue)===__PRIVATE_normalizeNumber(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=__PRIVATE_normalizeNumber(o.doubleValue),m=__PRIVATE_normalizeNumber(u.doubleValue);return d===m?__PRIVATE_isNegativeZero(d)===__PRIVATE_isNegativeZero(m):isNaN(d)&&isNaN(m)}return!1})(r,e);case 9:return __PRIVATE_arrayEquals(r.arrayValue.values||[],e.arrayValue.values||[],__PRIVATE_valueEquals);case 10:case 11:return(function(o,u){const d=o.mapValue.fields||{},m=u.mapValue.fields||{};if(__PRIVATE_objectSize(d)!==__PRIVATE_objectSize(m))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(m[p]===void 0||!__PRIVATE_valueEquals(d[p],m[p])))return!1;return!0})(r,e);default:return fail(52216,{left:r})}}function __PRIVATE_arrayValueContains(r,e){return(r.values||[]).find((n=>__PRIVATE_valueEquals(n,e)))!==void 0}function __PRIVATE_valueCompare(r,e){if(r===e)return 0;const n=__PRIVATE_typeOrder(r),s=__PRIVATE_typeOrder(e);if(n!==s)return __PRIVATE_primitiveComparator(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return __PRIVATE_primitiveComparator(r.booleanValue,e.booleanValue);case 2:return(function(u,d){const m=__PRIVATE_normalizeNumber(u.integerValue||u.doubleValue),p=__PRIVATE_normalizeNumber(d.integerValue||d.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(r,e);case 3:return __PRIVATE_compareTimestamps(r.timestampValue,e.timestampValue);case 4:return __PRIVATE_compareTimestamps(__PRIVATE_getLocalWriteTime(r),__PRIVATE_getLocalWriteTime(e));case 5:return __PRIVATE_compareUtf8Strings(r.stringValue,e.stringValue);case 6:return(function(u,d){const m=__PRIVATE_normalizeByteString(u),p=__PRIVATE_normalizeByteString(d);return m.compareTo(p)})(r.bytesValue,e.bytesValue);case 7:return(function(u,d){const m=u.split("/"),p=d.split("/");for(let g=0;g<m.length&&g<p.length;g++){const b=__PRIVATE_primitiveComparator(m[g],p[g]);if(b!==0)return b}return __PRIVATE_primitiveComparator(m.length,p.length)})(r.referenceValue,e.referenceValue);case 8:return(function(u,d){const m=__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(u.latitude),__PRIVATE_normalizeNumber(d.latitude));return m!==0?m:__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(u.longitude),__PRIVATE_normalizeNumber(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return __PRIVATE_compareArrays(r.arrayValue,e.arrayValue);case 10:return(function(u,d){const m=u.fields||{},p=d.fields||{},g=m[Et]?.arrayValue,b=p[Et]?.arrayValue,W=__PRIVATE_primitiveComparator(g?.values?.length||0,b?.values?.length||0);return W!==0?W:__PRIVATE_compareArrays(g,b)})(r.mapValue,e.mapValue);case 11:return(function(u,d){if(u===Tt.mapValue&&d===Tt.mapValue)return 0;if(u===Tt.mapValue)return 1;if(d===Tt.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),g=d.fields||{},b=Object.keys(g);p.sort(),b.sort();for(let W=0;W<p.length&&W<b.length;++W){const X=__PRIVATE_compareUtf8Strings(p[W],b[W]);if(X!==0)return X;const he=__PRIVATE_valueCompare(m[p[W]],g[b[W]]);if(he!==0)return he}return __PRIVATE_primitiveComparator(p.length,b.length)})(r.mapValue,e.mapValue);default:throw fail(23264,{he:n})}}function __PRIVATE_compareTimestamps(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return __PRIVATE_primitiveComparator(r,e);const n=__PRIVATE_normalizeTimestamp(r),s=__PRIVATE_normalizeTimestamp(e),o=__PRIVATE_primitiveComparator(n.seconds,s.seconds);return o!==0?o:__PRIVATE_primitiveComparator(n.nanos,s.nanos)}function __PRIVATE_compareArrays(r,e){const n=r.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=__PRIVATE_valueCompare(n[o],s[o]);if(u)return u}return __PRIVATE_primitiveComparator(n.length,s.length)}function canonicalId(r){return __PRIVATE_canonifyValue(r)}function __PRIVATE_canonifyValue(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=__PRIVATE_normalizeTimestamp(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return __PRIVATE_normalizeByteString(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return DocumentKey.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=__PRIVATE_canonifyValue(u);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const d of s)u?u=!1:o+=",",o+=`${d}:${__PRIVATE_canonifyValue(n.fields[d])}`;return o+"}"})(r.mapValue):fail(61005,{value:r})}function __PRIVATE_estimateByteSize(r){switch(__PRIVATE_typeOrder(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=__PRIVATE_getPreviousValue(r);return e?16+__PRIVATE_estimateByteSize(e):16;case 5:return 2*r.stringValue.length;case 6:return __PRIVATE_normalizeByteString(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+__PRIVATE_estimateByteSize(u)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return forEach(s.fields,((u,d)=>{o+=u.length+__PRIVATE_estimateByteSize(d)})),o})(r.mapValue);default:throw fail(13486,{value:r})}}function __PRIVATE_refValue(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function isInteger(r){return!!r&&"integerValue"in r}function isArray(r){return!!r&&"arrayValue"in r}function __PRIVATE_isNullValue(r){return!!r&&"nullValue"in r}function __PRIVATE_isNanValue(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function __PRIVATE_isMapValue(r){return!!r&&"mapValue"in r}function __PRIVATE_isVectorValue(r){return(r?.mapValue?.fields||{})[ht]?.stringValue===It}function __PRIVATE_deepClone(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return forEach(r.mapValue.fields,((n,s)=>e.mapValue.fields[n]=__PRIVATE_deepClone(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=__PRIVATE_deepClone(r.arrayValue.values[n]);return e}return{...r}}function __PRIVATE_isMaxValue(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===Pt}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectValue{constructor(e){this.value=e}static empty(){return new ObjectValue({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!__PRIVATE_isMapValue(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=__PRIVATE_deepClone(n)}setAll(e){let n=FieldPath$1.emptyPath(),s={},o=[];e.forEach(((d,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=m.popLast()}d?s[m.lastSegment()]=__PRIVATE_deepClone(d):o.push(m.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());__PRIVATE_isMapValue(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return __PRIVATE_valueEquals(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];__PRIVATE_isMapValue(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){forEach(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new ObjectValue(__PRIVATE_deepClone(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutableDocument{constructor(e,n,s,o,u,d,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=d,this.documentState=m}static newInvalidDocument(e){return new MutableDocument(e,0,SnapshotVersion.min(),SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newFoundDocument(e,n,s,o){return new MutableDocument(e,1,n,SnapshotVersion.min(),s,o,0)}static newNoDocument(e,n){return new MutableDocument(e,2,n,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newUnknownDocument(e,n){return new MutableDocument(e,3,n,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(SnapshotVersion.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ObjectValue.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ObjectValue.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=SnapshotVersion.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof MutableDocument&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new MutableDocument(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bound{constructor(e,n){this.position=e,this.inclusive=n}}function __PRIVATE_boundCompareToDocument(r,e,n){let s=0;for(let o=0;o<r.position.length;o++){const u=e[o],d=r.position[o];if(u.field.isKeyField()?s=DocumentKey.comparator(DocumentKey.fromName(d.referenceValue),n.key):s=__PRIVATE_valueCompare(d,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function __PRIVATE_boundEquals(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!__PRIVATE_valueEquals(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OrderBy{constructor(e,n="asc"){this.field=e,this.dir=n}}function __PRIVATE_orderByEquals(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Filter{}class FieldFilter extends Filter{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new __PRIVATE_KeyFieldFilter(e,n,s):n==="array-contains"?new __PRIVATE_ArrayContainsFilter(e,s):n==="in"?new __PRIVATE_InFilter(e,s):n==="not-in"?new __PRIVATE_NotInFilter(e,s):n==="array-contains-any"?new __PRIVATE_ArrayContainsAnyFilter(e,s):new FieldFilter(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new __PRIVATE_KeyFieldInFilter(e,s):new __PRIVATE_KeyFieldNotInFilter(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(__PRIVATE_valueCompare(n,this.value)):n!==null&&__PRIVATE_typeOrder(this.value)===__PRIVATE_typeOrder(n)&&this.matchesComparison(__PRIVATE_valueCompare(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fail(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class CompositeFilter extends Filter{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new CompositeFilter(e,n)}matches(e){return __PRIVATE_compositeFilterIsConjunction(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function __PRIVATE_compositeFilterIsConjunction(r){return r.op==="and"}function __PRIVATE_compositeFilterIsFlatConjunction(r){return __PRIVATE_compositeFilterIsFlat(r)&&__PRIVATE_compositeFilterIsConjunction(r)}function __PRIVATE_compositeFilterIsFlat(r){for(const e of r.filters)if(e instanceof CompositeFilter)return!1;return!0}function __PRIVATE_canonifyFilter(r){if(r instanceof FieldFilter)return r.field.canonicalString()+r.op.toString()+canonicalId(r.value);if(__PRIVATE_compositeFilterIsFlatConjunction(r))return r.filters.map((e=>__PRIVATE_canonifyFilter(e))).join(",");{const e=r.filters.map((n=>__PRIVATE_canonifyFilter(n))).join(",");return`${r.op}(${e})`}}function __PRIVATE_filterEquals(r,e){return r instanceof FieldFilter?(function(s,o){return o instanceof FieldFilter&&s.op===o.op&&s.field.isEqual(o.field)&&__PRIVATE_valueEquals(s.value,o.value)})(r,e):r instanceof CompositeFilter?(function(s,o){return o instanceof CompositeFilter&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,d,m)=>u&&__PRIVATE_filterEquals(d,o.filters[m])),!0):!1})(r,e):void fail(19439)}function __PRIVATE_stringifyFilter(r){return r instanceof FieldFilter?(function(n){return`${n.field.canonicalString()} ${n.op} ${canonicalId(n.value)}`})(r):r instanceof CompositeFilter?(function(n){return n.op.toString()+" {"+n.getFilters().map(__PRIVATE_stringifyFilter).join(" ,")+"}"})(r):"Filter"}class __PRIVATE_KeyFieldFilter extends FieldFilter{constructor(e,n,s){super(e,n,s),this.key=DocumentKey.fromName(s.referenceValue)}matches(e){const n=DocumentKey.comparator(e.key,this.key);return this.matchesComparison(n)}}class __PRIVATE_KeyFieldInFilter extends FieldFilter{constructor(e,n){super(e,"in",n),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class __PRIVATE_KeyFieldNotInFilter extends FieldFilter{constructor(e,n){super(e,"not-in",n),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function __PRIVATE_extractDocumentKeysFromArrayValue(r,e){return(e.arrayValue?.values||[]).map((n=>DocumentKey.fromName(n.referenceValue)))}class __PRIVATE_ArrayContainsFilter extends FieldFilter{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return isArray(n)&&__PRIVATE_arrayValueContains(n.arrayValue,this.value)}}class __PRIVATE_InFilter extends FieldFilter{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&__PRIVATE_arrayValueContains(this.value.arrayValue,n)}}class __PRIVATE_NotInFilter extends FieldFilter{constructor(e,n){super(e,"not-in",n)}matches(e){if(__PRIVATE_arrayValueContains(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!__PRIVATE_arrayValueContains(this.value.arrayValue,n)}}class __PRIVATE_ArrayContainsAnyFilter extends FieldFilter{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!isArray(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>__PRIVATE_arrayValueContains(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetImpl{constructor(e,n=null,s=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.Te=null}}function __PRIVATE_newTarget(r,e=null,n=[],s=[],o=null,u=null,d=null){return new __PRIVATE_TargetImpl(r,e,n,s,o,u,d)}function __PRIVATE_canonifyTarget(r){const e=__PRIVATE_debugCast(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>__PRIVATE_canonifyFilter(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),__PRIVATE_isNullOrUndefined(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>canonicalId(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>canonicalId(s))).join(",")),e.Te=n}return e.Te}function __PRIVATE_targetEquals(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!__PRIVATE_orderByEquals(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!__PRIVATE_filterEquals(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!__PRIVATE_boundEquals(r.startAt,e.startAt)&&__PRIVATE_boundEquals(r.endAt,e.endAt)}function __PRIVATE_targetIsDocumentTarget(r){return DocumentKey.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryImpl{constructor(e,n=null,s=[],o=[],u=null,d="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function __PRIVATE_newQuery(r,e,n,s,o,u,d,m){return new __PRIVATE_QueryImpl(r,e,n,s,o,u,d,m)}function __PRIVATE_newQueryForPath(r){return new __PRIVATE_QueryImpl(r)}function __PRIVATE_queryMatchesAllDocuments(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function __PRIVATE_isCollectionGroupQuery(r){return r.collectionGroup!==null}function __PRIVATE_queryNormalizedOrderBy(r){const e=__PRIVATE_debugCast(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new SortedSet(FieldPath$1.comparator);return d.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(m=m.add(g.field))}))})),m})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new OrderBy(u,s))})),n.has(FieldPath$1.keyField().canonicalString())||e.Ie.push(new OrderBy(FieldPath$1.keyField(),s))}return e.Ie}function __PRIVATE_queryToTarget(r){const e=__PRIVATE_debugCast(r);return e.Ee||(e.Ee=__PRIVATE__queryToTarget(e,__PRIVATE_queryNormalizedOrderBy(r))),e.Ee}function __PRIVATE__queryToTarget(r,e){if(r.limitType==="F")return __PRIVATE_newTarget(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new OrderBy(o.field,u)}));const n=r.endAt?new Bound(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Bound(r.startAt.position,r.startAt.inclusive):null;return __PRIVATE_newTarget(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function __PRIVATE_queryWithAddedFilter(r,e){const n=r.filters.concat([e]);return new __PRIVATE_QueryImpl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function __PRIVATE_queryWithLimit(r,e,n){return new __PRIVATE_QueryImpl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function __PRIVATE_queryEquals(r,e){return __PRIVATE_targetEquals(__PRIVATE_queryToTarget(r),__PRIVATE_queryToTarget(e))&&r.limitType===e.limitType}function __PRIVATE_canonifyQuery(r){return`${__PRIVATE_canonifyTarget(__PRIVATE_queryToTarget(r))}|lt:${r.limitType}`}function __PRIVATE_stringifyQuery(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>__PRIVATE_stringifyFilter(o))).join(", ")}]`),__PRIVATE_isNullOrUndefined(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>canonicalId(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>canonicalId(o))).join(",")),`Target(${s})`})(__PRIVATE_queryToTarget(r))}; limitType=${r.limitType})`}function __PRIVATE_queryMatches(r,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):DocumentKey.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(r,e)&&(function(s,o){for(const u of __PRIVATE_queryNormalizedOrderBy(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(d,m,p){const g=__PRIVATE_boundCompareToDocument(d,m,p);return d.inclusive?g<=0:g<0})(s.startAt,__PRIVATE_queryNormalizedOrderBy(s),o)||s.endAt&&!(function(d,m,p){const g=__PRIVATE_boundCompareToDocument(d,m,p);return d.inclusive?g>=0:g>0})(s.endAt,__PRIVATE_queryNormalizedOrderBy(s),o))})(r,e)}function __PRIVATE_queryCollectionGroup(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function __PRIVATE_newQueryComparator(r){return(e,n)=>{let s=!1;for(const o of __PRIVATE_queryNormalizedOrderBy(r)){const u=__PRIVATE_compareDocs(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function __PRIVATE_compareDocs(r,e,n){const s=r.field.isKeyField()?DocumentKey.comparator(e.key,n.key):(function(u,d,m){const p=d.data.field(u),g=m.data.field(u);return p!==null&&g!==null?__PRIVATE_valueCompare(p,g):fail(42886)})(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return fail(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectMap{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){forEach(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return isEmpty(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rt=new SortedMap(DocumentKey.comparator);function __PRIVATE_mutableDocumentMap(){return Rt}const Vt=new SortedMap(DocumentKey.comparator);function documentMap(...r){let e=Vt;for(const n of r)e=e.insert(n.key,n);return e}function __PRIVATE_convertOverlayedDocumentMapToDocumentMap(r){let e=Vt;return r.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function __PRIVATE_newOverlayMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newMutationMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newDocumentKeyMap(){return new ObjectMap((r=>r.toString()),((r,e)=>r.isEqual(e)))}const ft=new SortedSet(DocumentKey.comparator);function __PRIVATE_documentKeySet(...r){let e=ft;for(const n of r)e=e.add(n);return e}const gt=new SortedSet(__PRIVATE_primitiveComparator);function __PRIVATE_targetIdSet(){return gt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_toDouble(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:__PRIVATE_isNegativeZero(e)?"-0":e}}function __PRIVATE_toInteger(r){return{integerValue:""+r}}function toNumber(r,e){return isSafeInteger(e)?__PRIVATE_toInteger(e):__PRIVATE_toDouble(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TransformOperation{constructor(){this._=void 0}}function __PRIVATE_applyTransformOperationToLocalView(r,e,n){return r instanceof __PRIVATE_ServerTimestampTransform?(function(o,u){const d={fields:{[at]:{stringValue:_t},[ct]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&__PRIVATE_isServerTimestamp(u)&&(u=__PRIVATE_getPreviousValue(u)),u&&(d.fields[ut]=u),{mapValue:d}})(n,e):r instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(r,e):r instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(r,e):(function(o,u){const d=__PRIVATE_computeTransformOperationBaseValue(o,u),m=asNumber(d)+asNumber(o.Ae);return isInteger(d)&&isInteger(o.Ae)?__PRIVATE_toInteger(m):__PRIVATE_toDouble(o.serializer,m)})(r,e)}function __PRIVATE_applyTransformOperationToRemoteDocument(r,e,n){return r instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(r,e):r instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(r,e):n}function __PRIVATE_computeTransformOperationBaseValue(r,e){return r instanceof __PRIVATE_NumericIncrementTransformOperation?(function(s){return isInteger(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class __PRIVATE_ServerTimestampTransform extends TransformOperation{}class __PRIVATE_ArrayUnionTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayUnionTransformOperation(r,e){const n=__PRIVATE_coercedFieldValuesArray(e);for(const s of r.elements)n.some((o=>__PRIVATE_valueEquals(o,s)))||n.push(s);return{arrayValue:{values:n}}}class __PRIVATE_ArrayRemoveTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayRemoveTransformOperation(r,e){let n=__PRIVATE_coercedFieldValuesArray(e);for(const s of r.elements)n=n.filter((o=>!__PRIVATE_valueEquals(o,s)));return{arrayValue:{values:n}}}class __PRIVATE_NumericIncrementTransformOperation extends TransformOperation{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function asNumber(r){return __PRIVATE_normalizeNumber(r.integerValue||r.doubleValue)}function __PRIVATE_coercedFieldValuesArray(r){return isArray(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function __PRIVATE_fieldTransformEquals(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof __PRIVATE_ArrayUnionTransformOperation&&o instanceof __PRIVATE_ArrayUnionTransformOperation||s instanceof __PRIVATE_ArrayRemoveTransformOperation&&o instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_arrayEquals(s.elements,o.elements,__PRIVATE_valueEquals):s instanceof __PRIVATE_NumericIncrementTransformOperation&&o instanceof __PRIVATE_NumericIncrementTransformOperation?__PRIVATE_valueEquals(s.Ae,o.Ae):s instanceof __PRIVATE_ServerTimestampTransform&&o instanceof __PRIVATE_ServerTimestampTransform})(r.transform,e.transform)}class Precondition{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Precondition}static exists(e){return new Precondition(void 0,e)}static updateTime(e){return new Precondition(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function __PRIVATE_preconditionIsValidForDocument(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Mutation{}function __PRIVATE_calculateOverlayMutation(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new __PRIVATE_DeleteMutation(r.key,Precondition.none()):new __PRIVATE_SetMutation(r.key,r.data,Precondition.none());{const n=r.data,s=ObjectValue.empty();let o=new SortedSet(FieldPath$1.comparator);for(let u of e.fields)if(!o.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?s.delete(u):s.set(u,d),o=o.add(u)}return new __PRIVATE_PatchMutation(r.key,s,new FieldMask(o.toArray()),Precondition.none())}}function __PRIVATE_mutationApplyToRemoteDocument(r,e,n){r instanceof __PRIVATE_SetMutation?(function(o,u,d){const m=o.value.clone(),p=__PRIVATE_serverTransformResults(o.fieldTransforms,u,d.transformResults);m.setAll(p),u.convertToFoundDocument(d.version,m).setHasCommittedMutations()})(r,e,n):r instanceof __PRIVATE_PatchMutation?(function(o,u,d){if(!__PRIVATE_preconditionIsValidForDocument(o.precondition,u))return void u.convertToUnknownDocument(d.version);const m=__PRIVATE_serverTransformResults(o.fieldTransforms,u,d.transformResults),p=u.data;p.setAll(__PRIVATE_getPatch(o)),p.setAll(m),u.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(r,e,n):(function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function __PRIVATE_mutationApplyToLocalView(r,e,n,s){return r instanceof __PRIVATE_SetMutation?(function(u,d,m,p){if(!__PRIVATE_preconditionIsValidForDocument(u.precondition,d))return m;const g=u.value.clone(),b=__PRIVATE_localTransformResults(u.fieldTransforms,p,d);return g.setAll(b),d.convertToFoundDocument(d.version,g).setHasLocalMutations(),null})(r,e,n,s):r instanceof __PRIVATE_PatchMutation?(function(u,d,m,p){if(!__PRIVATE_preconditionIsValidForDocument(u.precondition,d))return m;const g=__PRIVATE_localTransformResults(u.fieldTransforms,p,d),b=d.data;return b.setAll(__PRIVATE_getPatch(u)),b.setAll(g),d.convertToFoundDocument(d.version,b).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((W=>W.field)))})(r,e,n,s):(function(u,d,m){return __PRIVATE_preconditionIsValidForDocument(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m})(r,e,n)}function __PRIVATE_mutationEquals(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&__PRIVATE_arrayEquals(s,o,((u,d)=>__PRIVATE_fieldTransformEquals(u,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class __PRIVATE_SetMutation extends Mutation{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class __PRIVATE_PatchMutation extends Mutation{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function __PRIVATE_getPatch(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}})),e}function __PRIVATE_serverTransformResults(r,e,n){const s=new Map;__PRIVATE_hardAssert(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let o=0;o<n.length;o++){const u=r[o],d=u.transform,m=e.data.field(u.field);s.set(u.field,__PRIVATE_applyTransformOperationToRemoteDocument(d,m,n[o]))}return s}function __PRIVATE_localTransformResults(r,e,n){const s=new Map;for(const o of r){const u=o.transform,d=n.data.field(o.field);s.set(o.field,__PRIVATE_applyTransformOperationToLocalView(u,d,e))}return s}class __PRIVATE_DeleteMutation extends Mutation{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutationBatch{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&__PRIVATE_mutationApplyToRemoteDocument(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=__PRIVATE_mutationApplyToLocalView(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=__PRIVATE_mutationApplyToLocalView(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=__PRIVATE_newMutationMap();return this.mutations.forEach((o=>{const u=e.get(o.key),d=u.overlayedDocument;let m=this.applyToLocalView(d,u.mutatedFields);m=n.has(o.key)?null:m;const p=__PRIVATE_calculateOverlayMutation(d,m);p!==null&&s.set(o.key,p),d.isValidDocument()||d.convertToNoDocument(SnapshotVersion.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),__PRIVATE_documentKeySet())}isEqual(e){return this.batchId===e.batchId&&__PRIVATE_arrayEquals(this.mutations,e.mutations,((n,s)=>__PRIVATE_mutationEquals(n,s)))&&__PRIVATE_arrayEquals(this.baseMutations,e.baseMutations,((n,s)=>__PRIVATE_mutationEquals(n,s)))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Overlay{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ExistenceFilter{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt,yt;function __PRIVATE_mapCodeFromRpcCode(r){if(r===void 0)return __PRIVATE_logError("GRPC error has no .code"),N$1.UNKNOWN;switch(r){case pt.OK:return N$1.OK;case pt.CANCELLED:return N$1.CANCELLED;case pt.UNKNOWN:return N$1.UNKNOWN;case pt.DEADLINE_EXCEEDED:return N$1.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return N$1.RESOURCE_EXHAUSTED;case pt.INTERNAL:return N$1.INTERNAL;case pt.UNAVAILABLE:return N$1.UNAVAILABLE;case pt.UNAUTHENTICATED:return N$1.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return N$1.INVALID_ARGUMENT;case pt.NOT_FOUND:return N$1.NOT_FOUND;case pt.ALREADY_EXISTS:return N$1.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return N$1.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return N$1.FAILED_PRECONDITION;case pt.ABORTED:return N$1.ABORTED;case pt.OUT_OF_RANGE:return N$1.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return N$1.UNIMPLEMENTED;case pt.DATA_LOSS:return N$1.DATA_LOSS;default:return fail(39323,{code:r})}}(yt=pt||(pt={}))[yt.OK=0]="OK",yt[yt.CANCELLED=1]="CANCELLED",yt[yt.UNKNOWN=2]="UNKNOWN",yt[yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt[yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt[yt.NOT_FOUND=5]="NOT_FOUND",yt[yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt[yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt[yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt[yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt[yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt[yt.ABORTED=10]="ABORTED",yt[yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt[yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt[yt.INTERNAL=13]="INTERNAL",yt[yt.UNAVAILABLE=14]="UNAVAILABLE",yt[yt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newTextEncoder(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const St=new Integer([4294967295,4294967295],0);function __PRIVATE_getMd5HashValue(r){const e=__PRIVATE_newTextEncoder().encode(r),n=new Md5;return n.update(e),new Uint8Array(n.digest())}function __PRIVATE_get64BitUints(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Integer([n,s],0),new Integer([o,u],0)]}class BloomFilter{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new __PRIVATE_BloomFilterError(`Invalid padding: ${n}`);if(s<0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new __PRIVATE_BloomFilterError(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Integer.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(Integer.fromNumber(s)));return o.compare(St)===1&&(o=new Integer([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=__PRIVATE_getMd5HashValue(e),[s,o]=__PRIVATE_get64BitUints(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(s,o,u);if(!this.we(d))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new BloomFilter(u,o,n);return s.forEach((m=>d.insert(m))),d}insert(e){if(this.ge===0)return;const n=__PRIVATE_getMd5HashValue(e),[s,o]=__PRIVATE_get64BitUints(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(s,o,u);this.Se(d)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class __PRIVATE_BloomFilterError extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteEvent{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,TargetChange.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new RemoteEvent(SnapshotVersion.min(),o,new SortedMap(__PRIVATE_primitiveComparator),__PRIVATE_mutableDocumentMap(),__PRIVATE_documentKeySet())}}class TargetChange{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new TargetChange(s,n,__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentWatchChange{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class __PRIVATE_ExistenceFilterChange{constructor(e,n){this.targetId=e,this.Ce=n}}class __PRIVATE_WatchTargetChange{constructor(e,n,s=ByteString.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class __PRIVATE_TargetState{constructor(){this.ve=0,this.Fe=__PRIVATE_snapshotChangesMap(),this.Me=ByteString.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=__PRIVATE_documentKeySet(),n=__PRIVATE_documentKeySet(),s=__PRIVATE_documentKeySet();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:fail(38017,{changeType:u})}})),new TargetChange(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=__PRIVATE_snapshotChangesMap()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,__PRIVATE_hardAssert(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class __PRIVATE_WatchChangeAggregator{constructor(e){this.Ge=e,this.ze=new Map,this.je=__PRIVATE_mutableDocumentMap(),this.Je=__PRIVATE_documentTargetMap(),this.He=__PRIVATE_documentTargetMap(),this.Ye=new SortedMap(__PRIVATE_primitiveComparator)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:fail(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(__PRIVATE_targetIsDocumentTarget(u))if(s===0){const d=new DocumentKey(u.path);this.et(n,d,MutableDocument.newNoDocument(d,SnapshotVersion.min()))}else __PRIVATE_hardAssert(s===1,20013,{expectedCount:s});else{const d=this._t(n);if(d!==s){const m=this.ut(e),p=m?this.ct(m,e,d):1;if(p!==0){this.it(n);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,g)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let d,m;try{d=__PRIVATE_normalizeByteString(s).toUint8Array()}catch(p){if(p instanceof __PRIVATE_Base64DecodeError)return __PRIVATE_logWarn("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new BloomFilter(d,o,u)}catch(p){return __PRIVATE_logWarn(p instanceof __PRIVATE_BloomFilterError?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const d=this.Ge.ht(),m=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,d)=>{const m=this.ot(d);if(m){if(u.current&&__PRIVATE_targetIsDocumentTarget(m.target)){const p=new DocumentKey(m.target.path);this.It(p).has(d)||this.Et(d,p)||this.et(d,p,MutableDocument.newNoDocument(p,e))}u.Be&&(n.set(d,u.ke()),u.qe())}}));let s=__PRIVATE_documentKeySet();this.He.forEach(((u,d)=>{let m=!0;d.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const o=new RemoteEvent(e,n,this.Ye,this.je,s);return this.je=__PRIVATE_mutableDocumentMap(),this.Je=__PRIVATE_documentTargetMap(),this.He=__PRIVATE_documentTargetMap(),this.Ye=new SortedMap(__PRIVATE_primitiveComparator),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new __PRIVATE_TargetState,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new SortedSet(__PRIVATE_primitiveComparator),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new SortedSet(__PRIVATE_primitiveComparator),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||__PRIVATE_logDebug("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new __PRIVATE_TargetState),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function __PRIVATE_documentTargetMap(){return new SortedMap(DocumentKey.comparator)}function __PRIVATE_snapshotChangesMap(){return new SortedMap(DocumentKey.comparator)}const bt={asc:"ASCENDING",desc:"DESCENDING"},Dt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ct={and:"AND",or:"OR"};class JsonProtoSerializer{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function __PRIVATE_toInt32Proto(r,e){return r.useProto3Json||__PRIVATE_isNullOrUndefined(e)?e:{value:e}}function toTimestamp(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function __PRIVATE_toBytes(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function __PRIVATE_fromVersion(r){return __PRIVATE_hardAssert(!!r,49232),SnapshotVersion.fromTimestamp((function(n){const s=__PRIVATE_normalizeTimestamp(n);return new Timestamp(s.seconds,s.nanos)})(r))}function __PRIVATE_toResourceName(r,e){return __PRIVATE_toResourcePath(r,e).canonicalString()}function __PRIVATE_toResourcePath(r,e){const n=(function(o){return new ResourcePath(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?n:n.child(e)}function __PRIVATE_fromResourceName(r){const e=ResourcePath.fromString(r);return __PRIVATE_hardAssert(__PRIVATE_isValidResourceName(e),10190,{key:e.toString()}),e}function fromName(r,e){const n=__PRIVATE_fromResourceName(e);if(n.get(1)!==r.databaseId.projectId)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new DocumentKey(__PRIVATE_extractLocalPathFromResourceName(n))}function __PRIVATE_toQueryPath(r,e){return __PRIVATE_toResourceName(r.databaseId,e)}function __PRIVATE_fromQueryPath(r){const e=__PRIVATE_fromResourceName(r);return e.length===4?ResourcePath.emptyPath():__PRIVATE_extractLocalPathFromResourceName(e)}function __PRIVATE_getEncodedDatabaseId(r){return new ResourcePath(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function __PRIVATE_extractLocalPathFromResourceName(r){return __PRIVATE_hardAssert(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function __PRIVATE_fromWatchChange(r,e){let n;if("targetChange"in e){e.targetChange;const s=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:fail(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(g,b){return g.useProto3Json?(__PRIVATE_hardAssert(b===void 0||typeof b=="string",58123),ByteString.fromBase64String(b||"")):(__PRIVATE_hardAssert(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),ByteString.fromUint8Array(b||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&(function(g){const b=g.code===void 0?N$1.UNKNOWN:__PRIVATE_mapCodeFromRpcCode(g.code);return new FirestoreError(b,g.message||"")})(d);n=new __PRIVATE_WatchTargetChange(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=fromName(r,s.document.name),u=__PRIVATE_fromVersion(s.document.updateTime),d=s.document.createTime?__PRIVATE_fromVersion(s.document.createTime):SnapshotVersion.min(),m=new ObjectValue({mapValue:{fields:s.document.fields}}),p=MutableDocument.newFoundDocument(o,u,d,m),g=s.targetIds||[],b=s.removedTargetIds||[];n=new __PRIVATE_DocumentWatchChange(g,b,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=fromName(r,s.document),u=s.readTime?__PRIVATE_fromVersion(s.readTime):SnapshotVersion.min(),d=MutableDocument.newNoDocument(o,u),m=s.removedTargetIds||[];n=new __PRIVATE_DocumentWatchChange([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=fromName(r,s.document),u=s.removedTargetIds||[];n=new __PRIVATE_DocumentWatchChange([],u,o,null)}else{if(!("filter"in e))return fail(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,d=new ExistenceFilter(o,u),m=s.targetId;n=new __PRIVATE_ExistenceFilterChange(m,d)}}return n}function __PRIVATE_toDocumentsTarget(r,e){return{documents:[__PRIVATE_toQueryPath(r,e.path)]}}function __PRIVATE_toQueryTarget(r,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=__PRIVATE_toQueryPath(r,o);const u=(function(g){if(g.length!==0)return __PRIVATE_toFilter(CompositeFilter.create(g,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const d=(function(g){if(g.length!==0)return g.map((b=>(function(X){return{field:__PRIVATE_toFieldPathReference(X.field),direction:__PRIVATE_toDirection(X.dir)}})(b)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const m=__PRIVATE_toInt32Proto(r,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:n,parent:o}}function __PRIVATE_convertQueryTargetToQuery(r){let e=__PRIVATE_fromQueryPath(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){__PRIVATE_hardAssert(s===1,65062);const b=n.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let u=[];n.where&&(u=(function(W){const X=__PRIVATE_fromFilter(W);return X instanceof CompositeFilter&&__PRIVATE_compositeFilterIsFlatConjunction(X)?X.getFilters():[X]})(n.where));let d=[];n.orderBy&&(d=(function(W){return W.map((X=>(function(_e){return new OrderBy(__PRIVATE_fromFieldPathReference(_e.field),(function(ve){switch(ve){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_e.direction))})(X)))})(n.orderBy));let m=null;n.limit&&(m=(function(W){let X;return X=typeof W=="object"?W.value:W,__PRIVATE_isNullOrUndefined(X)?null:X})(n.limit));let p=null;n.startAt&&(p=(function(W){const X=!!W.before,he=W.values||[];return new Bound(he,X)})(n.startAt));let g=null;return n.endAt&&(g=(function(W){const X=!W.before,he=W.values||[];return new Bound(he,X)})(n.endAt)),__PRIVATE_newQuery(e,o,d,u,m,"F",p,g)}function __PRIVATE_toListenRequestLabels(r,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fail(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function __PRIVATE_fromFilter(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=__PRIVATE_fromFieldPathReference(n.unaryFilter.field);return FieldFilter.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=__PRIVATE_fromFieldPathReference(n.unaryFilter.field);return FieldFilter.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=__PRIVATE_fromFieldPathReference(n.unaryFilter.field);return FieldFilter.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=__PRIVATE_fromFieldPathReference(n.unaryFilter.field);return FieldFilter.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fail(61313);default:return fail(60726)}})(r):r.fieldFilter!==void 0?(function(n){return FieldFilter.create(__PRIVATE_fromFieldPathReference(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fail(58110);default:return fail(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return CompositeFilter.create(n.compositeFilter.filters.map((s=>__PRIVATE_fromFilter(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return fail(1026)}})(n.compositeFilter.op))})(r):fail(30097,{filter:r})}function __PRIVATE_toDirection(r){return bt[r]}function __PRIVATE_toOperatorName(r){return Dt[r]}function __PRIVATE_toCompositeOperatorName(r){return Ct[r]}function __PRIVATE_toFieldPathReference(r){return{fieldPath:r.canonicalString()}}function __PRIVATE_fromFieldPathReference(r){return FieldPath$1.fromServerFormat(r.fieldPath)}function __PRIVATE_toFilter(r){return r instanceof FieldFilter?(function(n){if(n.op==="=="){if(__PRIVATE_isNanValue(n.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(n.field),op:"IS_NAN"}};if(__PRIVATE_isNullValue(n.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(__PRIVATE_isNanValue(n.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(n.field),op:"IS_NOT_NAN"}};if(__PRIVATE_isNullValue(n.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:__PRIVATE_toFieldPathReference(n.field),op:__PRIVATE_toOperatorName(n.op),value:n.value}}})(r):r instanceof CompositeFilter?(function(n){const s=n.getFilters().map((o=>__PRIVATE_toFilter(o)));return s.length===1?s[0]:{compositeFilter:{op:__PRIVATE_toCompositeOperatorName(n.op),filters:s}}})(r):fail(54877,{filter:r})}function __PRIVATE_isValidResourceName(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TargetData{constructor(e,n,s,o,u=SnapshotVersion.min(),d=SnapshotVersion.min(),m=ByteString.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new TargetData(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalSerializer{constructor(e){this.yt=e}}function __PRIVATE_fromBundledQuery(r){const e=__PRIVATE_convertQueryTargetToQuery({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?__PRIVATE_queryWithLimit(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryIndexManager{constructor(){this.Cn=new __PRIVATE_MemoryCollectionParentIndex}addToCollectionParentIndex(e,n){return this.Cn.add(n),PersistencePromise.resolve()}getCollectionParents(e,n){return PersistencePromise.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return PersistencePromise.resolve()}deleteFieldIndex(e,n){return PersistencePromise.resolve()}deleteAllFieldIndexes(e){return PersistencePromise.resolve()}createTargetIndexes(e,n){return PersistencePromise.resolve()}getDocumentsMatchingTarget(e,n){return PersistencePromise.resolve(null)}getIndexType(e,n){return PersistencePromise.resolve(0)}getFieldIndexes(e,n){return PersistencePromise.resolve([])}getNextCollectionGroupToUpdate(e){return PersistencePromise.resolve(null)}getMinOffset(e,n){return PersistencePromise.resolve(IndexOffset.min())}getMinOffsetFromCollectionGroup(e,n){return PersistencePromise.resolve(IndexOffset.min())}updateCollectionGroup(e,n,s){return PersistencePromise.resolve()}updateIndexEntries(e,n){return PersistencePromise.resolve()}}class __PRIVATE_MemoryCollectionParentIndex{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new SortedSet(ResourcePath.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new SortedSet(ResourcePath.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xt={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ot=41943040;class LruParams{static withCacheSize(e){return new LruParams(e,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */LruParams.DEFAULT_COLLECTION_PERCENTILE=10,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,LruParams.DEFAULT=new LruParams(Ot,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),LruParams.DISABLED=new LruParams(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetIdGenerator{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new __PRIVATE_TargetIdGenerator(0)}static cr(){return new __PRIVATE_TargetIdGenerator(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nt="LruGarbageCollector",Bt=1048576;function __PRIVATE_bufferEntryComparator([r,e],[n,s]){const o=__PRIVATE_primitiveComparator(r,n);return o===0?__PRIVATE_primitiveComparator(e,s):o}class __PRIVATE_RollingSequenceNumberBuffer{constructor(e){this.Ir=e,this.buffer=new SortedSet(__PRIVATE_bufferEntryComparator),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();__PRIVATE_bufferEntryComparator(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class __PRIVATE_LruScheduler{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){__PRIVATE_logDebug(Nt,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){__PRIVATE_isIndexedDbTransactionError(n)?__PRIVATE_logDebug(Nt,"Ignoring IndexedDB error during garbage collection: ",n):await __PRIVATE_ignoreIfPrimaryLeaseLoss(n)}await this.Vr(3e5)}))}}class __PRIVATE_LruGarbageCollectorImpl{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return PersistencePromise.resolve(__PRIVATE_ListenSequence.ce);const s=new __PRIVATE_RollingSequenceNumberBuffer(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(__PRIVATE_logDebug("LruGarbageCollector","Garbage collection skipped; disabled"),PersistencePromise.resolve(xt)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(__PRIVATE_logDebug("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xt):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,u,d,m,p,g;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((W=>(W>this.params.maximumSequenceNumbersToCollect?(__PRIVATE_logDebug("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${W}`),o=this.params.maximumSequenceNumbersToCollect):o=W,d=Date.now(),this.nthSequenceNumber(e,o)))).next((W=>(s=W,m=Date.now(),this.removeTargets(e,s,n)))).next((W=>(u=W,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((W=>(g=Date.now(),__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-b}ms
	Determined least recently used ${o} in `+(m-d)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${W} documents in `+(g-p)+`ms
Total Duration: ${g-b}ms`),PersistencePromise.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:W}))))}}function __PRIVATE_newLruGarbageCollector(r,e){return new __PRIVATE_LruGarbageCollectorImpl(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteDocumentChangeBuffer{constructor(){this.changes=new ObjectMap((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,MutableDocument.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?PersistencePromise.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OverlayedDocument{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LocalDocumentsView{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&__PRIVATE_mutationApplyToLocalView(s.mutation,o,FieldMask.empty(),Timestamp.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,__PRIVATE_documentKeySet()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=__PRIVATE_documentKeySet()){const o=__PRIVATE_newOverlayMap();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let d=documentMap();return u.forEach(((m,p)=>{d=d.insert(m,p.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const s=__PRIVATE_newOverlayMap();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,__PRIVATE_documentKeySet())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((d,m)=>{n.set(d,m)}))}))}computeViews(e,n,s,o){let u=__PRIVATE_mutableDocumentMap();const d=__PRIVATE_newDocumentKeyMap(),m=(function(){return __PRIVATE_newDocumentKeyMap()})();return n.forEach(((p,g)=>{const b=s.get(g.key);o.has(g.key)&&(b===void 0||b.mutation instanceof __PRIVATE_PatchMutation)?u=u.insert(g.key,g):b!==void 0?(d.set(g.key,b.mutation.getFieldMask()),__PRIVATE_mutationApplyToLocalView(b.mutation,g,b.mutation.getFieldMask(),Timestamp.now())):d.set(g.key,FieldMask.empty())})),this.recalculateAndSaveOverlays(e,u).next((p=>(p.forEach(((g,b)=>d.set(g,b))),n.forEach(((g,b)=>m.set(g,new OverlayedDocument(b,d.get(g)??null)))),m)))}recalculateAndSaveOverlays(e,n){const s=__PRIVATE_newDocumentKeyMap();let o=new SortedMap(((d,m)=>d-m)),u=__PRIVATE_documentKeySet();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const m of d)m.keys().forEach((p=>{const g=n.get(p);if(g===null)return;let b=s.get(p)||FieldMask.empty();b=m.applyToLocalView(g,b),s.set(p,b);const W=(o.get(m.batchId)||__PRIVATE_documentKeySet()).add(p);o=o.insert(m.batchId,W)}))})).next((()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,b=p.value,W=__PRIVATE_newMutationMap();b.forEach((X=>{if(!u.has(X)){const he=__PRIVATE_calculateOverlayMutation(n.get(X),s.get(X));he!==null&&W.set(X,he),u=u.add(X)}})),d.push(this.documentOverlayCache.saveOverlays(e,g,W))}return PersistencePromise.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(d){return DocumentKey.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):__PRIVATE_isCollectionGroupQuery(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):PersistencePromise.resolve(__PRIVATE_newOverlayMap());let m=U$1,p=u;return d.next((g=>PersistencePromise.forEach(g,((b,W)=>(m<W.largestBatchId&&(m=W.largestBatchId),u.get(b)?PersistencePromise.resolve():this.remoteDocumentCache.getEntry(e,b).next((X=>{p=p.insert(b,X)}))))).next((()=>this.populateOverlays(e,g,u))).next((()=>this.computeViews(e,p,g,__PRIVATE_documentKeySet()))).next((b=>({batchId:m,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(b)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new DocumentKey(n)).next((s=>{let o=documentMap();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let d=documentMap();return this.indexManager.getCollectionParents(e,u).next((m=>PersistencePromise.forEach(m,(p=>{const g=(function(W,X){return new __PRIVATE_QueryImpl(X,null,W.explicitOrderBy.slice(),W.filters.slice(),W.limit,W.limitType,W.startAt,W.endAt)})(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next((b=>{b.forEach(((W,X)=>{d=d.insert(W,X)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((d=>{u.forEach(((p,g)=>{const b=g.getKey();d.get(b)===null&&(d=d.insert(b,MutableDocument.newInvalidDocument(b)))}));let m=documentMap();return d.forEach(((p,g)=>{const b=u.get(p);b!==void 0&&__PRIVATE_mutationApplyToLocalView(b.mutation,g,FieldMask.empty(),Timestamp.now()),__PRIVATE_queryMatches(n,g)&&(m=m.insert(p,g))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryBundleCache{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return PersistencePromise.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:__PRIVATE_fromVersion(o.createTime)}})(n)),PersistencePromise.resolve()}getNamedQuery(e,n){return PersistencePromise.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:__PRIVATE_fromBundledQuery(o.bundledQuery),readTime:__PRIVATE_fromVersion(o.readTime)}})(n)),PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryDocumentOverlayCache{constructor(){this.overlays=new SortedMap(DocumentKey.comparator),this.qr=new Map}getOverlay(e,n){return PersistencePromise.resolve(this.overlays.get(n))}getOverlays(e,n){const s=__PRIVATE_newOverlayMap();return PersistencePromise.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.St(e,n,u)})),PersistencePromise.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),PersistencePromise.resolve()}getOverlaysForCollection(e,n,s){const o=__PRIVATE_newOverlayMap(),u=n.length+1,d=new DocumentKey(n.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return PersistencePromise.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new SortedMap(((g,b)=>g-b));const d=this.overlays.getIterator();for(;d.hasNext();){const g=d.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>s){let b=u.get(g.largestBatchId);b===null&&(b=__PRIVATE_newOverlayMap(),u=u.insert(g.largestBatchId,b)),b.set(g.getKey(),g)}}const m=__PRIVATE_newOverlayMap(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,b)=>m.set(g,b))),!(m.size()>=o)););return PersistencePromise.resolve(m)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new Overlay(n,s));let u=this.qr.get(n);u===void 0&&(u=__PRIVATE_documentKeySet(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryGlobalsCache{constructor(){this.sessionToken=ByteString.EMPTY_BYTE_STRING}getSessionToken(e){return PersistencePromise.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ReferenceSet{constructor(){this.Qr=new SortedSet(__PRIVATE_DocReference.$r),this.Ur=new SortedSet(__PRIVATE_DocReference.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new __PRIVATE_DocReference(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new __PRIVATE_DocReference(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new DocumentKey(new ResourcePath([])),s=new __PRIVATE_DocReference(n,e),o=new __PRIVATE_DocReference(n,e+1),u=[];return this.Ur.forEachInRange([s,o],(d=>{this.Gr(d),u.push(d.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new DocumentKey(new ResourcePath([])),s=new __PRIVATE_DocReference(n,e),o=new __PRIVATE_DocReference(n,e+1);let u=__PRIVATE_documentKeySet();return this.Ur.forEachInRange([s,o],(d=>{u=u.add(d.key)})),u}containsKey(e){const n=new __PRIVATE_DocReference(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class __PRIVATE_DocReference{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return DocumentKey.comparator(e.key,n.key)||__PRIVATE_primitiveComparator(e.Yr,n.Yr)}static Kr(e,n){return __PRIVATE_primitiveComparator(e.Yr,n.Yr)||DocumentKey.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryMutationQueue{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new SortedSet(__PRIVATE_DocReference.$r)}checkEmpty(e){return PersistencePromise.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new MutationBatch(u,n,s,o);this.mutationQueue.push(d);for(const m of o)this.Zr=this.Zr.add(new __PRIVATE_DocReference(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return PersistencePromise.resolve(d)}lookupMutationBatch(e,n){return PersistencePromise.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return PersistencePromise.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return PersistencePromise.resolve(this.mutationQueue.length===0?j:this.tr-1)}getAllMutationBatches(e){return PersistencePromise.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new __PRIVATE_DocReference(n,0),o=new __PRIVATE_DocReference(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(d=>{const m=this.Xr(d.Yr);u.push(m)})),PersistencePromise.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new SortedSet(__PRIVATE_primitiveComparator);return n.forEach((o=>{const u=new __PRIVATE_DocReference(o,0),d=new __PRIVATE_DocReference(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,d],(m=>{s=s.add(m.Yr)}))})),PersistencePromise.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;DocumentKey.isDocumentKey(u)||(u=u.child(""));const d=new __PRIVATE_DocReference(new DocumentKey(u),0);let m=new SortedSet(__PRIVATE_primitiveComparator);return this.Zr.forEachWhile((p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(m=m.add(p.Yr)),!0)}),d),PersistencePromise.resolve(this.ti(m))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){__PRIVATE_hardAssert(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return PersistencePromise.forEach(n.mutations,(o=>{const u=new __PRIVATE_DocReference(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new __PRIVATE_DocReference(n,0),o=this.Zr.firstAfterOrEqual(s);return PersistencePromise.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,PersistencePromise.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryRemoteDocumentCacheImpl{constructor(e){this.ri=e,this.docs=(function(){return new SortedMap(DocumentKey.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,d=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return PersistencePromise.resolve(s?s.document.mutableCopy():MutableDocument.newInvalidDocument(n))}getEntries(e,n){let s=__PRIVATE_mutableDocumentMap();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():MutableDocument.newInvalidDocument(o))})),PersistencePromise.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=__PRIVATE_mutableDocumentMap();const d=n.path,m=new DocumentKey(d.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:b}}=p.getNext();if(!d.isPrefixOf(g.path))break;g.path.length>d.length+1||__PRIVATE_indexOffsetComparator(__PRIVATE_newIndexOffsetFromDocument(b),s)<=0||(o.has(b.key)||__PRIVATE_queryMatches(n,b))&&(u=u.insert(b.key,b.mutableCopy()))}return PersistencePromise.resolve(u)}getAllFromCollectionGroup(e,n,s,o){fail(9500)}ii(e,n){return PersistencePromise.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new __PRIVATE_MemoryRemoteDocumentChangeBuffer(this)}getSize(e){return PersistencePromise.resolve(this.size)}}class __PRIVATE_MemoryRemoteDocumentChangeBuffer extends RemoteDocumentChangeBuffer{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),PersistencePromise.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryTargetCache{constructor(e){this.persistence=e,this.si=new ObjectMap((n=>__PRIVATE_canonifyTarget(n)),__PRIVATE_targetEquals),this.lastRemoteSnapshotVersion=SnapshotVersion.min(),this.highestTargetId=0,this.oi=0,this._i=new __PRIVATE_ReferenceSet,this.targetCount=0,this.ai=__PRIVATE_TargetIdGenerator.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),PersistencePromise.resolve()}getLastRemoteSnapshotVersion(e){return PersistencePromise.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return PersistencePromise.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),PersistencePromise.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),PersistencePromise.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new __PRIVATE_TargetIdGenerator(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,PersistencePromise.resolve()}updateTargetData(e,n){return this.Pr(n),PersistencePromise.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,PersistencePromise.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.si.forEach(((d,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.si.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),PersistencePromise.waitFor(u).next((()=>o))}getTargetCount(e){return PersistencePromise.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return PersistencePromise.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),PersistencePromise.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((d=>{u.push(o.markPotentiallyOrphaned(e,d))})),PersistencePromise.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),PersistencePromise.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return PersistencePromise.resolve(s)}containsKey(e,n){return PersistencePromise.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryPersistence{constructor(e,n){this.ui={},this.overlays={},this.ci=new __PRIVATE_ListenSequence(0),this.li=!1,this.li=!0,this.hi=new __PRIVATE_MemoryGlobalsCache,this.referenceDelegate=e(this),this.Pi=new __PRIVATE_MemoryTargetCache(this),this.indexManager=new __PRIVATE_MemoryIndexManager,this.remoteDocumentCache=(function(o){return new __PRIVATE_MemoryRemoteDocumentCacheImpl(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new __PRIVATE_LocalSerializer(n),this.Ii=new __PRIVATE_MemoryBundleCache(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new __PRIVATE_MemoryDocumentOverlayCache,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new __PRIVATE_MemoryMutationQueue(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){__PRIVATE_logDebug("MemoryPersistence","Starting transaction:",e);const o=new __PRIVATE_MemoryTransaction(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return PersistencePromise.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class __PRIVATE_MemoryTransaction extends PersistenceTransaction{constructor(e){super(),this.currentSequenceNumber=e}}class __PRIVATE_MemoryEagerDelegate{constructor(e){this.persistence=e,this.Ri=new __PRIVATE_ReferenceSet,this.Vi=null}static mi(e){return new __PRIVATE_MemoryEagerDelegate(e)}get fi(){if(this.Vi)return this.Vi;throw fail(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),PersistencePromise.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),PersistencePromise.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),PersistencePromise.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return PersistencePromise.forEach(this.fi,(s=>{const o=DocumentKey.fromPath(s);return this.gi(e,o).next((u=>{u||n.removeEntry(o,SnapshotVersion.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return PersistencePromise.or([()=>PersistencePromise.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class __PRIVATE_MemoryLruDelegate{constructor(e,n){this.persistence=e,this.pi=new ObjectMap((s=>__PRIVATE_encodeResourcePath(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=__PRIVATE_newLruGarbageCollector(this,n)}static mi(e,n){return new __PRIVATE_MemoryLruDelegate(e,n)}Ei(){}di(e){return PersistencePromise.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return PersistencePromise.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?PersistencePromise.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,n).next((m=>{m||(s++,u.removeEntry(d,SnapshotVersion.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),PersistencePromise.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),PersistencePromise.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),PersistencePromise.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),PersistencePromise.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=__PRIVATE_estimateByteSize(e.data.value)),n}br(e,n,s){return PersistencePromise.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return PersistencePromise.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalViewChanges{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=__PRIVATE_documentKeySet(),o=__PRIVATE_documentKeySet();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new __PRIVATE_LocalViewChanges(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QueryContext{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryEngine{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return isSafari()?8:__PRIVATE_getAndroidVersion(getUA())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ys(e,n).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ws(e,n,o,s).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new QueryContext;return this.Ss(e,n,d).next((m=>{if(u.result=m,this.Vs)return this.bs(e,n,d,m.size)}))})).next((()=>u.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","SDK will not create cache indexes for query:",__PRIVATE_stringifyQuery(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),PersistencePromise.resolve()):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Query:",__PRIVATE_stringifyQuery(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","The SDK decides to create cache indexes for query:",__PRIVATE_stringifyQuery(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,__PRIVATE_queryToTarget(n))):PersistencePromise.resolve())}ys(e,n){if(__PRIVATE_queryMatchesAllDocuments(n))return PersistencePromise.resolve(null);let s=__PRIVATE_queryToTarget(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=__PRIVATE_queryWithLimit(n,null,"F"),s=__PRIVATE_queryToTarget(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const d=__PRIVATE_documentKeySet(...u);return this.ps.getDocuments(e,d).next((m=>this.indexManager.getMinOffset(e,s).next((p=>{const g=this.Ds(n,m);return this.Cs(n,g,d,p.readTime)?this.ys(e,__PRIVATE_queryWithLimit(n,null,"F")):this.vs(e,g,n,p)}))))})))))}ws(e,n,s,o){return __PRIVATE_queryMatchesAllDocuments(n)||o.isEqual(SnapshotVersion.min())?PersistencePromise.resolve(null):this.ps.getDocuments(e,s).next((u=>{const d=this.Ds(n,u);return this.Cs(n,d,s,o)?PersistencePromise.resolve(null):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),__PRIVATE_stringifyQuery(n)),this.vs(e,d,n,__PRIVATE_newIndexOffsetSuccessorFromReadTime(o,U$1)).next((m=>m)))}))}Ds(e,n){let s=new SortedSet(__PRIVATE_newQueryComparator(e));return n.forEach(((o,u)=>{__PRIVATE_queryMatches(e,u)&&(s=s.add(u))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return __PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Using full collection scan to execute query:",__PRIVATE_stringifyQuery(n)),this.ps.getDocumentsMatchingQuery(e,n,IndexOffset.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((d=>{u=u.insert(d.key,d)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut="LocalStore",Kt=3e8;class __PRIVATE_LocalStoreImpl{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new SortedMap(__PRIVATE_primitiveComparator),this.xs=new ObjectMap((u=>__PRIVATE_canonifyTarget(u)),__PRIVATE_targetEquals),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LocalDocumentsView(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function __PRIVATE_newLocalStore(r,e,n,s){return new __PRIVATE_LocalStoreImpl(r,e,n,s)}async function __PRIVATE_localStoreHandleUserChange(r,e){const n=__PRIVATE_debugCast(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const d=[],m=[];let p=__PRIVATE_documentKeySet();for(const g of o){d.push(g.batchId);for(const b of g.mutations)p=p.add(b.key)}for(const g of u){m.push(g.batchId);for(const b of g.mutations)p=p.add(b.key)}return n.localDocuments.getDocuments(s,p).next((g=>({Ls:g,removedBatchIds:d,addedBatchIds:m})))}))}))}function __PRIVATE_localStoreGetLastRemoteSnapshotVersion(r){const e=__PRIVATE_debugCast(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function __PRIVATE_localStoreApplyRemoteEventToLocalCache(r,e){const n=__PRIVATE_debugCast(r),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];e.targetChanges.forEach(((b,W)=>{const X=o.get(W);if(!X)return;m.push(n.Pi.removeMatchingKeys(u,b.removedDocuments,W).next((()=>n.Pi.addMatchingKeys(u,b.addedDocuments,W))));let he=X.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(W)!==null?he=he.withResumeToken(ByteString.EMPTY_BYTE_STRING,SnapshotVersion.min()).withLastLimboFreeSnapshotVersion(SnapshotVersion.min()):b.resumeToken.approximateByteSize()>0&&(he=he.withResumeToken(b.resumeToken,s)),o=o.insert(W,he),(function(we,ve,pe){return we.resumeToken.approximateByteSize()===0||ve.snapshotVersion.toMicroseconds()-we.snapshotVersion.toMicroseconds()>=Kt?!0:pe.addedDocuments.size+pe.modifiedDocuments.size+pe.removedDocuments.size>0})(X,he,b)&&m.push(n.Pi.updateTargetData(u,he))}));let p=__PRIVATE_mutableDocumentMap(),g=__PRIVATE_documentKeySet();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,b))})),m.push(__PRIVATE_populateDocumentChangeBuffer(u,d,e.documentUpdates).next((b=>{p=b.ks,g=b.qs}))),!s.isEqual(SnapshotVersion.min())){const b=n.Pi.getLastRemoteSnapshotVersion(u).next((W=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(b)}return PersistencePromise.waitFor(m).next((()=>d.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,p,g))).next((()=>p))})).then((u=>(n.Ms=o,u)))}function __PRIVATE_populateDocumentChangeBuffer(r,e,n){let s=__PRIVATE_documentKeySet(),o=__PRIVATE_documentKeySet();return n.forEach((u=>s=s.add(u))),e.getEntries(r,s).next((u=>{let d=__PRIVATE_mutableDocumentMap();return n.forEach(((m,p)=>{const g=u.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(SnapshotVersion.min())?(e.removeEntry(m,p.readTime),d=d.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),d=d.insert(m,p)):__PRIVATE_logDebug(Ut,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)})),{ks:d,qs:o}}))}function __PRIVATE_localStoreAllocateTarget(r,e){const n=__PRIVATE_debugCast(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((u=>u?(o=u,PersistencePromise.resolve(o)):n.Pi.allocateTargetId(s).next((d=>(o=new TargetData(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function __PRIVATE_localStoreReleaseTarget(r,e,n){const s=__PRIVATE_debugCast(r),o=s.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(d=>s.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!__PRIVATE_isIndexedDbTransactionError(d))throw d;__PRIVATE_logDebug(Ut,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function __PRIVATE_localStoreExecuteQuery(r,e,n){const s=__PRIVATE_debugCast(r);let o=SnapshotVersion.min(),u=__PRIVATE_documentKeySet();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(p,g,b){const W=__PRIVATE_debugCast(p),X=W.xs.get(b);return X!==void 0?PersistencePromise.resolve(W.Ms.get(X)):W.Pi.getTargetData(g,b)})(s,d,__PRIVATE_queryToTarget(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,m.targetId).next((p=>{u=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,e,n?o:SnapshotVersion.min(),n?u:__PRIVATE_documentKeySet()))).next((m=>(__PRIVATE_setMaxReadTime(s,__PRIVATE_queryCollectionGroup(e),m),{documents:m,Qs:u})))))}function __PRIVATE_setMaxReadTime(r,e,n){let s=r.Os.get(e)||SnapshotVersion.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),r.Os.set(e,s)}class __PRIVATE_LocalClientState{constructor(){this.activeTargetIds=__PRIVATE_targetIdSet()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class __PRIVATE_MemorySharedClientState{constructor(){this.Mo=new __PRIVATE_LocalClientState,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new __PRIVATE_LocalClientState,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_NoopConnectivityMonitor{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt="ConnectivityMonitor";class __PRIVATE_BrowserConnectivityMonitor{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){__PRIVATE_logDebug(Jt,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){__PRIVATE_logDebug(Jt,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ht=null;function __PRIVATE_generateUniqueDebugId(){return Ht===null?Ht=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ht++,"0x"+Ht.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt="RestConnection",Zt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class __PRIVATE_RestConnection{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===lt?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,u){const d=__PRIVATE_generateUniqueDebugId(),m=this.zo(e,n.toUriEncodedString());__PRIVATE_logDebug(Yt,`Sending RPC '${e}' ${d}:`,m,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,u);const{host:g}=new URL(m),b=isCloudWorkstation(g);return this.Jo(e,m,p,s,b).then((W=>(__PRIVATE_logDebug(Yt,`Received RPC '${e}' ${d}: `,W),W)),(W=>{throw __PRIVATE_logWarn(Yt,`RPC '${e}' ${d} failed with error: `,W,"url: ",m,"request:",s),W}))}Ho(e,n,s,o,u,d){return this.Go(e,n,s,o,u)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+x})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const s=Zt[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_StreamBridge{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection";class __PRIVATE_WebChannelConnection extends __PRIVATE_RestConnection{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const d=__PRIVATE_generateUniqueDebugId();return new Promise(((m,p)=>{const g=new XhrIo;g.setWithCredentials(!0),g.listenOnce(EventType.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case ErrorCode.NO_ERROR:const W=g.getResponseJson();__PRIVATE_logDebug(Xt,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(W)),m(W);break;case ErrorCode.TIMEOUT:__PRIVATE_logDebug(Xt,`RPC '${e}' ${d} timed out`),p(new FirestoreError(N$1.DEADLINE_EXCEEDED,"Request time out"));break;case ErrorCode.HTTP_ERROR:const X=g.getStatus();if(__PRIVATE_logDebug(Xt,`RPC '${e}' ${d} failed with status:`,X,"response text:",g.getResponseText()),X>0){let he=g.getResponseJson();Array.isArray(he)&&(he=he[0]);const _e=he?.error;if(_e&&_e.status&&_e.message){const we=(function(pe){const Ae=pe.toLowerCase().replace(/_/g,"-");return Object.values(N$1).indexOf(Ae)>=0?Ae:N$1.UNKNOWN})(_e.status);p(new FirestoreError(we,_e.message))}else p(new FirestoreError(N$1.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new FirestoreError(N$1.UNAVAILABLE,"Connection failed."));break;default:fail(9055,{l_:e,streamId:d,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{__PRIVATE_logDebug(Xt,`RPC '${e}' ${d} completed.`)}}));const b=JSON.stringify(o);__PRIVATE_logDebug(Xt,`RPC '${e}' ${d} sending request:`,o),g.send(n,"POST",b,s,15)}))}T_(e,n,s){const o=__PRIVATE_generateUniqueDebugId(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=createWebChannelTransport(),m=getStatEventTarget(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const b=u.join("");__PRIVATE_logDebug(Xt,`Creating RPC '${e}' stream ${o}: ${b}`,p);const W=d.createWebChannel(b,p);this.I_(W);let X=!1,he=!1;const _e=new __PRIVATE_StreamBridge({Yo:ve=>{he?__PRIVATE_logDebug(Xt,`Not sending because RPC '${e}' stream ${o} is closed:`,ve):(X||(__PRIVATE_logDebug(Xt,`Opening RPC '${e}' stream ${o} transport.`),W.open(),X=!0),__PRIVATE_logDebug(Xt,`RPC '${e}' stream ${o} sending:`,ve),W.send(ve))},Zo:()=>W.close()}),we=(ve,pe,Ae)=>{ve.listen(pe,(Re=>{try{Ae(Re)}catch(Pe){setTimeout((()=>{throw Pe}),0)}}))};return we(W,WebChannel.EventType.OPEN,(()=>{he||(__PRIVATE_logDebug(Xt,`RPC '${e}' stream ${o} transport opened.`),_e.o_())})),we(W,WebChannel.EventType.CLOSE,(()=>{he||(he=!0,__PRIVATE_logDebug(Xt,`RPC '${e}' stream ${o} transport closed`),_e.a_(),this.E_(W))})),we(W,WebChannel.EventType.ERROR,(ve=>{he||(he=!0,__PRIVATE_logWarn(Xt,`RPC '${e}' stream ${o} transport errored. Name:`,ve.name,"Message:",ve.message),_e.a_(new FirestoreError(N$1.UNAVAILABLE,"The operation could not be completed")))})),we(W,WebChannel.EventType.MESSAGE,(ve=>{if(!he){const pe=ve.data[0];__PRIVATE_hardAssert(!!pe,16349);const Ae=pe,Re=Ae?.error||Ae[0]?.error;if(Re){__PRIVATE_logDebug(Xt,`RPC '${e}' stream ${o} received error:`,Re);const Pe=Re.status;let Oe=(function(Z){const ee=pt[Z];if(ee!==void 0)return __PRIVATE_mapCodeFromRpcCode(ee)})(Pe),Ve=Re.message;Oe===void 0&&(Oe=N$1.INTERNAL,Ve="Unknown error status: "+Pe+" with message "+Re.message),he=!0,_e.a_(new FirestoreError(Oe,Ve)),W.close()}else __PRIVATE_logDebug(Xt,`RPC '${e}' stream ${o} received:`,pe),_e.u_(pe)}})),we(m,Event.STAT_EVENT,(ve=>{ve.stat===Stat.PROXY?__PRIVATE_logDebug(Xt,`RPC '${e}' stream ${o} detected buffering proxy`):ve.stat===Stat.NOPROXY&&__PRIVATE_logDebug(Xt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{_e.__()}),0),_e}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function getDocument(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newSerializer(r){return new JsonProtoSerializer(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ExponentialBackoff{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&__PRIVATE_logDebug("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="PersistentStream";class __PRIVATE_PersistentStream{constructor(e,n,s,o,u,d,m,p){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new __PRIVATE_ExponentialBackoff(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===N$1.RESOURCE_EXHAUSTED?(__PRIVATE_logError(n.toString()),__PRIVATE_logError("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===N$1.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new FirestoreError(N$1.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return __PRIVATE_logDebug(en,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(__PRIVATE_logDebug(en,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class __PRIVATE_PersistentListenStream extends __PRIVATE_PersistentStream{constructor(e,n,s,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=__PRIVATE_fromWatchChange(this.serializer,e),s=(function(u){if(!("targetChange"in u))return SnapshotVersion.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?SnapshotVersion.min():d.readTime?__PRIVATE_fromVersion(d.readTime):SnapshotVersion.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=__PRIVATE_getEncodedDatabaseId(this.serializer),n.addTarget=(function(u,d){let m;const p=d.target;if(m=__PRIVATE_targetIsDocumentTarget(p)?{documents:__PRIVATE_toDocumentsTarget(u,p)}:{query:__PRIVATE_toQueryTarget(u,p).ft},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=__PRIVATE_toBytes(u,d.resumeToken);const g=__PRIVATE_toInt32Proto(u,d.expectedCount);g!==null&&(m.expectedCount=g)}else if(d.snapshotVersion.compareTo(SnapshotVersion.min())>0){m.readTime=toTimestamp(u,d.snapshotVersion.toTimestamp());const g=__PRIVATE_toInt32Proto(u,d.expectedCount);g!==null&&(m.expectedCount=g)}return m})(this.serializer,e);const s=__PRIVATE_toListenRequestLabels(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=__PRIVATE_getEncodedDatabaseId(this.serializer),n.removeTarget=e,this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Datastore{}class __PRIVATE_DatastoreImpl extends Datastore{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new FirestoreError(N$1.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Go(e,__PRIVATE_toResourcePath(n,s),o,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===N$1.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new FirestoreError(N$1.UNKNOWN,u.toString())}))}Ho(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,m])=>this.connection.Ho(e,__PRIVATE_toResourcePath(n,s),o,d,m,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===N$1.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new FirestoreError(N$1.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class __PRIVATE_OnlineStateTracker{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(__PRIVATE_logError(n),this.aa=!1):__PRIVATE_logDebug("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="RemoteStore";class __PRIVATE_RemoteStoreImpl{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{__PRIVATE_canUseNetwork(this)&&(__PRIVATE_logDebug(tn,"Restarting streams for network reachability change."),await(async function(p){const g=__PRIVATE_debugCast(p);g.Ea.add(4),await __PRIVATE_disableNetworkInternal(g),g.Ra.set("Unknown"),g.Ea.delete(4),await __PRIVATE_enableNetworkInternal(g)})(this))}))})),this.Ra=new __PRIVATE_OnlineStateTracker(s,o)}}async function __PRIVATE_enableNetworkInternal(r){if(__PRIVATE_canUseNetwork(r))for(const e of r.da)await e(!0)}async function __PRIVATE_disableNetworkInternal(r){for(const e of r.da)await e(!1)}function __PRIVATE_remoteStoreListen(r,e){const n=__PRIVATE_debugCast(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),__PRIVATE_shouldStartWatchStream(n)?__PRIVATE_startWatchStream(n):__PRIVATE_ensureWatchStream(n).O_()&&__PRIVATE_sendWatchRequest(n,e))}function __PRIVATE_remoteStoreUnlisten(r,e){const n=__PRIVATE_debugCast(r),s=__PRIVATE_ensureWatchStream(n);n.Ia.delete(e),s.O_()&&__PRIVATE_sendUnwatchRequest(n,e),n.Ia.size===0&&(s.O_()?s.L_():__PRIVATE_canUseNetwork(n)&&n.Ra.set("Unknown"))}function __PRIVATE_sendWatchRequest(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(SnapshotVersion.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}__PRIVATE_ensureWatchStream(r).Y_(e)}function __PRIVATE_sendUnwatchRequest(r,e){r.Va.Ue(e),__PRIVATE_ensureWatchStream(r).Z_(e)}function __PRIVATE_startWatchStream(r){r.Va=new __PRIVATE_WatchChangeAggregator({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),__PRIVATE_ensureWatchStream(r).start(),r.Ra.ua()}function __PRIVATE_shouldStartWatchStream(r){return __PRIVATE_canUseNetwork(r)&&!__PRIVATE_ensureWatchStream(r).x_()&&r.Ia.size>0}function __PRIVATE_canUseNetwork(r){return __PRIVATE_debugCast(r).Ea.size===0}function __PRIVATE_cleanUpWatchStreamState(r){r.Va=void 0}async function __PRIVATE_onWatchStreamConnected(r){r.Ra.set("Online")}async function __PRIVATE_onWatchStreamOpen(r){r.Ia.forEach(((e,n)=>{__PRIVATE_sendWatchRequest(r,e)}))}async function __PRIVATE_onWatchStreamClose(r,e){__PRIVATE_cleanUpWatchStreamState(r),__PRIVATE_shouldStartWatchStream(r)?(r.Ra.ha(e),__PRIVATE_startWatchStream(r)):r.Ra.set("Unknown")}async function __PRIVATE_onWatchStreamChange(r,e,n){if(r.Ra.set("Online"),e instanceof __PRIVATE_WatchTargetChange&&e.state===2&&e.cause)try{await(async function(o,u){const d=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o.Ia.delete(m),o.Va.removeTarget(m))})(r,e)}catch(s){__PRIVATE_logDebug(tn,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await __PRIVATE_disableNetworkUntilRecovery(r,s)}else if(e instanceof __PRIVATE_DocumentWatchChange?r.Va.Ze(e):e instanceof __PRIVATE_ExistenceFilterChange?r.Va.st(e):r.Va.tt(e),!n.isEqual(SnapshotVersion.min()))try{const s=await __PRIVATE_localStoreGetLastRemoteSnapshotVersion(r.localStore);n.compareTo(s)>=0&&await(function(u,d){const m=u.Va.Tt(d);return m.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const b=u.Ia.get(g);b&&u.Ia.set(g,b.withResumeToken(p.resumeToken,d))}})),m.targetMismatches.forEach(((p,g)=>{const b=u.Ia.get(p);if(!b)return;u.Ia.set(p,b.withResumeToken(ByteString.EMPTY_BYTE_STRING,b.snapshotVersion)),__PRIVATE_sendUnwatchRequest(u,p);const W=new TargetData(b.target,p,g,b.sequenceNumber);__PRIVATE_sendWatchRequest(u,W)})),u.remoteSyncer.applyRemoteEvent(m)})(r,n)}catch(s){__PRIVATE_logDebug(tn,"Failed to raise snapshot:",s),await __PRIVATE_disableNetworkUntilRecovery(r,s)}}async function __PRIVATE_disableNetworkUntilRecovery(r,e,n){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;r.Ea.add(1),await __PRIVATE_disableNetworkInternal(r),r.Ra.set("Offline"),n||(n=()=>__PRIVATE_localStoreGetLastRemoteSnapshotVersion(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{__PRIVATE_logDebug(tn,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await __PRIVATE_enableNetworkInternal(r)}))}async function __PRIVATE_remoteStoreHandleCredentialChange(r,e){const n=__PRIVATE_debugCast(r);n.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(tn,"RemoteStore received new credentials");const s=__PRIVATE_canUseNetwork(n);n.Ea.add(3),await __PRIVATE_disableNetworkInternal(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await __PRIVATE_enableNetworkInternal(n)}async function __PRIVATE_remoteStoreApplyPrimaryState(r,e){const n=__PRIVATE_debugCast(r);e?(n.Ea.delete(2),await __PRIVATE_enableNetworkInternal(n)):e||(n.Ea.add(2),await __PRIVATE_disableNetworkInternal(n),n.Ra.set("Unknown"))}function __PRIVATE_ensureWatchStream(r){return r.ma||(r.ma=(function(n,s,o){const u=__PRIVATE_debugCast(n);return u.sa(),new __PRIVATE_PersistentListenStream(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:__PRIVATE_onWatchStreamConnected.bind(null,r),t_:__PRIVATE_onWatchStreamOpen.bind(null,r),r_:__PRIVATE_onWatchStreamClose.bind(null,r),H_:__PRIVATE_onWatchStreamChange.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),__PRIVATE_shouldStartWatchStream(r)?__PRIVATE_startWatchStream(r):r.Ra.set("Unknown")):(await r.ma.stop(),__PRIVATE_cleanUpWatchStreamState(r))}))),r.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DelayedOperation{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new __PRIVATE_Deferred,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const d=Date.now()+s,m=new DelayedOperation(e,n,d,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new FirestoreError(N$1.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function __PRIVATE_wrapInUserErrorIfRecoverable(r,e){if(__PRIVATE_logError("AsyncQueue",`${e}: ${r}`),__PRIVATE_isIndexedDbTransactionError(r))return new FirestoreError(N$1.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSet{static emptySet(e){return new DocumentSet(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||DocumentKey.comparator(n.key,s.key):(n,s)=>DocumentKey.comparator(n.key,s.key),this.keyedMap=documentMap(),this.sortedSet=new SortedMap(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof DocumentSet)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new DocumentSet;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentChangeSet{constructor(){this.ga=new SortedMap(DocumentKey.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):fail(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class ViewSnapshot{constructor(e,n,s,o,u,d,m,p,g){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,n,s,o,u){const d=[];return n.forEach((m=>{d.push({type:0,doc:m})})),new ViewSnapshot(e,n,DocumentSet.emptySet(n),d,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&__PRIVATE_queryEquals(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryListenersInfo{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class __PRIVATE_EventManagerImpl{constructor(){this.queries=__PRIVATE_newQueriesObjectMap(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=__PRIVATE_debugCast(n),u=o.queries;o.queries=__PRIVATE_newQueriesObjectMap(),u.forEach(((d,m)=>{for(const p of m.Sa)p.onError(s)}))})(this,new FirestoreError(N$1.ABORTED,"Firestore shutting down"))}}function __PRIVATE_newQueriesObjectMap(){return new ObjectMap((r=>__PRIVATE_canonifyQuery(r)),__PRIVATE_queryEquals)}async function __PRIVATE_eventManagerListen(r,e){const n=__PRIVATE_debugCast(r);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new __PRIVATE_QueryListenersInfo,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const m=__PRIVATE_wrapInUserErrorIfRecoverable(d,`Initialization of query '${__PRIVATE_stringifyQuery(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&__PRIVATE_raiseSnapshotsInSyncEvent(n)}async function __PRIVATE_eventManagerUnlisten(r,e){const n=__PRIVATE_debugCast(r),s=e.query;let o=3;const u=n.queries.get(s);if(u){const d=u.Sa.indexOf(e);d>=0&&(u.Sa.splice(d,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function __PRIVATE_eventManagerOnWatchChange(r,e){const n=__PRIVATE_debugCast(r);let s=!1;for(const o of e){const u=o.query,d=n.queries.get(u);if(d){for(const m of d.Sa)m.Fa(o)&&(s=!0);d.wa=o}}s&&__PRIVATE_raiseSnapshotsInSyncEvent(n)}function __PRIVATE_eventManagerOnWatchError(r,e,n){const s=__PRIVATE_debugCast(r),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function __PRIVATE_raiseSnapshotsInSyncEvent(r){r.Ca.forEach((e=>{e.next()}))}var nn,rn;(rn=nn||(nn={})).Ma="default",rn.Cache="cache";class __PRIVATE_QueryListener{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new ViewSnapshot(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ViewSnapshot.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==nn.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AddedLimboDocument{constructor(e){this.key=e}}class __PRIVATE_RemovedLimboDocument{constructor(e){this.key=e}}class __PRIVATE_View{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=__PRIVATE_documentKeySet(),this.mutatedKeys=__PRIVATE_documentKeySet(),this.eu=__PRIVATE_newQueryComparator(e),this.tu=new DocumentSet(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new __PRIVATE_DocumentChangeSet,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,d=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((b,W)=>{const X=o.get(b),he=__PRIVATE_queryMatches(this.query,W)?W:null,_e=!!X&&this.mutatedKeys.has(X.key),we=!!he&&(he.hasLocalMutations||this.mutatedKeys.has(he.key)&&he.hasCommittedMutations);let ve=!1;X&&he?X.data.isEqual(he.data)?_e!==we&&(s.track({type:3,doc:he}),ve=!0):this.su(X,he)||(s.track({type:2,doc:he}),ve=!0,(p&&this.eu(he,p)>0||g&&this.eu(he,g)<0)&&(m=!0)):!X&&he?(s.track({type:0,doc:he}),ve=!0):X&&!he&&(s.track({type:1,doc:X}),ve=!0,(p||g)&&(m=!0)),ve&&(he?(d=d.add(he),u=we?u.add(b):u.delete(b)):(d=d.delete(b),u=u.delete(b)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const b=this.query.limitType==="F"?d.last():d.first();d=d.delete(b.key),u=u.delete(b.key),s.track({type:1,doc:b})}return{tu:d,iu:s,Cs:m,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((b,W)=>(function(he,_e){const we=ve=>{switch(ve){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fail(20277,{Rt:ve})}};return we(he)-we(_e)})(b.type,W.type)||this.eu(b.doc,W.doc))),this.ou(s),o=o??!1;const m=n&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,g=p!==this.Za;return this.Za=p,d.length!==0||g?{snapshot:new ViewSnapshot(this.query,e.tu,u,d,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new __PRIVATE_DocumentChangeSet,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=__PRIVATE_documentKeySet(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new __PRIVATE_RemovedLimboDocument(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new __PRIVATE_AddedLimboDocument(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=__PRIVATE_documentKeySet();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ViewSnapshot.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const sn="SyncEngine";class __PRIVATE_QueryView{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class LimboResolution{constructor(e){this.key=e,this.hu=!1}}class __PRIVATE_SyncEngineImpl{constructor(e,n,s,o,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new ObjectMap((m=>__PRIVATE_canonifyQuery(m)),__PRIVATE_queryEquals),this.Iu=new Map,this.Eu=new Set,this.du=new SortedMap(DocumentKey.comparator),this.Au=new Map,this.Ru=new __PRIVATE_ReferenceSet,this.Vu={},this.mu=new Map,this.fu=__PRIVATE_TargetIdGenerator.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function __PRIVATE_syncEngineListen(r,e,n=!0){const s=__PRIVATE_ensureWatchCallbacks(r);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await __PRIVATE_allocateTargetAndMaybeListen(s,e,n,!0),o}async function __PRIVATE_triggerRemoteStoreListen(r,e){const n=__PRIVATE_ensureWatchCallbacks(r);await __PRIVATE_allocateTargetAndMaybeListen(n,e,!0,!1)}async function __PRIVATE_allocateTargetAndMaybeListen(r,e,n,s){const o=await __PRIVATE_localStoreAllocateTarget(r.localStore,__PRIVATE_queryToTarget(e)),u=o.targetId,d=r.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await __PRIVATE_initializeViewAndComputeSnapshot(r,e,u,d==="current",o.resumeToken)),r.isPrimaryClient&&n&&__PRIVATE_remoteStoreListen(r.remoteStore,o),m}async function __PRIVATE_initializeViewAndComputeSnapshot(r,e,n,s,o){r.pu=(W,X,he)=>(async function(we,ve,pe,Ae){let Re=ve.view.ru(pe);Re.Cs&&(Re=await __PRIVATE_localStoreExecuteQuery(we.localStore,ve.query,!1).then((({documents:ie})=>ve.view.ru(ie,Re))));const Pe=Ae&&Ae.targetChanges.get(ve.targetId),Oe=Ae&&Ae.targetMismatches.get(ve.targetId)!=null,Ve=ve.view.applyChanges(Re,we.isPrimaryClient,Pe,Oe);return __PRIVATE_updateTrackedLimbos(we,ve.targetId,Ve.au),Ve.snapshot})(r,W,X,he);const u=await __PRIVATE_localStoreExecuteQuery(r.localStore,e,!0),d=new __PRIVATE_View(e,u.Qs),m=d.ru(u.documents),p=TargetChange.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),g=d.applyChanges(m,r.isPrimaryClient,p);__PRIVATE_updateTrackedLimbos(r,n,g.au);const b=new __PRIVATE_QueryView(e,n,d);return r.Tu.set(e,b),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),g.snapshot}async function __PRIVATE_syncEngineUnlisten(r,e,n){const s=__PRIVATE_debugCast(r),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((d=>!__PRIVATE_queryEquals(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await __PRIVATE_localStoreReleaseTarget(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&__PRIVATE_remoteStoreUnlisten(s.remoteStore,o.targetId),__PRIVATE_removeAndCleanupTarget(s,o.targetId)})).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)):(__PRIVATE_removeAndCleanupTarget(s,o.targetId),await __PRIVATE_localStoreReleaseTarget(s.localStore,o.targetId,!0))}async function __PRIVATE_triggerRemoteStoreUnlisten(r,e){const n=__PRIVATE_debugCast(r),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),__PRIVATE_remoteStoreUnlisten(n.remoteStore,s.targetId))}async function __PRIVATE_syncEngineApplyRemoteEvent(r,e){const n=__PRIVATE_debugCast(r);try{const s=await __PRIVATE_localStoreApplyRemoteEventToLocalCache(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const d=n.Au.get(u);d&&(__PRIVATE_hardAssert(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?__PRIVATE_hardAssert(d.hu,14607):o.removedDocuments.size>0&&(__PRIVATE_hardAssert(d.hu,42227),d.hu=!1))})),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(n,s,e)}catch(s){await __PRIVATE_ignoreIfPrimaryLeaseLoss(s)}}function __PRIVATE_syncEngineApplyOnlineStateChange(r,e,n){const s=__PRIVATE_debugCast(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,d)=>{const m=d.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(d,m){const p=__PRIVATE_debugCast(d);p.onlineState=m;let g=!1;p.queries.forEach(((b,W)=>{for(const X of W.Sa)X.va(m)&&(g=!0)})),g&&__PRIVATE_raiseSnapshotsInSyncEvent(p)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function __PRIVATE_syncEngineRejectListen(r,e,n){const s=__PRIVATE_debugCast(r);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let d=new SortedMap(DocumentKey.comparator);d=d.insert(u,MutableDocument.newNoDocument(u,SnapshotVersion.min()));const m=__PRIVATE_documentKeySet().add(u),p=new RemoteEvent(SnapshotVersion.min(),new Map,new SortedMap(__PRIVATE_primitiveComparator),d,m);await __PRIVATE_syncEngineApplyRemoteEvent(s,p),s.du=s.du.remove(u),s.Au.delete(e),__PRIVATE_pumpEnqueuedLimboResolutions(s)}else await __PRIVATE_localStoreReleaseTarget(s.localStore,e,!1).then((()=>__PRIVATE_removeAndCleanupTarget(s,e,n))).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)}function __PRIVATE_removeAndCleanupTarget(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||__PRIVATE_removeLimboTarget(r,s)}))}function __PRIVATE_removeLimboTarget(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(__PRIVATE_remoteStoreUnlisten(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),__PRIVATE_pumpEnqueuedLimboResolutions(r))}function __PRIVATE_updateTrackedLimbos(r,e,n){for(const s of n)s instanceof __PRIVATE_AddedLimboDocument?(r.Ru.addReference(s.key,e),__PRIVATE_trackLimboChange(r,s)):s instanceof __PRIVATE_RemovedLimboDocument?(__PRIVATE_logDebug(sn,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||__PRIVATE_removeLimboTarget(r,s.key)):fail(19791,{wu:s})}function __PRIVATE_trackLimboChange(r,e){const n=e.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(__PRIVATE_logDebug(sn,"New document in limbo: "+n),r.Eu.add(s),__PRIVATE_pumpEnqueuedLimboResolutions(r))}function __PRIVATE_pumpEnqueuedLimboResolutions(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new DocumentKey(ResourcePath.fromString(e)),s=r.fu.next();r.Au.set(s,new LimboResolution(n)),r.du=r.du.insert(n,s),__PRIVATE_remoteStoreListen(r.remoteStore,new TargetData(__PRIVATE_queryToTarget(__PRIVATE_newQueryForPath(n.path)),s,"TargetPurposeLimboResolution",__PRIVATE_ListenSequence.ce))}}async function __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(r,e,n){const s=__PRIVATE_debugCast(r),o=[],u=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,p)=>{d.push(s.pu(p,e,n).then((g=>{if((g||n)&&s.isPrimaryClient){const b=g?!g.fromCache:n?.targetChanges.get(p.targetId)?.current;s.sharedClientState.updateQueryState(p.targetId,b?"current":"not-current")}if(g){o.push(g);const b=__PRIVATE_LocalViewChanges.As(p.targetId,g);u.push(b)}})))})),await Promise.all(d),s.Pu.H_(o),await(async function(p,g){const b=__PRIVATE_debugCast(p);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(W=>PersistencePromise.forEach(g,(X=>PersistencePromise.forEach(X.Es,(he=>b.persistence.referenceDelegate.addReference(W,X.targetId,he))).next((()=>PersistencePromise.forEach(X.ds,(he=>b.persistence.referenceDelegate.removeReference(W,X.targetId,he)))))))))}catch(W){if(!__PRIVATE_isIndexedDbTransactionError(W))throw W;__PRIVATE_logDebug(Ut,"Failed to update sequence numbers: "+W)}for(const W of g){const X=W.targetId;if(!W.fromCache){const he=b.Ms.get(X),_e=he.snapshotVersion,we=he.withLastLimboFreeSnapshotVersion(_e);b.Ms=b.Ms.insert(X,we)}}})(s.localStore,u))}async function __PRIVATE_syncEngineHandleCredentialChange(r,e){const n=__PRIVATE_debugCast(r);if(!n.currentUser.isEqual(e)){__PRIVATE_logDebug(sn,"User change. New user:",e.toKey());const s=await __PRIVATE_localStoreHandleUserChange(n.localStore,e);n.currentUser=e,(function(u,d){u.mu.forEach((m=>{m.forEach((p=>{p.reject(new FirestoreError(N$1.CANCELLED,d))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(n,s.Ls)}}function __PRIVATE_syncEngineGetRemoteKeysForTarget(r,e){const n=__PRIVATE_debugCast(r),s=n.Au.get(e);if(s&&s.hu)return __PRIVATE_documentKeySet().add(s.key);{let o=__PRIVATE_documentKeySet();const u=n.Iu.get(e);if(!u)return o;for(const d of u){const m=n.Tu.get(d);o=o.unionWith(m.view.nu)}return o}}function __PRIVATE_ensureWatchCallbacks(r){const e=__PRIVATE_debugCast(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=__PRIVATE_syncEngineApplyRemoteEvent.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=__PRIVATE_syncEngineGetRemoteKeysForTarget.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=__PRIVATE_syncEngineRejectListen.bind(null,e),e.Pu.H_=__PRIVATE_eventManagerOnWatchChange.bind(null,e.eventManager),e.Pu.yu=__PRIVATE_eventManagerOnWatchError.bind(null,e.eventManager),e}class __PRIVATE_MemoryOfflineComponentProvider{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=__PRIVATE_newSerializer(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return __PRIVATE_newLocalStore(this.persistence,new __PRIVATE_QueryEngine,e.initialUser,this.serializer)}Cu(e){return new __PRIVATE_MemoryPersistence(__PRIVATE_MemoryEagerDelegate.mi,this.serializer)}Du(e){return new __PRIVATE_MemorySharedClientState}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}__PRIVATE_MemoryOfflineComponentProvider.provider={build:()=>new __PRIVATE_MemoryOfflineComponentProvider};class __PRIVATE_LruGcMemoryOfflineComponentProvider extends __PRIVATE_MemoryOfflineComponentProvider{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){__PRIVATE_hardAssert(this.persistence.referenceDelegate instanceof __PRIVATE_MemoryLruDelegate,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new __PRIVATE_LruScheduler(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?LruParams.withCacheSize(this.cacheSizeBytes):LruParams.DEFAULT;return new __PRIVATE_MemoryPersistence((s=>__PRIVATE_MemoryLruDelegate.mi(s,n)),this.serializer)}}class OnlineComponentProvider{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=__PRIVATE_syncEngineHandleCredentialChange.bind(null,this.syncEngine),await __PRIVATE_remoteStoreApplyPrimaryState(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new __PRIVATE_EventManagerImpl})()}createDatastore(e){const n=__PRIVATE_newSerializer(e.databaseInfo.databaseId),s=(function(u){return new __PRIVATE_WebChannelConnection(u)})(e.databaseInfo);return(function(u,d,m,p){return new __PRIVATE_DatastoreImpl(u,d,m,p)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,d,m){return new __PRIVATE_RemoteStoreImpl(s,o,u,d,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,n,0)),(function(){return __PRIVATE_BrowserConnectivityMonitor.v()?new __PRIVATE_BrowserConnectivityMonitor:new __PRIVATE_NoopConnectivityMonitor})())}createSyncEngine(e,n){return(function(o,u,d,m,p,g,b){const W=new __PRIVATE_SyncEngineImpl(o,u,d,m,p,g);return b&&(W.gu=!0),W})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=__PRIVATE_debugCast(n);__PRIVATE_logDebug(tn,"RemoteStore shutting down."),s.Ea.add(5),await __PRIVATE_disableNetworkInternal(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}OnlineComponentProvider.provider={build:()=>new OnlineComponentProvider};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AsyncObserver{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):__PRIVATE_logError("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="FirestoreClient";class FirestoreClient{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=User.UNAUTHENTICATED,this.clientId=__PRIVATE_AutoId.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async d=>{__PRIVATE_logDebug(on,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(__PRIVATE_logDebug(on,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new __PRIVATE_Deferred;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=__PRIVATE_wrapInUserErrorIfRecoverable(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function __PRIVATE_setOfflineComponentProvider(r,e){r.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(on,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await __PRIVATE_localStoreHandleUserChange(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function __PRIVATE_setOnlineComponentProvider(r,e){r.asyncQueue.verifyOperationInProgress();const n=await __PRIVATE_ensureOfflineComponents(r);__PRIVATE_logDebug(on,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((s=>__PRIVATE_remoteStoreHandleCredentialChange(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>__PRIVATE_remoteStoreHandleCredentialChange(e.remoteStore,o))),r._onlineComponents=e}async function __PRIVATE_ensureOfflineComponents(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){__PRIVATE_logDebug(on,"Using user provided OfflineComponentProvider");try{await __PRIVATE_setOfflineComponentProvider(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===N$1.FAILED_PRECONDITION||o.code===N$1.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;__PRIVATE_logWarn("Error using user provided cache. Falling back to memory cache: "+n),await __PRIVATE_setOfflineComponentProvider(r,new __PRIVATE_MemoryOfflineComponentProvider)}}else __PRIVATE_logDebug(on,"Using default OfflineComponentProvider"),await __PRIVATE_setOfflineComponentProvider(r,new __PRIVATE_LruGcMemoryOfflineComponentProvider(void 0));return r._offlineComponents}async function __PRIVATE_ensureOnlineComponents(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(__PRIVATE_logDebug(on,"Using user provided OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(r,r._uninitializedComponentsProvider._online)):(__PRIVATE_logDebug(on,"Using default OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(r,new OnlineComponentProvider))),r._onlineComponents}async function __PRIVATE_getEventManager(r){const e=await __PRIVATE_ensureOnlineComponents(r),n=e.eventManager;return n.onListen=__PRIVATE_syncEngineListen.bind(null,e.syncEngine),n.onUnlisten=__PRIVATE_syncEngineUnlisten.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=__PRIVATE_triggerRemoteStoreListen.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=__PRIVATE_triggerRemoteStoreUnlisten.bind(null,e.syncEngine),n}function __PRIVATE_firestoreClientGetDocumentsViaSnapshotListener(r,e,n={}){const s=new __PRIVATE_Deferred;return r.asyncQueue.enqueueAndForget((async()=>(function(u,d,m,p,g){const b=new __PRIVATE_AsyncObserver({next:X=>{b.Nu(),d.enqueueAndForget((()=>__PRIVATE_eventManagerUnlisten(u,W))),X.fromCache&&p.source==="server"?g.reject(new FirestoreError(N$1.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(X)},error:X=>g.reject(X)}),W=new __PRIVATE_QueryListener(m,b,{includeMetadataChanges:!0,qa:!0});return __PRIVATE_eventManagerListen(u,W)})(await __PRIVATE_getEventManager(r),r.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_cloneLongPollingOptions(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="firestore.googleapis.com",un=!0;class FirestoreSettingsImpl{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=an,this.ssl=un}else this.host=e.host,this.ssl=e.ssl??un;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ot;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Bt)throw new FirestoreError(N$1.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}__PRIVATE_validateIsNotUsedTogether("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=__PRIVATE_cloneLongPollingOptions(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new FirestoreError(N$1.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new FirestoreError(N$1.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new FirestoreError(N$1.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Firestore$1{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FirestoreSettingsImpl({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new FirestoreError(N$1.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new FirestoreError(N$1.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FirestoreSettingsImpl(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new __PRIVATE_EmptyAuthCredentialsProvider;switch(s.type){case"firstParty":return new __PRIVATE_FirstPartyAuthCredentialsProvider(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new FirestoreError(N$1.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=_n.get(n);s&&(__PRIVATE_logDebug("ComponentProvider","Removing Datastore"),_n.delete(n),s.terminate())})(this),Promise.resolve()}}function connectFirestoreEmulator(r,e,n,s={}){r=__PRIVATE_cast(r,Firestore$1);const o=isCloudWorkstation(e),u=r._getSettings(),d={...u,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${n}`;o&&(pingServer(`https://${m}`),updateEmulatorBanner("Firestore",!0)),u.host!==an&&u.host!==m&&__PRIVATE_logWarn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:m,ssl:o,emulatorOptions:s};if(!deepEqual(p,d)&&(r._setSettings(p),s.mockUserToken)){let g,b;if(typeof s.mockUserToken=="string")g=s.mockUserToken,b=User.MOCK_USER;else{g=createMockUserToken(s.mockUserToken,r._app?.options.projectId);const W=s.mockUserToken.sub||s.mockUserToken.user_id;if(!W)throw new FirestoreError(N$1.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new User(W)}r._authCredentials=new __PRIVATE_EmulatorAuthCredentialsProvider(new __PRIVATE_OAuthToken(g,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Query{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Query(this.firestore,e,this._query)}}class DocumentReference{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new CollectionReference(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new DocumentReference(this.firestore,e,this._key)}toJSON(){return{type:DocumentReference._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(__PRIVATE_validateJSON(n,DocumentReference._jsonSchema))return new DocumentReference(e,s||null,new DocumentKey(ResourcePath.fromString(n.referencePath)))}}DocumentReference._jsonSchemaVersion="firestore/documentReference/1.0",DocumentReference._jsonSchema={type:property("string",DocumentReference._jsonSchemaVersion),referencePath:property("string")};class CollectionReference extends Query{constructor(e,n,s){super(e,n,__PRIVATE_newQueryForPath(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new DocumentReference(this.firestore,null,new DocumentKey(e))}withConverter(e){return new CollectionReference(this.firestore,e,this._path)}}function collection(r,e,...n){if(r=getModularInstance(r),r instanceof Firestore$1){const s=ResourcePath.fromString(e,...n);return __PRIVATE_validateCollectionPath(s),new CollectionReference(r,null,s)}{if(!(r instanceof DocumentReference||r instanceof CollectionReference))throw new FirestoreError(N$1.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ResourcePath.fromString(e,...n));return __PRIVATE_validateCollectionPath(s),new CollectionReference(r.firestore,null,s)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn="AsyncQueue";class __PRIVATE_AsyncQueueImpl{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new __PRIVATE_ExponentialBackoff(this,"async_queue_retry"),this._c=()=>{const s=getDocument();s&&__PRIVATE_logDebug(cn,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=getDocument();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=getDocument();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new __PRIVATE_Deferred;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;__PRIVATE_logDebug(cn,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,__PRIVATE_logError("INTERNAL UNHANDLED ERROR: ",__PRIVATE_getMessageOrStack(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=DelayedOperation.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&fail(47125,{Pc:__PRIVATE_getMessageOrStack(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function __PRIVATE_getMessageOrStack(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Firestore extends Firestore$1{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new __PRIVATE_AsyncQueueImpl,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new __PRIVATE_AsyncQueueImpl(e),this._firestoreClient=void 0,await e}}}function getFirestore(r,e){const n=typeof r=="object"?r:getApp(),s=typeof r=="string"?r:lt,o=_getProvider(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=getDefaultEmulatorHostnameAndPort("firestore");u&&connectFirestoreEmulator(o,...u)}return o}function ensureFirestoreConfigured(r){if(r._terminated)throw new FirestoreError(N$1.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||__PRIVATE_configureFirestore(r),r._firestoreClient}function __PRIVATE_configureFirestore(r){const e=r._freezeSettings(),n=(function(o,u,d,m){return new DatabaseInfo(o,u,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,__PRIVATE_cloneLongPollingOptions(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new FirestoreClient(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bytes{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bytes(ByteString.fromBase64String(e))}catch(n){throw new FirestoreError(N$1.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Bytes(ByteString.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Bytes._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(__PRIVATE_validateJSON(e,Bytes._jsonSchema))return Bytes.fromBase64String(e.bytes)}}Bytes._jsonSchemaVersion="firestore/bytes/1.0",Bytes._jsonSchema={type:property("string",Bytes._jsonSchemaVersion),bytes:property("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldPath{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new FieldPath$1(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function documentId(){return new FieldPath(k)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldValue{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GeoPoint{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return __PRIVATE_primitiveComparator(this._lat,e._lat)||__PRIVATE_primitiveComparator(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:GeoPoint._jsonSchemaVersion}}static fromJSON(e){if(__PRIVATE_validateJSON(e,GeoPoint._jsonSchema))return new GeoPoint(e.latitude,e.longitude)}}GeoPoint._jsonSchemaVersion="firestore/geoPoint/1.0",GeoPoint._jsonSchema={type:property("string",GeoPoint._jsonSchemaVersion),latitude:property("number"),longitude:property("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VectorValue{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:VectorValue._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(__PRIVATE_validateJSON(e,VectorValue._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new VectorValue(e.vectorValues);throw new FirestoreError(N$1.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}VectorValue._jsonSchemaVersion="firestore/vectorValue/1.0",VectorValue._jsonSchema={type:property("string",VectorValue._jsonSchemaVersion),vectorValues:property("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn=/^__.*__$/;function __PRIVATE_isWrite(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fail(40011,{Ac:r})}}class __PRIVATE_ParseContextImpl{constructor(e,n,s,o,u,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new __PRIVATE_ParseContextImpl({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return __PRIVATE_createError(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(__PRIVATE_isWrite(this.Ac)&&hn.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class __PRIVATE_UserDataReader{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||__PRIVATE_newSerializer(e)}Cc(e,n,s,o=!1){return new __PRIVATE_ParseContextImpl({Ac:e,methodName:n,Dc:s,path:FieldPath$1.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function __PRIVATE_newUserDataReader(r){const e=r._freezeSettings(),n=__PRIVATE_newSerializer(r._databaseId);return new __PRIVATE_UserDataReader(r._databaseId,!!e.ignoreUndefinedProperties,n)}function __PRIVATE_parseQueryValue(r,e,n,s=!1){return __PRIVATE_parseData(n,r.Cc(s?4:3,e))}function __PRIVATE_parseData(r,e){if(__PRIVATE_looksLikeJsonObject(r=getModularInstance(r)))return __PRIVATE_validatePlainObject("Unsupported field value:",e,r),__PRIVATE_parseObject(r,e);if(r instanceof FieldValue)return(function(s,o){if(!__PRIVATE_isWrite(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let d=0;for(const m of s){let p=__PRIVATE_parseData(m,o.wc(d));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),d++}return{arrayValue:{values:u}}})(r,e)}return(function(s,o){if((s=getModularInstance(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return toNumber(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Timestamp.fromDate(s);return{timestampValue:toTimestamp(o.serializer,u)}}if(s instanceof Timestamp){const u=new Timestamp(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:toTimestamp(o.serializer,u)}}if(s instanceof GeoPoint)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Bytes)return{bytesValue:__PRIVATE_toBytes(o.serializer,s._byteString)};if(s instanceof DocumentReference){const u=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(u))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:__PRIVATE_toResourceName(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof VectorValue)return(function(d,m){return{mapValue:{fields:{[ht]:{stringValue:It},[Et]:{arrayValue:{values:d.toArray().map((g=>{if(typeof g!="number")throw m.Sc("VectorValues must only contain numeric values.");return __PRIVATE_toDouble(m.serializer,g)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${__PRIVATE_valueDescription(s)}`)})(r,e)}function __PRIVATE_parseObject(r,e){const n={};return isEmpty(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):forEach(r,((s,o)=>{const u=__PRIVATE_parseData(o,e.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function __PRIVATE_looksLikeJsonObject(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Timestamp||r instanceof GeoPoint||r instanceof Bytes||r instanceof DocumentReference||r instanceof FieldValue||r instanceof VectorValue)}function __PRIVATE_validatePlainObject(r,e,n){if(!__PRIVATE_looksLikeJsonObject(n)||!__PRIVATE_isPlainObject(n)){const s=__PRIVATE_valueDescription(n);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}const Pn=new RegExp("[~\\*/\\[\\]]");function __PRIVATE_fieldPathFromDotSeparatedString(r,e,n){if(e.search(Pn)>=0)throw __PRIVATE_createError(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new FieldPath(...e.split("."))._internalPath}catch{throw __PRIVATE_createError(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function __PRIVATE_createError(r,e,n,s,o){const u=s&&!s.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||d)&&(p+=" (found",u&&(p+=` in field ${s}`),d&&(p+=` in document ${o}`),p+=")"),new FirestoreError(N$1.INVALID_ARGUMENT,m+r+p)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSnapshot$1{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new DocumentReference(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QueryDocumentSnapshot$1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class QueryDocumentSnapshot$1 extends DocumentSnapshot$1{data(){return super.data()}}function __PRIVATE_fieldPathFromArgument(r,e){return typeof e=="string"?__PRIVATE_fieldPathFromDotSeparatedString(r,e):e instanceof FieldPath?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateHasExplicitOrderByForLimitToLast(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new FirestoreError(N$1.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class AppliableConstraint{}class QueryConstraint extends AppliableConstraint{}function query(r,e,...n){let s=[];e instanceof AppliableConstraint&&s.push(e),s=s.concat(n),(function(u){const d=u.filter((p=>p instanceof QueryCompositeFilterConstraint)).length,m=u.filter((p=>p instanceof QueryFieldFilterConstraint)).length;if(d>1||d>0&&m>0)throw new FirestoreError(N$1.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class QueryFieldFilterConstraint extends QueryConstraint{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new QueryFieldFilterConstraint(e,n,s)}_apply(e){const n=this._parse(e);return __PRIVATE_validateNewFieldFilter(e._query,n),new Query(e.firestore,e.converter,__PRIVATE_queryWithAddedFilter(e._query,n))}_parse(e){const n=__PRIVATE_newUserDataReader(e.firestore);return(function(u,d,m,p,g,b,W){let X;if(g.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){__PRIVATE_validateDisjunctiveFilterElements(W,b);const _e=[];for(const we of W)_e.push(__PRIVATE_parseDocumentIdValue(p,u,we));X={arrayValue:{values:_e}}}else X=__PRIVATE_parseDocumentIdValue(p,u,W)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||__PRIVATE_validateDisjunctiveFilterElements(W,b),X=__PRIVATE_parseQueryValue(m,d,W,b==="in"||b==="not-in");return FieldFilter.create(g,b,X)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function where(r,e,n){const s=e,o=__PRIVATE_fieldPathFromArgument("where",r);return QueryFieldFilterConstraint._create(o,s,n)}class QueryCompositeFilterConstraint extends AppliableConstraint{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new QueryCompositeFilterConstraint(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:CompositeFilter.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let d=o;const m=u.getFlattenedFilters();for(const p of m)__PRIVATE_validateNewFieldFilter(d,p),d=__PRIVATE_queryWithAddedFilter(d,p)})(e._query,n),new Query(e.firestore,e.converter,__PRIVATE_queryWithAddedFilter(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class QueryLimitConstraint extends QueryConstraint{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new QueryLimitConstraint(e,n,s)}_apply(e){return new Query(e.firestore,e.converter,__PRIVATE_queryWithLimit(e._query,this._limit,this._limitType))}}function limit(r){return __PRIVATE_validatePositiveNumber("limit",r),QueryLimitConstraint._create("limit",r,"F")}function __PRIVATE_parseDocumentIdValue(r,e,n){if(typeof(n=getModularInstance(n))=="string"){if(n==="")throw new FirestoreError(N$1.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!__PRIVATE_isCollectionGroupQuery(e)&&n.indexOf("/")!==-1)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(ResourcePath.fromString(n));if(!DocumentKey.isDocumentKey(s))throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return __PRIVATE_refValue(r,new DocumentKey(s))}if(n instanceof DocumentReference)return __PRIVATE_refValue(r,n._key);throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${__PRIVATE_valueDescription(n)}.`)}function __PRIVATE_validateDisjunctiveFilterElements(r,e){if(!Array.isArray(r)||r.length===0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function __PRIVATE_validateNewFieldFilter(r,e){const n=(function(o,u){for(const d of o)for(const m of d.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class AbstractUserDataWriter{convertValue(e,n="none"){switch(__PRIVATE_typeOrder(e)){case 0:return null;case 1:return e.booleanValue;case 2:return __PRIVATE_normalizeNumber(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(__PRIVATE_normalizeByteString(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw fail(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return forEach(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){const n=e.fields?.[Et].arrayValue?.values?.map((s=>__PRIVATE_normalizeNumber(s.doubleValue)));return new VectorValue(n)}convertGeoPoint(e){return new GeoPoint(__PRIVATE_normalizeNumber(e.latitude),__PRIVATE_normalizeNumber(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=__PRIVATE_getPreviousValue(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(__PRIVATE_getLocalWriteTime(e));default:return null}}convertTimestamp(e){const n=__PRIVATE_normalizeTimestamp(e);return new Timestamp(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=ResourcePath.fromString(e);__PRIVATE_hardAssert(__PRIVATE_isValidResourceName(s),9688,{name:e});const o=new DatabaseId(s.get(1),s.get(3)),u=new DocumentKey(s.popFirst(5));return o.isEqual(n)||__PRIVATE_logError(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}class SnapshotMetadata{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class DocumentSnapshot extends DocumentSnapshot$1{constructor(e,n,s,o,u,d){super(e,n,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new QueryDocumentSnapshot(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new FirestoreError(N$1.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=DocumentSnapshot._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}DocumentSnapshot._jsonSchemaVersion="firestore/documentSnapshot/1.0",DocumentSnapshot._jsonSchema={type:property("string",DocumentSnapshot._jsonSchemaVersion),bundleSource:property("string","DocumentSnapshot"),bundleName:property("string"),bundle:property("string")};class QueryDocumentSnapshot extends DocumentSnapshot{data(e={}){return super.data(e)}}class QuerySnapshot{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new SnapshotMetadata(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new QueryDocumentSnapshot(this._firestore,this._userDataWriter,s.key,s,new SnapshotMetadata(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new FirestoreError(N$1.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((m=>{const p=new QueryDocumentSnapshot(o._firestore,o._userDataWriter,m.doc.key,m.doc,new SnapshotMetadata(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const p=new QueryDocumentSnapshot(o._firestore,o._userDataWriter,m.doc.key,m.doc,new SnapshotMetadata(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,b=-1;return m.type!==0&&(g=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),b=d.indexOf(m.doc.key)),{type:__PRIVATE_resultChangeType(m.type),doc:p,oldIndex:g,newIndex:b}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new FirestoreError(N$1.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=QuerySnapshot._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=__PRIVATE_AutoId.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function __PRIVATE_resultChangeType(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fail(61501,{type:r})}}QuerySnapshot._jsonSchemaVersion="firestore/querySnapshot/1.0",QuerySnapshot._jsonSchema={type:property("string",QuerySnapshot._jsonSchemaVersion),bundleSource:property("string","QuerySnapshot"),bundleName:property("string"),bundle:property("string")};class __PRIVATE_ExpUserDataWriter extends AbstractUserDataWriter{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bytes(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new DocumentReference(this.firestore,null,n)}}function getDocs(r){r=__PRIVATE_cast(r,Query);const e=__PRIVATE_cast(r.firestore,Firestore),n=ensureFirestoreConfigured(e),s=new __PRIVATE_ExpUserDataWriter(e);return __PRIVATE_validateHasExplicitOrderByForLimitToLast(r._query),__PRIVATE_firestoreClientGetDocumentsViaSnapshotListener(n,r._query).then((o=>new QuerySnapshot(e,s,r,o)))}(function(e,n=!0){(function(o){x=o})(SDK_VERSION),_registerComponent(new Component("firestore",((s,{instanceIdentifier:o,options:u})=>{const d=s.getProvider("app").getImmediate(),m=new Firestore(new __PRIVATE_FirebaseAuthCredentialsProvider(s.getProvider("auth-internal")),new __PRIVATE_FirebaseAppCheckTokenProvider(d,s.getProvider("app-check-internal")),(function(g,b){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new FirestoreError(N$1.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new DatabaseId(g.options.projectId,b)})(d,o),d);return u={useFetchStreams:n,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),registerVersion(F$1,M$1,e),registerVersion(F$1,M$1,"esm2020")})();function _prodErrorMap(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const prodErrorMap=_prodErrorMap,_DEFAULT_AUTH_ERROR_FACTORY=new ErrorFactory("auth","Firebase",_prodErrorMap());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logClient=new Logger("@firebase/auth");function _logWarn(r,...e){logClient.logLevel<=LogLevel.WARN&&logClient.warn(`Auth (${SDK_VERSION}): ${r}`,...e)}function _logError(r,...e){logClient.logLevel<=LogLevel.ERROR&&logClient.error(`Auth (${SDK_VERSION}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _fail(r,...e){throw createErrorInternal(r,...e)}function _createError(r,...e){return createErrorInternal(r,...e)}function _errorWithCustomMessage(r,e,n){const s={...prodErrorMap(),[e]:n};return new ErrorFactory("auth","Firebase",s).create(e,{appName:r.name})}function _serverAppCurrentUserOperationNotSupportedError(r){return _errorWithCustomMessage(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function createErrorInternal(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return _DEFAULT_AUTH_ERROR_FACTORY.create(r,...e)}function _assert(r,e,...n){if(!r)throw createErrorInternal(e,...n)}function debugFail(r){const e="INTERNAL ASSERTION FAILED: "+r;throw _logError(e),new Error(e)}function debugAssert(r,e){r||debugFail(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getCurrentUrl(){return typeof self<"u"&&self.location?.href||""}function _isHttpOrHttps(){return _getCurrentScheme()==="http:"||_getCurrentScheme()==="https:"}function _getCurrentScheme(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isOnline(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_isHttpOrHttps()||isBrowserExtension()||"connection"in navigator)?navigator.onLine:!0}function _getUserLanguage(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Delay{constructor(e,n){this.shortDelay=e,this.longDelay=n,debugAssert(n>e,"Short delay should be less than long delay!"),this.isMobile=isMobileCordova()||isReactNative()}get(){return _isOnline()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _emulatorUrl(r,e){debugAssert(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FetchProvider{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;debugFail("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;debugFail("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;debugFail("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SERVER_ERROR_MAP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CookieAuthProxiedEndpoints=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DEFAULT_API_TIMEOUT_MS=new Delay(3e4,6e4);function _addTidIfNecessary(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function _performApiRequest(r,e,n,s,o={}){return _performFetchWithErrorHandling(r,o,async()=>{let u={},d={};s&&(e==="GET"?d=s:u={body:JSON.stringify(s)});const m=querystring({key:r.config.apiKey,...d}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const g={method:e,headers:p,...u};return isCloudflareWorker()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&isCloudWorkstation(r.emulatorConfig.host)&&(g.credentials="include"),FetchProvider.fetch()(await _getFinalTarget(r,r.config.apiHost,n,m),g)})}async function _performFetchWithErrorHandling(r,e,n){r._canInitEmulator=!1;const s={...SERVER_ERROR_MAP,...e};try{const o=new NetworkTimeout(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw _makeTaggedError(r,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const m=u.ok?d.errorMessage:d.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw _makeTaggedError(r,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw _makeTaggedError(r,"email-already-in-use",d);if(p==="USER_DISABLED")throw _makeTaggedError(r,"user-disabled",d);const b=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw _errorWithCustomMessage(r,b,g);_fail(r,b)}}catch(o){if(o instanceof FirebaseError)throw o;_fail(r,"network-request-failed",{message:String(o)})}}async function _performSignInRequest(r,e,n,s,o={}){const u=await _performApiRequest(r,e,n,s,o);return"mfaPendingCredential"in u&&_fail(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function _getFinalTarget(r,e,n,s){const o=`${e}${n}?${s}`,u=r,d=u.config.emulator?_emulatorUrl(r.config,o):`${r.config.apiScheme}://${o}`;return CookieAuthProxiedEndpoints.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function _parseEnforcementState(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class NetworkTimeout{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(_createError(this.auth,"network-request-failed")),DEFAULT_API_TIMEOUT_MS.get())})}}function _makeTaggedError(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=_createError(r,e,s);return o.customData._tokenResponse=n,o}function isEnterprise(r){return r!==void 0&&r.enterprise!==void 0}class RecaptchaConfig{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return _parseEnforcementState(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function getRecaptchaConfig(r,e){return _performApiRequest(r,"GET","/v2/recaptchaConfig",_addTidIfNecessary(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function deleteAccount(r,e){return _performApiRequest(r,"POST","/v1/accounts:delete",e)}async function getAccountInfo(r,e){return _performApiRequest(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function utcTimestampToDateString(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function getIdTokenResult(r,e=!1){const n=getModularInstance(r),s=await n.getIdToken(e),o=_parseToken(s);_assert(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u?.sign_in_provider;return{claims:o,token:s,authTime:utcTimestampToDateString(secondsStringToMilliseconds(o.auth_time)),issuedAtTime:utcTimestampToDateString(secondsStringToMilliseconds(o.iat)),expirationTime:utcTimestampToDateString(secondsStringToMilliseconds(o.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function secondsStringToMilliseconds(r){return Number(r)*1e3}function _parseToken(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return _logError("JWT malformed, contained fewer than 3 sections"),null;try{const o=base64Decode(n);return o?JSON.parse(o):(_logError("Failed to decode base64 JWT payload"),null)}catch(o){return _logError("Caught error parsing JWT payload as JSON",o?.toString()),null}}function _tokenExpiresIn(r){const e=_parseToken(r);return _assert(e,"internal-error"),_assert(typeof e.exp<"u","internal-error"),_assert(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _logoutIfInvalidated(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof FirebaseError&&isUserInvalidated(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function isUserInvalidated({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ProactiveRefresh{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserMetadata{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=utcTimestampToDateString(this.lastLoginAt),this.creationTime=utcTimestampToDateString(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reloadWithoutSaving(r){const e=r.auth,n=await r.getIdToken(),s=await _logoutIfInvalidated(r,getAccountInfo(e,{idToken:n}));_assert(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const u=o.providerUserInfo?.length?extractProviderData(o.providerUserInfo):[],d=mergeProviderData(r.providerData,u),m=r.isAnonymous,p=!(r.email&&o.passwordHash)&&!d?.length,g=m?p:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new UserMetadata(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(r,b)}async function reload(r){const e=getModularInstance(r);await _reloadWithoutSaving(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mergeProviderData(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function extractProviderData(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function requestStsToken(r,e){const n=await _performFetchWithErrorHandling(r,{},async()=>{const s=querystring({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,d=await _getFinalTarget(r,o,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:s};return r.emulatorConfig&&isCloudWorkstation(r.emulatorConfig.host)&&(p.credentials="include"),FetchProvider.fetch()(d,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function revokeToken(r,e){return _performApiRequest(r,"POST","/v2/accounts:revokeToken",_addTidIfNecessary(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StsTokenManager{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_assert(e.idToken,"internal-error"),_assert(typeof e.idToken<"u","internal-error"),_assert(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_tokenExpiresIn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){_assert(e.length!==0,"internal-error");const n=_tokenExpiresIn(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(_assert(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await requestStsToken(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,d=new StsTokenManager;return s&&(_assert(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(_assert(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(_assert(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new StsTokenManager,this.toJSON())}_performRefresh(){return debugFail("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function assertStringOrUndefined(r,e){_assert(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class UserImpl{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new ProactiveRefresh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new UserMetadata(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await _logoutIfInvalidated(this,this.stsTokenManager.getToken(this.auth,e));return _assert(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return getIdTokenResult(this,e)}reload(){return reload(this)}_assign(e){this!==e&&(_assert(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new UserImpl({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){_assert(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await _reloadWithoutSaving(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_isFirebaseServerApp(this.auth.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this.auth));const e=await this.getIdToken();return await _logoutIfInvalidated(this,deleteAccount(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,d=n.photoURL??void 0,m=n.tenantId??void 0,p=n._redirectEventId??void 0,g=n.createdAt??void 0,b=n.lastLoginAt??void 0,{uid:W,emailVerified:X,isAnonymous:he,providerData:_e,stsTokenManager:we}=n;_assert(W&&we,e,"internal-error");const ve=StsTokenManager.fromJSON(this.name,we);_assert(typeof W=="string",e,"internal-error"),assertStringOrUndefined(s,e.name),assertStringOrUndefined(o,e.name),_assert(typeof X=="boolean",e,"internal-error"),_assert(typeof he=="boolean",e,"internal-error"),assertStringOrUndefined(u,e.name),assertStringOrUndefined(d,e.name),assertStringOrUndefined(m,e.name),assertStringOrUndefined(p,e.name),assertStringOrUndefined(g,e.name),assertStringOrUndefined(b,e.name);const pe=new UserImpl({uid:W,auth:e,email:o,emailVerified:X,displayName:s,isAnonymous:he,photoURL:d,phoneNumber:u,tenantId:m,stsTokenManager:ve,createdAt:g,lastLoginAt:b});return _e&&Array.isArray(_e)&&(pe.providerData=_e.map(Ae=>({...Ae}))),p&&(pe._redirectEventId=p),pe}static async _fromIdTokenResponse(e,n,s=!1){const o=new StsTokenManager;o.updateFromServerResponse(n);const u=new UserImpl({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await _reloadWithoutSaving(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];_assert(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?extractProviderData(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!u?.length,m=new StsTokenManager;m.updateFromIdToken(s);const p=new UserImpl({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new UserMetadata(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const instanceCache=new Map;function _getInstance(r){debugAssert(r instanceof Function,"Expected a class definition");let e=instanceCache.get(r);return e?(debugAssert(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,instanceCache.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class InMemoryPersistence{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}InMemoryPersistence.type="NONE";const inMemoryPersistence=InMemoryPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _persistenceKeyName(r,e,n){return`firebase:${r}:${e}:${n}`}class PersistenceUserManager{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=_persistenceKeyName(this.userKey,o.apiKey,u),this.fullPersistenceKey=_persistenceKeyName("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await getAccountInfo(this.auth,{idToken:e}).catch(()=>{});return n?UserImpl._fromGetAccountInfoResponse(this.auth,n,e):null}return UserImpl._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new PersistenceUserManager(_getInstance(inMemoryPersistence),e,s);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||_getInstance(inMemoryPersistence);const d=_persistenceKeyName(s,e.config.apiKey,e.name);let m=null;for(const g of n)try{const b=await g._get(d);if(b){let W;if(typeof b=="string"){const X=await getAccountInfo(e,{idToken:b}).catch(()=>{});if(!X)break;W=await UserImpl._fromGetAccountInfoResponse(e,X,b)}else W=UserImpl._fromJSON(e,b);g!==u&&(m=W),u=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new PersistenceUserManager(u,e,s):(u=p[0],m&&await u._set(d,m.toJSON()),await Promise.all(n.map(async g=>{if(g!==u)try{await g._remove(d)}catch{}})),new PersistenceUserManager(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getBrowserName(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_isIEMobile(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_isFirefox(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_isBlackBerry(e))return"Blackberry";if(_isWebOS(e))return"Webos";if(_isSafari(e))return"Safari";if((e.includes("chrome/")||_isChromeIOS(e))&&!e.includes("edge/"))return"Chrome";if(_isAndroid(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function _isFirefox(r=getUA()){return/firefox\//i.test(r)}function _isSafari(r=getUA()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _isChromeIOS(r=getUA()){return/crios\//i.test(r)}function _isIEMobile(r=getUA()){return/iemobile/i.test(r)}function _isAndroid(r=getUA()){return/android/i.test(r)}function _isBlackBerry(r=getUA()){return/blackberry/i.test(r)}function _isWebOS(r=getUA()){return/webos/i.test(r)}function _isIOS(r=getUA()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function _isIOSStandalone(r=getUA()){return _isIOS(r)&&!!window.navigator?.standalone}function _isIE10(){return isIE()&&document.documentMode===10}function _isMobileBrowser(r=getUA()){return _isIOS(r)||_isAndroid(r)||_isWebOS(r)||_isBlackBerry(r)||/windows phone/i.test(r)||_isIEMobile(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getClientVersion(r,e=[]){let n;switch(r){case"Browser":n=_getBrowserName(getUA());break;case"Worker":n=`${_getBrowserName(getUA())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${SDK_VERSION}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthMiddlewareQueue{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((d,m)=>{try{const p=e(u);d(p)}catch(p){m(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getPasswordPolicy(r,e={}){return _performApiRequest(r,"GET","/v2/passwordPolicy",_addTidIfNecessary(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MINIMUM_MIN_PASSWORD_LENGTH=6;class PasswordPolicyImpl{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??MINIMUM_MIN_PASSWORD_LENGTH,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthImpl{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Subscription(this),this.idTokenSubscription=new Subscription(this),this.beforeStateQueue=new AuthMiddlewareQueue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_DEFAULT_AUTH_ERROR_FACTORY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_getInstance(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await PersistenceUserManager.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await getAccountInfo(this,{idToken:e}),s=await UserImpl._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(_isFirebaseServerApp(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===d)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return _assert(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await _reloadWithoutSaving(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_getUserLanguage()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_isFirebaseServerApp(this.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this));const n=e?getModularInstance(e):null;return n&&_assert(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&_assert(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_getInstance(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _getPasswordPolicy(this),n=new PasswordPolicyImpl(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ErrorFactory("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await revokeToken(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_getInstance(e)||this._popupRedirectResolver;_assert(n,this,"argument-error"),this.redirectPersistenceManager=await PersistenceUserManager.create(this,[_getInstance(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(_assert(m,this,"internal-error"),m.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{d=!0,p()}}else{const p=e.addObserver(n);return()=>{d=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _assert(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_getClientVersion(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(_isFirebaseServerApp(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&_logWarn(`Error while retrieving App Check token: ${e.error}`),e?.token}}function _castAuth(r){return getModularInstance(r)}class Subscription{constructor(e){this.auth=e,this.observer=null,this.addObserver=createSubscribe(n=>this.observer=n)}get next(){return _assert(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let externalJSProvider={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _setExternalJSProvider(r){externalJSProvider=r}function _loadJS(r){return externalJSProvider.loadJS(r)}function _recaptchaEnterpriseScriptUrl(){return externalJSProvider.recaptchaEnterpriseScript}function _gapiScriptUrl(){return externalJSProvider.gapiScript}function _generateCallbackName(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class MockGreCAPTCHATopLevel{constructor(){this.enterprise=new MockGreCAPTCHA}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class MockGreCAPTCHA{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const RECAPTCHA_ENTERPRISE_VERIFIER_TYPE="recaptcha-enterprise",FAKE_TOKEN="NO_RECAPTCHA";class RecaptchaEnterpriseVerifier{constructor(e){this.type=RECAPTCHA_ENTERPRISE_VERIFIER_TYPE,this.auth=_castAuth(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,m)=>{getRecaptchaConfig(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const g=new RecaptchaConfig(p);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,d(g.siteKey)}}).catch(p=>{m(p)})})}function o(u,d,m){const p=window.grecaptcha;isEnterprise(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(g=>{d(g)}).catch(()=>{d(FAKE_TOKEN)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new MockGreCAPTCHATopLevel().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{s(this.auth).then(m=>{if(!n&&isEnterprise(window.grecaptcha))o(m,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let p=_recaptchaEnterpriseScriptUrl();p.length!==0&&(p+=m),_loadJS(p).then(()=>{o(m,u,d)}).catch(g=>{d(g)})}}).catch(m=>{d(m)})})}}async function injectRecaptchaFields(r,e,n,s=!1,o=!1){const u=new RecaptchaEnterpriseVerifier(r);let d;if(o)d=FAKE_TOKEN;else try{d=await u.verify(n)}catch{d=await u.verify(n,!0)}const m={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,g=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function handleRecaptchaFlow(r,e,n,s,o){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await injectRecaptchaFields(r,e,n,n==="getOobCode");return s(r,u)}else return s(r,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await injectRecaptchaFields(r,e,n,n==="getOobCode");return s(r,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function initializeAuth(r,e){const n=_getProvider(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(deepEqual(u,e??{}))return o;_fail(o,"already-initialized")}return n.initialize({options:e})}function _initializeAuthInstance(r,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(_getInstance);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function connectAuthEmulator(r,e,n){const s=_castAuth(r);_assert(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=extractProtocol(e),{host:d,port:m}=extractHostAndPort(e),p=m===null?"":`:${m}`,g={url:`${u}//${d}${p}/`},b=Object.freeze({host:d,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){_assert(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),_assert(deepEqual(g,s.config.emulator)&&deepEqual(b,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=b,s.settings.appVerificationDisabledForTesting=!0,isCloudWorkstation(d)?(pingServer(`${u}//${d}${p}`),updateEmulatorBanner("Auth",!0)):emitEmulatorWarning()}function extractProtocol(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function extractHostAndPort(r){const e=extractProtocol(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:parsePort(s.substr(u.length+1))}}else{const[u,d]=s.split(":");return{host:u,port:parsePort(d)}}}function parsePort(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function emitEmulatorWarning(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthCredential{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return debugFail("not implemented")}_getIdTokenResponse(e){return debugFail("not implemented")}_linkToIdToken(e,n){return debugFail("not implemented")}_getReauthenticationResolver(e){return debugFail("not implemented")}}async function linkEmailPassword(r,e){return _performApiRequest(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithPassword(r,e){return _performSignInRequest(r,"POST","/v1/accounts:signInWithPassword",_addTidIfNecessary(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithEmailLink$1(r,e){return _performSignInRequest(r,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(r,e))}async function signInWithEmailLinkForLinking(r,e){return _performSignInRequest(r,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EmailAuthCredential extends AuthCredential{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new EmailAuthCredential(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new EmailAuthCredential(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return handleRecaptchaFlow(e,n,"signInWithPassword",signInWithPassword);case"emailLink":return signInWithEmailLink$1(e,{email:this._email,oobCode:this._password});default:_fail(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return handleRecaptchaFlow(e,s,"signUpPassword",linkEmailPassword);case"emailLink":return signInWithEmailLinkForLinking(e,{idToken:n,email:this._email,oobCode:this._password});default:_fail(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithIdp(r,e){return _performSignInRequest(r,"POST","/v1/accounts:signInWithIdp",_addTidIfNecessary(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IDP_REQUEST_URI$1="http://localhost";class OAuthCredential extends AuthCredential{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new OAuthCredential(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):_fail("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const d=new OAuthCredential(s,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return signInWithIdp(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,signInWithIdp(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,signInWithIdp(e,n)}buildRequest(){const e={requestUri:IDP_REQUEST_URI$1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=querystring(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function parseMode(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function parseDeepLink(r){const e=querystringDecode(extractQuerystring(r)).link,n=e?querystringDecode(extractQuerystring(e)).deep_link_id:null,s=querystringDecode(extractQuerystring(r)).deep_link_id;return(s?querystringDecode(extractQuerystring(s)).link:null)||s||n||e||r}class ActionCodeURL{constructor(e){const n=querystringDecode(extractQuerystring(e)),s=n.apiKey??null,o=n.oobCode??null,u=parseMode(n.mode??null);_assert(s&&o&&u,"argument-error"),this.apiKey=s,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=parseDeepLink(e);try{return new ActionCodeURL(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EmailAuthProvider{constructor(){this.providerId=EmailAuthProvider.PROVIDER_ID}static credential(e,n){return EmailAuthCredential._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=ActionCodeURL.parseLink(n);return _assert(s,"argument-error"),EmailAuthCredential._fromEmailAndCode(e,s.code,s.tenantId)}}EmailAuthProvider.PROVIDER_ID="password",EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD="password",EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FederatedAuthProvider{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BaseOAuthProvider extends FederatedAuthProvider{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FacebookAuthProvider extends BaseOAuthProvider{constructor(){super("facebook.com")}static credential(e){return OAuthCredential._fromParams({providerId:FacebookAuthProvider.PROVIDER_ID,signInMethod:FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return FacebookAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return FacebookAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return FacebookAuthProvider.credential(e.oauthAccessToken)}catch{return null}}}FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD="facebook.com",FacebookAuthProvider.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GoogleAuthProvider extends BaseOAuthProvider{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return OAuthCredential._fromParams({providerId:GoogleAuthProvider.PROVIDER_ID,signInMethod:GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return GoogleAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return GoogleAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return GoogleAuthProvider.credential(n,s)}catch{return null}}}GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD="google.com",GoogleAuthProvider.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GithubAuthProvider extends BaseOAuthProvider{constructor(){super("github.com")}static credential(e){return OAuthCredential._fromParams({providerId:GithubAuthProvider.PROVIDER_ID,signInMethod:GithubAuthProvider.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return GithubAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return GithubAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return GithubAuthProvider.credential(e.oauthAccessToken)}catch{return null}}}GithubAuthProvider.GITHUB_SIGN_IN_METHOD="github.com",GithubAuthProvider.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TwitterAuthProvider extends BaseOAuthProvider{constructor(){super("twitter.com")}static credential(e,n){return OAuthCredential._fromParams({providerId:TwitterAuthProvider.PROVIDER_ID,signInMethod:TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return TwitterAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return TwitterAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return TwitterAuthProvider.credential(n,s)}catch{return null}}}TwitterAuthProvider.TWITTER_SIGN_IN_METHOD="twitter.com",TwitterAuthProvider.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signUp(r,e){return _performSignInRequest(r,"POST","/v1/accounts:signUp",_addTidIfNecessary(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserCredentialImpl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await UserImpl._fromIdTokenResponse(e,s,o),d=providerIdForResponse(s);return new UserCredentialImpl({user:u,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=providerIdForResponse(s);return new UserCredentialImpl({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function providerIdForResponse(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MultiFactorError extends FirebaseError{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,MultiFactorError.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new MultiFactorError(e,n,s,o)}}function _processCredentialSavingMfaContextIfNecessary(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?MultiFactorError._fromErrorAndOperation(r,u,e,s):u})}async function _link$1(r,e,n=!1){const s=await _logoutIfInvalidated(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return UserCredentialImpl._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reauthenticate(r,e,n=!1){const{auth:s}=r;if(_isFirebaseServerApp(s.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(s));const o="reauthenticate";try{const u=await _logoutIfInvalidated(r,_processCredentialSavingMfaContextIfNecessary(s,o,e,r),n);_assert(u.idToken,s,"internal-error");const d=_parseToken(u.idToken);_assert(d,s,"internal-error");const{sub:m}=d;return _assert(r.uid===m,s,"user-mismatch"),UserCredentialImpl._forOperation(r,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&_fail(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _signInWithCredential(r,e,n=!1){if(_isFirebaseServerApp(r.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(r));const s="signIn",o=await _processCredentialSavingMfaContextIfNecessary(r,s,e),u=await UserCredentialImpl._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(u.user),u}async function signInWithCredential(r,e){return _signInWithCredential(_castAuth(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function recachePasswordPolicy(r){const e=_castAuth(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function createUserWithEmailAndPassword(r,e,n){if(_isFirebaseServerApp(r.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(r));const s=_castAuth(r),d=await handleRecaptchaFlow(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",signUp).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&recachePasswordPolicy(r),p}),m=await UserCredentialImpl._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(m.user),m}function signInWithEmailAndPassword(r,e,n){return _isFirebaseServerApp(r.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(r)):signInWithCredential(getModularInstance(r),EmailAuthProvider.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&recachePasswordPolicy(r),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function updateProfile$1(r,e){return _performApiRequest(r,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function updateProfile(r,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const s=getModularInstance(r),u={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},d=await _logoutIfInvalidated(s,updateProfile$1(s.auth,u));s.displayName=d.displayName||null,s.photoURL=d.photoUrl||null;const m=s.providerData.find(({providerId:p})=>p==="password");m&&(m.displayName=s.displayName,m.photoURL=s.photoURL),await s._updateTokensIfNecessary(d)}function onIdTokenChanged(r,e,n,s){return getModularInstance(r).onIdTokenChanged(e,n,s)}function beforeAuthStateChanged(r,e,n){return getModularInstance(r).beforeAuthStateChanged(e,n)}function onAuthStateChanged(r,e,n,s){return getModularInstance(r).onAuthStateChanged(e,n,s)}function signOut(r){return getModularInstance(r).signOut()}const STORAGE_AVAILABLE_KEY="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserPersistenceClass{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(STORAGE_AVAILABLE_KEY,"1"),this.storage.removeItem(STORAGE_AVAILABLE_KEY),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLLING_INTERVAL_MS$1=1e3,IE10_LOCAL_STORAGE_SYNC_DELAY=10;class BrowserLocalPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_isMobileBrowser(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,m,p)=>{this.notifyListeners(d,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},u=this.storage.getItem(s);_isIE10()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,IE10_LOCAL_STORAGE_SYNC_DELAY):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},_POLLING_INTERVAL_MS$1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}BrowserLocalPersistence.type="LOCAL";const browserLocalPersistence=BrowserLocalPersistence;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserSessionPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}BrowserSessionPersistence.type="SESSION";const browserSessionPersistence=BrowserSessionPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _allSettled(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Receiver{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Receiver(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,d=this.handlersMap[o];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(d).map(async g=>g(n.origin,u)),p=await _allSettled(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Receiver.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _generateEventId(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sender{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((m,p)=>{const g=_generateEventId("",20);o.port1.start();const b=setTimeout(()=>{p(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(W){const X=W;if(X.data.eventId===g)switch(X.data.status){case"ack":clearTimeout(b),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(X.data.response);break;default:clearTimeout(b),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _window(){return window}function _setWindowLocation(r){_window().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isWorker(){return typeof _window().WorkerGlobalScope<"u"&&typeof _window().importScripts=="function"}async function _getActiveServiceWorker(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _getServiceWorkerController(){return navigator?.serviceWorker?.controller||null}function _getWorkerGlobalScope(){return _isWorker()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME="firebaseLocalStorageDb",DB_VERSION=1,DB_OBJECTSTORE_NAME="firebaseLocalStorage",DB_DATA_KEYPATH="fbase_key";class DBPromise{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function getObjectStore(r,e){return r.transaction([DB_OBJECTSTORE_NAME],e?"readwrite":"readonly").objectStore(DB_OBJECTSTORE_NAME)}function _deleteDatabase(){const r=indexedDB.deleteDatabase(DB_NAME);return new DBPromise(r).toPromise()}function _openDatabase(){const r=indexedDB.open(DB_NAME,DB_VERSION);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(DB_OBJECTSTORE_NAME,{keyPath:DB_DATA_KEYPATH})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(DB_OBJECTSTORE_NAME)?e(s):(s.close(),await _deleteDatabase(),e(await _openDatabase()))})})}async function _putObject(r,e,n){const s=getObjectStore(r,!0).put({[DB_DATA_KEYPATH]:e,value:n});return new DBPromise(s).toPromise()}async function getObject(r,e){const n=getObjectStore(r,!1).get(e),s=await new DBPromise(n).toPromise();return s===void 0?null:s.value}function _deleteObject(r,e){const n=getObjectStore(r,!0).delete(e);return new DBPromise(n).toPromise()}const _POLLING_INTERVAL_MS=800,_TRANSACTION_RETRY_COUNT=3;class IndexedDBLocalPersistence{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _openDatabase(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>_TRANSACTION_RETRY_COUNT)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _isWorker()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Receiver._getInstance(_getWorkerGlobalScope()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await _getActiveServiceWorker(),!this.activeServiceWorker)return;this.sender=new Sender(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_getServiceWorkerController()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _openDatabase();return await _putObject(e,STORAGE_AVAILABLE_KEY,"1"),await _deleteObject(e,STORAGE_AVAILABLE_KEY),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>_putObject(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>getObject(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>_deleteObject(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=getObjectStore(o,!1).getAll();return new DBPromise(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_POLLING_INTERVAL_MS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IndexedDBLocalPersistence.type="LOCAL";const indexedDBLocalPersistence=IndexedDBLocalPersistence;new Delay(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _withDefaultResolver(r,e){return e?_getInstance(e):(_assert(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IdpCredential extends AuthCredential{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return signInWithIdp(e,this._buildIdpRequest())}_linkToIdToken(e,n){return signInWithIdp(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return signInWithIdp(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _signIn(r){return _signInWithCredential(r.auth,new IdpCredential(r),r.bypassAuthState)}function _reauth(r){const{auth:e,user:n}=r;return _assert(n,e,"internal-error"),_reauthenticate(n,new IdpCredential(r),r.bypassAuthState)}async function _link(r){const{auth:e,user:n}=r;return _assert(n,e,"internal-error"),_link$1(n,new IdpCredential(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AbstractPopupRedirectOperation{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:d,type:m}=e;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _signIn;case"linkViaPopup":case"linkViaRedirect":return _link;case"reauthViaPopup":case"reauthViaRedirect":return _reauth;default:_fail(this.auth,"internal-error")}}resolve(e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLL_WINDOW_CLOSE_TIMEOUT=new Delay(2e3,1e4);class PopupOperation extends AbstractPopupRedirectOperation{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction&&PopupOperation.currentPopupAction.cancel(),PopupOperation.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _assert(e,this.auth,"internal-error"),e}async onExecution(){debugAssert(this.filter.length===1,"Popup operations only handle one event");const e=_generateEventId();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_createError(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(_createError(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_createError(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_POLL_WINDOW_CLOSE_TIMEOUT.get())};e()}}PopupOperation.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PENDING_REDIRECT_KEY="pendingRedirect",redirectOutcomeMap=new Map;class RedirectAction extends AbstractPopupRedirectOperation{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=redirectOutcomeMap.get(this.auth._key());if(!e){try{const s=await _getAndClearPendingRedirectStatus(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}redirectOutcomeMap.set(this.auth._key(),e)}return this.bypassAuthState||redirectOutcomeMap.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _getAndClearPendingRedirectStatus(r,e){const n=pendingRedirectKey(e),s=resolverPersistence(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function _overrideRedirectResult(r,e){redirectOutcomeMap.set(r._key(),e)}function resolverPersistence(r){return _getInstance(r._redirectPersistence)}function pendingRedirectKey(r){return _persistenceKeyName(PENDING_REDIRECT_KEY,r.config.apiKey,r.name)}async function _getRedirectResult(r,e,n=!1){if(_isFirebaseServerApp(r.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(r));const s=_castAuth(r),o=_withDefaultResolver(s,e),d=await new RedirectAction(s,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EVENT_DUPLICATION_CACHE_DURATION_MS=600*1e3;class AuthEventManager{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!isRedirectEvent(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!isNullRedirectEvent(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(_createError(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EVENT_DUPLICATION_CACHE_DURATION_MS&&this.cachedEventUids.clear(),this.cachedEventUids.has(eventUid(e))}saveEventToCache(e){this.cachedEventUids.add(eventUid(e)),this.lastProcessedEventTime=Date.now()}}function eventUid(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function isNullRedirectEvent({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function isRedirectEvent(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return isNullRedirectEvent(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getProjectConfig(r,e={}){return _performApiRequest(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP_ADDRESS_REGEX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HTTP_REGEX=/^https?/;async function _validateOrigin(r){if(r.config.emulator)return;const{authorizedDomains:e}=await _getProjectConfig(r);for(const n of e)try{if(matchDomain(n))return}catch{}_fail(r,"unauthorized-domain")}function matchDomain(r){const e=_getCurrentUrl(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!HTTP_REGEX.test(n))return!1;if(IP_ADDRESS_REGEX.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NETWORK_TIMEOUT=new Delay(3e4,6e4);function resetUnloadedGapiModules(){const r=_window().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function loadGapi(r){return new Promise((e,n)=>{function s(){resetUnloadedGapiModules(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{resetUnloadedGapiModules(),n(_createError(r,"network-request-failed"))},timeout:NETWORK_TIMEOUT.get()})}if(_window().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(_window().gapi?.load)s();else{const o=_generateCallbackName("iframefcb");return _window()[o]=()=>{gapi.load?s():n(_createError(r,"network-request-failed"))},_loadJS(`${_gapiScriptUrl()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw cachedGApiLoader=null,e})}let cachedGApiLoader=null;function _loadGapi(r){return cachedGApiLoader=cachedGApiLoader||loadGapi(r),cachedGApiLoader}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PING_TIMEOUT=new Delay(5e3,15e3),IFRAME_PATH="__/auth/iframe",EMULATED_IFRAME_PATH="emulator/auth/iframe",IFRAME_ATTRIBUTES={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EID_FROM_APIHOST=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function getIframeUrl(r){const e=r.config;_assert(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?_emulatorUrl(e,EMULATED_IFRAME_PATH):`https://${r.config.authDomain}/${IFRAME_PATH}`,s={apiKey:e.apiKey,appName:r.name,v:SDK_VERSION},o=EID_FROM_APIHOST.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${querystring(s).slice(1)}`}async function _openIframe(r){const e=await _loadGapi(r),n=_window().gapi;return _assert(n,r,"internal-error"),e.open({where:document.body,url:getIframeUrl(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IFRAME_ATTRIBUTES,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const d=_createError(r,"network-request-failed"),m=_window().setTimeout(()=>{u(d)},PING_TIMEOUT.get());function p(){_window().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BASE_POPUP_OPTIONS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DEFAULT_WIDTH=500,DEFAULT_HEIGHT=600,TARGET_BLANK="_blank",FIREFOX_EMPTY_URL="http://localhost";class AuthPopup{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _open(r,e,n,s=DEFAULT_WIDTH,o=DEFAULT_HEIGHT){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p={...BASE_POPUP_OPTIONS,width:s.toString(),height:o.toString(),top:u,left:d},g=getUA().toLowerCase();n&&(m=_isChromeIOS(g)?TARGET_BLANK:n),_isFirefox(g)&&(e=e||FIREFOX_EMPTY_URL,p.scrollbars="yes");const b=Object.entries(p).reduce((X,[he,_e])=>`${X}${he}=${_e},`,"");if(_isIOSStandalone(g)&&m!=="_self")return openAsNewWindowIOS(e||"",m),new AuthPopup(null);const W=window.open(e||"",m,b);_assert(W,r,"popup-blocked");try{W.focus()}catch{}return new AuthPopup(W)}function openAsNewWindowIOS(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WIDGET_PATH="__/auth/handler",EMULATOR_WIDGET_PATH="emulator/auth/handler",FIREBASE_APP_CHECK_FRAGMENT_ID=encodeURIComponent("fac");async function _getRedirectUrl(r,e,n,s,o,u){_assert(r.config.authDomain,r,"auth-domain-config-required"),_assert(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:SDK_VERSION,eventId:o};if(e instanceof FederatedAuthProvider){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",isEmpty$1(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,W]of Object.entries({}))d[b]=W}if(e instanceof BaseOAuthProvider){const b=e.getScopes().filter(W=>W!=="");b.length>0&&(d.scopes=b.join(","))}r.tenantId&&(d.tid=r.tenantId);const m=d;for(const b of Object.keys(m))m[b]===void 0&&delete m[b];const p=await r._getAppCheckToken(),g=p?`#${FIREBASE_APP_CHECK_FRAGMENT_ID}=${encodeURIComponent(p)}`:"";return`${getHandlerBase(r)}?${querystring(m).slice(1)}${g}`}function getHandlerBase({config:r}){return r.emulator?_emulatorUrl(r,EMULATOR_WIDGET_PATH):`https://${r.authDomain}/${WIDGET_PATH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WEB_STORAGE_SUPPORT_KEY="webStorageSupport";class BrowserPopupRedirectResolver{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=browserSessionPersistence,this._completeRedirectFn=_getRedirectResult,this._overrideRedirectResult=_overrideRedirectResult}async _openPopup(e,n,s,o){debugAssert(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await _getRedirectUrl(e,n,s,_getCurrentUrl(),o);return _open(e,u,_generateEventId())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await _getRedirectUrl(e,n,s,_getCurrentUrl(),o);return _setWindowLocation(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(debugAssert(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await _openIframe(e),s=new AuthEventManager(e);return n.register("authEvent",o=>(_assert(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(WEB_STORAGE_SUPPORT_KEY,{type:WEB_STORAGE_SUPPORT_KEY},o=>{const u=o?.[0]?.[WEB_STORAGE_SUPPORT_KEY];u!==void 0&&n(!!u),_fail(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=_validateOrigin(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return _isMobileBrowser()||_isSafari()||_isIOS()}}const browserPopupRedirectResolver=BrowserPopupRedirectResolver;var name="@firebase/auth",version="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthInterop{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){_assert(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getVersionForPlatform(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function registerAuth(r){_registerComponent(new Component("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=s.options;_assert(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:d,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_getClientVersion(r)},g=new AuthImpl(s,o,u,p);return _initializeAuthInstance(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),_registerComponent(new Component("auth-internal",e=>{const n=_castAuth(e.getProvider("auth").getImmediate());return(s=>new AuthInterop(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),registerVersion(name,version,getVersionForPlatform(r)),registerVersion(name,version,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ID_TOKEN_MAX_AGE=300,authIdTokenMaxAge=getExperimentalSetting("authIdTokenMaxAge")||DEFAULT_ID_TOKEN_MAX_AGE;let lastPostedIdToken=null;const mintCookieFactory=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>authIdTokenMaxAge)return;const o=n?.token;lastPostedIdToken!==o&&(lastPostedIdToken=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function getAuth(r=getApp()){const e=_getProvider(r,"auth");if(e.isInitialized())return e.getImmediate();const n=initializeAuth(r,{popupRedirectResolver:browserPopupRedirectResolver,persistence:[indexedDBLocalPersistence,browserLocalPersistence,browserSessionPersistence]}),s=getExperimentalSetting("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const d=mintCookieFactory(u.toString());beforeAuthStateChanged(n,d,()=>d(n.currentUser)),onIdTokenChanged(n,m=>d(m))}}const o=getDefaultEmulatorHost("auth");return o&&connectAuthEmulator(n,`http://${o}`),n}function getScriptParentElement(){return document.getElementsByTagName("head")?.[0]??document}_setExternalJSProvider({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const u=_createError("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",getScriptParentElement().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),registerAuth("Browser");const firebaseConfig={apiKey:"AIzaSyDE-JUYyO8IfwcQTkpKSk672lNPfOWEGPo",authDomain:"youoffice-814d4.firebaseapp.com",projectId:"youoffice-814d4",storageBucket:"youoffice-814d4.firebasestorage.app",messagingSenderId:"698200688802",appId:"1:698200688802:web:8414e5f9f791687c98effb",measurementId:"G-XR17DSBWK1"},app=initializeApp(firebaseConfig);getAnalytics(app);const db=getFirestore(app),auth=getAuth(app),ProductsContext=reactExports.createContext();function ProductsProvider({children:r}){const[e,n]=reactExports.useState([]),[s,o]=reactExports.useState(!0),u=async m=>{o(!0);try{const p=query(collection(db,"products"),where("category","==",m)),b=(await getDocs(p)).docs.map(W=>({id:W.id,...W.data()}));n(b)}catch(p){console.error("Error fetching products:",p)}finally{o(!1)}},d=async(m,p,g=4)=>{if(!m)return[];try{const b=query(collection(db,"products"),where("category","==",m),where(documentId(),"!=",p),limit(g));return(await getDocs(b)).docs.map(he=>({id:he.id,...he.data()}))}catch(b){return console.error("Error fetching recommended products:",b),[]}};return jsxRuntimeExports.jsx(ProductsContext.Provider,{value:{products:e,loading:s,fetchProducts:u,fetchRecommendedProducts:d},children:r})}class AuthService{static async register(e,n,s){try{const o=await createUserWithEmailAndPassword(auth,e,n);return await updateProfile(o.user,{displayName:s}),{success:!0,user:o.user}}catch(o){return{success:!1,error:o.message}}}static async login(e,n){try{return{success:!0,user:(await signInWithEmailAndPassword(auth,e,n)).user}}catch(s){return{success:!1,error:s.message}}}static async logout(){try{return await signOut(auth),{success:!0}}catch(e){return{success:!1,error:e.message}}}static onAuthChange(e){return onAuthStateChanged(auth,e)}static getCurrentUser(){return auth.currentUser}}const AuthContext=reactExports.createContext();function AuthProvider({children:r}){let[e,n]=reactExports.useState(null);reactExports.useEffect(()=>{let o=AuthService.onAuthChange(u=>{n(u)});return()=>o()},[]);let s={user:e,login:AuthService.login,register:AuthService.register,logout:AuthService.logout};return jsxRuntimeExports.jsx(AuthContext.Provider,{value:s,children:r})}function UserPanel(){const{user:r,logout:e}=reactExports.useContext(AuthContext),n=useNavigate(),s=async()=>{try{await e(),n("/login")}catch(d){console.error("Logout failed:",d)}},o="text-white text-sm font-medium tracking-wide no-underline transition-colors duration-200 py-1 px-3 rounded-md hover:bg-white hover:text-[#00579A]";return jsxRuntimeExports.jsx("div",{className:"w-full py-2 sm:py-2.5 px-4 shadow-md",style:{backgroundColor:"#00579A"},children:jsxRuntimeExports.jsxs("div",{className:"flex justify-end items-center space-x-2 sm:space-x-4",children:[r?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("span",{className:"hidden sm:inline text-white text-sm font-light mr-2 truncate max-w-[150px]",children:["Hello, ",r.email||"User"]}),jsxRuntimeExports.jsx(Link,{to:"/myaccount",className:o,children:"My Account"}),jsxRuntimeExports.jsx("button",{onClick:s,className:`${o} !bg-transparent hover:!bg-white/20 border border-transparent hover:border-white`,children:"Logout"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Link,{to:"/register",className:o,children:"Register"}),jsxRuntimeExports.jsx(Link,{to:"/login",className:o,children:"Login"})]}),jsxRuntimeExports.jsx(Link,{to:"/contactUs",className:`${o} hidden sm:inline-block`,children:"Contact Us"})]})})}const category=JSON.parse('[{"category":"Basic Stationery","sub_categories":["Batteries",{"category":"Boards & Accessories","sub_categories":["Magnets","Whiteboards","MobileWhiteboards","Whiteboard Accessories","Plain Glass Boards","Design Glass Boards","Memo & Bulletin / Notice Boards","Easel Pads & Flip Chart Boards"]},"Clips, Pins & Tacks",{"category":"Desk Accessories","sub_categories":["Card Stands","Desk Organizers","Brochure Holders","Desk Table LED Lamp"]},{"category":"Envelopes","sub_categories":["Plain Envelopes","String Envelopes","Window Envelopes","Bubble Padded Envelopes"]},{"category":"Fasteners","sub_categories":["Card / Book Rings","Cotton Tapes","Paper Fasteners"]},{"category":"Glue & Adhesives","sub_categories":["Liquid & Super Glue","Blu-Tacks & Glue Sticks"]},{"category":"Laser / Inkjet Labels","sub_categories":["White Labels","Coloured Labels","Fabric Labels & Tent Cards","Clear Labels & Notarial Seals"]}]},{"category":"Basic Stationery II","sub_categories":["Mesh Products","Packing Products",{"category":"Post-it Notes, Flags & Tabs","sub_categories":["Flags & Tabs","Page Markers","Canary Yellow Notes","Premium Coloured Notes","Pop-Up Notes & Dispensers"]},"PU Leather Products",{"category":"Scissors, Rulers & Trimmers","sub_categories":["Cutters, Blades & Mats","Letter Openers","Paper Cutters","Rulers & Measuring Tapes","Scissors"]},{"category":"Stamps, Stamp Pads & Inks","sub_categories":["Date Stamps","Pre-Inked Stamps","Numbering Machines","Stamp Pads, Inks & Racks","DIY Self-Inking Printing Kit","Customized / Custom-Made Stamps"]},{"category":"Staplers & Paper Punches","sub_categories":["Desktop Staplers","Paper Punchers","Staple Removers","Staples / Bullets","Heavy Duty Staplers","Heavy Duty Paper Punchers"]},{"category":"Tapes & Dispensers","sub_categories":["OPP Tape","Cloth Tape","Magic Tape","Masking Tape","Mounting Tape","Double-Sided Tape","Transparent & Cellulose Tapes","Dispensers"]},"Waste Bin"]},{"category":"Paper Products","sub_categories":["Copier Paper","Special Paper",{"category":"Notebooks & Pads","sub_categories":["Notebooks","Voucher Pads","Hardcover Books","Miscellaneous Pads","Writing Pads & Exercise Books"]},"Computer Form Paper","Professional Notebooks","Woodfree, Thermal & Fax Paper"]},{"category":"Printer Toner & Ink Cartridges","sub_categories":["HP Printer Toner & Ink Cartridges","Canon Printer Toner & Ink Cartridges","Brother Printer Toner & Ink Cartridges","Epson Printer Toner & Ink Cartridges","Samsung Printer Toner & Ink Cartridges","Fuji Xerox Printer Toner & Ink Cartridges"]},{"category":"Writing & Correction","sub_categories":[{"category":"Pens","sub_categories":["Refills","Gift Pens","Ballpoint Pens","Uni Jetstream Pens","Liquid & Gel Ink Pens","Erasable & Fibre-Tip Pens"]},"Pencils",{"category":"Markers","sub_categories":["Permanent Markers","Whiteboard Markers","Chalk & Paint Markers"]},"Fineliners","Sharpeners","Highlighters","Colour Pencils",{"category":"Correction Supplies","sub_categories":["Erasers & Dusters","Correction Pens / Tapes"]}]},{"category":"Filing & Storage","sub_categories":["Clipboards",{"category":"Storage","sub_categories":["Cash Boxes","File Cabinets","Key Box / Tags","Document Trays","Magazine Holders","Book & File Racks","Newspaper, Magazine & Umbrella Racks"]},{"category":"Dividers","sub_categories":["Index Dividers","Colour Dividers","White Paper Dividers"]},{"category":"PP / PVC Files","sub_categories":["Clear Files","Clear Folders","Coloured Folders","Management Files"]},"Paper Files","Index & Tabs","Ring & Arch Files","Files & Card Cases","Card Holders & Files","Laminated Ring Files","Reinforcement Rings","Sheet Protector / Copy Safe & Pockets"]},{"category":"Office Equipment & Accessories","sub_categories":[{"category":"Laserjet & Inkjet Printers","sub_categories":["HP","OKI","Epson","Canon","Brother Printers"]},"Scanners",{"category":"Calculators","sub_categories":["Printing Calculators","Desktop Calculators","Scientific & Financial Calculators"]},{"category":"Projectors","sub_categories":["Epson","ViewSonic"]},"Air Purifiers",{"category":"Paper Shredder Machines","sub_categories":["GBC","HSM","Aurora","Fellowes","Heavy Duty"]},{"category":"Laminators & Pouches","sub_categories":["Pouches","Laminating Machine"]},"Desk / Table LED Lamp",{"category":"Label Printers & Tapes","sub_categories":["Label Tapes","Label Printers"]},"Checkwriter & Accessories",{"category":"Binding Machines & Accessories","sub_categories":["GBC","Fellowes","Binding Rings","Binding Covers"]},"Coin, Notes, Currency, Money Counters","Time Recorders & Time Attendance Systems"]},{"category":"IT & Travel Accessories","sub_categories":[{"category":"Laptops","sub_categories":["HP Notebook Computer","Dell Notebook Computer","ASUS Notebook Computer","Lenovo Notebook Computer"]},"Monitors","Privacy Filters","CD / DVD Media","Mice & Keyboards",{"category":"Ergonomic Products","sub_categories":["Backpacks","Backrest Cushions","Chair Mats & Footrests","Mouse Pads & Wristrests","Ergonomic Desk Accessories"]},"Headsets & Speakers",{"category":"Computer Accessories","sub_categories":["Laptop Bags","Docking Stations","Laptop Security Locks","USB Hubs, Chargers & Adapters"]},"Cables, Adaptors & Sockets","Laser Pointers & Presenters","Webcams and Conference Cams",{"category":"Home / Office Network Switches","sub_categories":["Camera"]},"Flash / Hard Drives & Memory Cards"]},{"category":"Pantry","sub_categories":["Coffee","Tea",{"category":"Drinks","sub_categories":["Milo & Nestum","Packet & Can Drinks","Bottled / Mineral Water & Milk"]},{"category":"Food Shelf","sub_categories":["Instant Food"]},{"category":"Other Beverages","sub_categories":["Chocolate & Malted","Cereals"]},"Disposable Wares","First Aid Supplies",{"category":"Sweeteners & Dairy","sub_categories":["Sugar","Creamer","Milk"]},"Toilet Rolls & Facial Tissues","Biscuits, Cookies & Crackers","Cleaning Tools & Equipment","Household & Cleaning Agents","Water Dispensers"]},{"category":"Hardware & Maintenance","sub_categories":["Step Ladders","Office Design Products","Bathroom & Kitchen Accessories","Command Hooks & Adhesive Strips","Photo & Certificate Frames / Holders"]},{"category":"Arts & Craft","sub_categories":[]},{"category":"Gifts & Novelties","sub_categories":[]}]');function cleanKey$1(r){return r.replace(/[^a-zA-Z0-9]/g,"")}const depthPadding$1=["pl-0","pl-3","pl-6","pl-9","pl-12"],CategoryLink$1=({name:r,urlKey:e,depth:n=0,onClose:s,isActive:o=!1})=>{const u=depthPadding$1[Math.min(n,depthPadding$1.length-1)];return jsxRuntimeExports.jsx(Link,{to:`/category/${e}`,onClick:s,className:`block text-sm py-2 px-3 border-l-2 transition-colors ${u} ${o?"border-[#00579A] bg-blue-50 text-[#00579A] font-medium":"border-transparent text-gray-700 hover:text-[#00579A] hover:bg-gray-50"}`,children:r})},CategoryAccordion$1=({item:r,isWrapped:e,toggleWrap:n,depth:s=0,renderCategories:o,onClose:u,currentCategory:d})=>{const m=cleanKey$1(r.category),p=depthPadding$1[Math.min(s,depthPadding$1.length-1)],g=r.sub_categories&&r.sub_categories.length>0,b=d===m;return g?jsxRuntimeExports.jsxs("div",{className:"border-b border-gray-100 last:border-b-0",children:[jsxRuntimeExports.jsxs("div",{onClick:()=>n(m),className:`flex items-center py-2 px-3 cursor-pointer transition-colors ${p} ${e||b?"bg-blue-50 text-[#00579A]":"hover:bg-gray-50 text-gray-800"}`,children:[jsxRuntimeExports.jsx("span",{className:"flex-1 text-sm",children:r.category}),jsxRuntimeExports.jsx("span",{className:`transition-transform duration-200 w-4 h-4 ml-2 ${e?"rotate-180":""}`,children:jsxRuntimeExports.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),jsxRuntimeExports.jsx("div",{className:`overflow-hidden transition-all duration-200 ${e?"max-h-screen":"max-h-0"}`,children:jsxRuntimeExports.jsx("div",{className:"pb-1",children:o(r.sub_categories,s+1,u,d)})})]}):jsxRuntimeExports.jsx(CategoryLink$1,{name:r.category,urlKey:m,depth:s,onClose:u,isActive:b})};function BurgerMenu(){const[r,e]=reactExports.useState(!1),[n,s]=reactExports.useState({}),o=useLocation();reactExports.useEffect(()=>{e(!1)},[o.pathname]),reactExports.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[r]);const u=()=>{e(!r)},d=()=>{e(!1)},m=W=>{s(X=>({...X,[W]:!X[W]}))},g=o.pathname.split("/")[2]||"",b=(W,X=0,he,_e)=>W.map(we=>{if(typeof we=="object"){const Ae=cleanKey$1(we.category);return jsxRuntimeExports.jsx(CategoryAccordion$1,{item:we,isWrapped:n[Ae],toggleWrap:m,depth:X,renderCategories:b,onClose:he,currentCategory:_e},Ae)}const ve=cleanKey$1(we),pe=_e===ve;return jsxRuntimeExports.jsx(CategoryLink$1,{name:we,urlKey:ve,depth:X,onClose:he,isActive:pe},ve)});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("button",{className:"flex flex-col justify-center items-center w-10 h-10 rounded-md cursor-pointer transition-colors z-50 bg-[#00579A] hover:bg-[#00457A]",onClick:u,"aria-label":"Menu","aria-expanded":r,children:[jsxRuntimeExports.jsx("div",{className:`w-5 h-0.5 bg-white mb-1 transition-all ${r?"rotate-45 translate-y-1.5":""}`}),jsxRuntimeExports.jsx("div",{className:`w-5 h-0.5 bg-white mb-1 transition-all ${r?"opacity-0":""}`}),jsxRuntimeExports.jsx("div",{className:`w-5 h-0.5 bg-white transition-all ${r?"-rotate-45 -translate-y-1.5":""}`})]}),r&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:d}),jsxRuntimeExports.jsxs("div",{className:`fixed top-0 left-0 h-full w-64 bg-white shadow-lg transform transition-transform duration-200 z-50 lg:static lg:transform-none lg:shadow-none lg:w-56 ${r?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:[jsxRuntimeExports.jsxs("div",{className:"bg-[#00579A] text-white p-4 flex justify-between items-center lg:hidden",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-medium",children:"Categories"}),jsxRuntimeExports.jsx("button",{onClick:d,className:"text-white hover:text-gray-200 p-1","aria-label":"Close menu",children:jsxRuntimeExports.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),jsxRuntimeExports.jsx("div",{className:"h-full overflow-y-auto",children:jsxRuntimeExports.jsxs("div",{className:"p-4 lg:p-0 lg:pt-4",children:[jsxRuntimeExports.jsx("div",{className:"hidden lg:block mb-4 px-3",children:jsxRuntimeExports.jsx("h2",{className:"text-base font-medium text-gray-900",children:"Categories"})}),jsxRuntimeExports.jsx("div",{className:"mb-4",children:jsxRuntimeExports.jsx("div",{className:"space-y-1",children:jsxRuntimeExports.jsx(Link,{to:"/",onClick:d,className:`block text-sm py-2 px-3 rounded transition-colors ${o.pathname==="/"?"bg-blue-50 text-[#00579A] font-medium":"text-gray-700 hover:text-[#00579A] hover:bg-gray-50"}`,children:"Home"})})}),jsxRuntimeExports.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-medium text-gray-900 px-3 mb-2",children:"All Categories"}),jsxRuntimeExports.jsx("div",{className:"border border-gray-200 rounded-lg",children:b(category,0,d,g)})]})]})})]})]})}function Cart({cartCount:r=0}){return jsxRuntimeExports.jsxs("button",{className:"p-2 relative hover:bg-gray-100 rounded-full transition-colors duration-200",children:[jsxRuntimeExports.jsx("img",{src:"../assets/img/cart.png",alt:"cart",className:"w-6 h-6 object-contain"}),jsxRuntimeExports.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:r})]})}function Saved({isFilled:r=!1}){return jsxRuntimeExports.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:r?"#3b82f6":"none",stroke:r?"#3b82f6":"currentColor",strokeWidth:"2",children:jsxRuntimeExports.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})}const CartContext=reactExports.createContext();function CartProvider({children:r}){const[e,n]=reactExports.useState({}),[s,o]=reactExports.useState([]),[u,d]=reactExports.useState([]),[m,p]=reactExports.useState({}),ve={count:e,increase:(pe,Ae="default")=>{n(Re=>({...Re,[pe]:{...Re[pe],[Ae]:(Re[pe]?.[Ae]||0)+1}}))},reduce:(pe,Ae="default")=>{n(Re=>({...Re,[pe]:{...Re[pe],[Ae]:Math.max((Re[pe]?.[Ae]||0)-1,0)}}))},addProduct:(pe,Ae,Re=1)=>{o(Pe=>{const Oe=Pe.findIndex(Ve=>Ve.id===pe.id&&Ve.option===Ae);return Re<=0?Oe!==-1?Pe.filter((Ve,ie)=>ie!==Oe):Pe:Oe!==-1?Pe.map((Ve,ie)=>ie===Oe?{...Ve,quantity:Re}:Ve):[...Pe,{...pe,option:Ae,quantity:Re}]}),n(Pe=>({...Pe,[pe.id]:{...Pe[pe.id],[Ae]:Re}}))},addProductWithReset:(pe,Ae)=>{const Re=e[pe.id]?.[Ae]||1;o(Pe=>Pe.find(Ve=>Ve.id===pe.id&&Ve.option===Ae)?Pe.map(Ve=>Ve.id===pe.id&&Ve.option===Ae?{...Ve,quantity:Ve.quantity+Re}:Ve):[...Pe,{...pe,option:Ae,quantity:Re}]),n(Pe=>({...Pe,[pe.id]:{...Pe[pe.id],[Ae]:0}}))},cart:s,updateCartQuantity:(pe,Ae,Re)=>{o(Pe=>Pe.map(Oe=>Oe.id===pe&&Oe.option===Re?{...Oe,quantity:Math.max(Oe.quantity+Ae,0)}:Oe).filter(Oe=>Oe.quantity>0))},clearCart:()=>{o([]),n({})},favorite:u,addFavorite:pe=>{d(Ae=>Ae.find(Pe=>Pe.id===pe.id)?Ae.filter(Pe=>Pe.id!==pe.id):[...Ae,pe]),p(Ae=>({...Ae,[pe.id]:!0}))},favoriteStatus:m,setFavoriteStatus:p};return jsxRuntimeExports.jsx(CartContext.Provider,{value:ve,children:r})}function ScrollToTopButton(){const[r,e]=reactExports.useState(!1);reactExports.useEffect(()=>{const s=()=>{window.scrollY>400?e(!0):e(!1)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const n=()=>{window.scrollTo({top:0,behavior:"smooth"})};return jsxRuntimeExports.jsx("button",{onClick:n,"aria-label":"Scroll to top",className:`
\xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 fixed z-50 
\xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 bg-[#00579A] text-white  /* \u0417\u041C\u0406\u041D\u0410: \u043E\u0441\u043D\u043E\u0432\u043D\u0438\u0439 \u043A\u043E\u043B\u0456\u0440 */
\xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 rounded-full shadow-xl 
\xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 transition-all duration-500 ease-in-out
\xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 hover:bg-[#00457A] hover:scale-110 /* \u0417\u041C\u0406\u041D\u0410: \u043A\u043E\u043B\u0456\u0440 \u043F\u0440\u0438 \u043D\u0430\u0432\u0435\u0434\u0435\u043D\u043D\u0456 */
\xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 
\xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 /* \u0410\u0434\u0430\u043F\u0442\u0438\u0432\u043D\u043E\u0441\u0442\u044C \u0438 \u041F\u043E\u0437\u0438\u0446\u0438\u043E\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 */
\xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 bottom-6 right-6 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0/* \u041F\u043E\u0437\u0438\u0446\u0438\u044F \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E */
\xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 sm:bottom-8 sm:right-8 \xA0 \xA0 \xA0/* \u0411\u043E\u043B\u044C\u0448\u0435 \u043E\u0442\u0441\u0442\u0443\u043F \u043D\u0430 \u0434\u0435\u0441\u043A\u0442\u043E\u043F\u0430\u0445 */

\xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 /* \u0420\u0430\u0437\u043C\u0435\u0440 \u0438 padding */
\xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 p-3 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 /* \u041C\u0435\u043D\u044C\u0448\u0435 \u043D\u0430 \u043C\u043E\u0431\u0438\u043B\u044C\u043D\u044B\u0445 */
\xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 sm:p-4 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0/* \u0411\u043E\u043B\u044C\u0448\u0435 \u043D\u0430 \u0434\u0435\u0441\u043A\u0442\u043E\u043F\u0430\u0445 */
\xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 
\xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 /* \u042D\u0444\u0444\u0435\u043A\u0442 \u043F\u043E\u044F\u0432\u043B\u0435\u043D\u0438\u044F (visibility/opacity) */
\xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 \xA0 ${r?"opacity-100 translate-y-0":"opacity-0 translate-y-4 pointer-events-none"}
\xA0 \xA0 \xA0 \xA0 \xA0 \xA0 `,disabled:!r,children:jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:jsxRuntimeExports.jsx("path",{d:"M12 19V5M5 12l7-7 7 7"})})})}const footerLinks={"Company Info":[{to:"/aboutUs",label:"About Us"},{to:"/privacyPolicy",label:"Privacy Policy"},{to:"/termsConditions",label:"Terms & Conditions"}],"Online Store":[{to:"/faq",label:"FAQ"},{to:"/brands",label:"Brands"},{to:"/contactUs",label:"Contact Us"}],"My Account":[{to:"/login",label:"Login / Register"},{to:"/myaccount",label:"Account"},{to:"/cart",label:"My Cart"}]},LinkSection=({title:r,links:e})=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-base font-semibold mb-2 text-white border-b border-gray-700 pb-1",children:r}),jsxRuntimeExports.jsx("div",{className:"space-y-1",children:e.map(n=>jsxRuntimeExports.jsx(Link,{to:n.to,className:"block text-gray-200 hover:text-white transition-colors duration-200 text-sm",children:n.label},n.to))})]}),SocialIcon=({href:r,label:e,pathD:n})=>jsxRuntimeExports.jsx("a",{href:r,className:"text-gray-300 hover:text-white transition-colors duration-200","aria-label":e,children:jsxRuntimeExports.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24"})});function Footer(){return jsxRuntimeExports.jsxs("footer",{style:{backgroundColor:"#00579A"},className:"text-white",children:[jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 lg:gap-8",children:[jsxRuntimeExports.jsxs("div",{className:"lg:col-span-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold mb-3 text-white",children:"Home n Office Products Pte Ltd"}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsxs("p",{className:"text-gray-200 text-sm",children:["Email:",jsxRuntimeExports.jsx("a",{href:"mailto:enquiry@homenoffice.sg",className:"text-blue-300 hover:text-white ml-1 transition-colors",children:"sirenko23t@gmail.com"})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-200 text-xs mt-2",children:"Your trusted partner for quality home and office supplies in Singapore."})]})]}),Object.entries(footerLinks).map(([r,e])=>jsxRuntimeExports.jsx(LinkSection,{title:r,links:e},r))]})}),jsxRuntimeExports.jsx("div",{className:"border-t border-gray-700",children:jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-2 md:space-y-0",children:[jsxRuntimeExports.jsx("div",{className:"text-gray-400 text-xs",children:"\xA9 2025 Home n Office Products Pte Ltd. All Rights Reserved."}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-3",children:[jsxRuntimeExports.jsx(SocialIcon,{href:"#",label:"Facebook",pathD:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"}),jsxRuntimeExports.jsx(SocialIcon,{href:"#",label:"Instagram",pathD:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 6.62 5.367 11.987 11.988 11.987s11.987-5.367 11.987-11.987C24.014 5.367 18.647.001 12.017.001zM8.449 16.988c-1.297 0-2.448-.49-3.323-1.297C4.25 14.816 3.76 13.665 3.76 12.368s.49-2.448 1.366-3.323c.875-.807 2.026-1.297 3.323-1.297s2.448.49 3.323 1.297c.875.875 1.366 2.026 1.366 3.323s-.491 2.448-1.366 3.323c-.875.807-2.026 1.297-3.323 1.297z"}),jsxRuntimeExports.jsx(SocialIcon,{href:"#",label:"Twitter",pathD:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})]})]})})})]})}function cleanKey(r){return r.replace(/[^a-zA-Z0-9]/g,"")}const depthPadding=["pl-0","pl-3","pl-6","pl-9","pl-12","pl-16"],CategoryLink=({name:r,urlKey:e,depth:n=0})=>{const s=depthPadding[Math.min(n,depthPadding.length-1)];return jsxRuntimeExports.jsx(Link,{to:`/category/${e}`,className:`block text-sm text-gray-700 hover:text-blue-600 hover:bg-blue-50 transition-colors py-2 border-l border-gray-200 ${s}`,children:r})},CategoryAccordion=({item:r,isWrapped:e,toggleWrap:n,depth:s=0,renderCategories:o})=>{const u=cleanKey(r.category),d=depthPadding[Math.min(s,depthPadding.length-1)];return r.sub_categories&&r.sub_categories.length>0?jsxRuntimeExports.jsxs("div",{className:"border-b border-gray-100 last:border-b-0",children:[jsxRuntimeExports.jsxs("h3",{onClick:()=>n(u),className:`flex items-center py-2 px-3 cursor-pointer transition-all duration-200 text-sm ${e?"bg-blue-50 text-blue-700":"hover:bg-gray-100 text-gray-800"} ${d}`,children:[jsxRuntimeExports.jsx("span",{className:"truncate flex-1",children:r.category}),jsxRuntimeExports.jsx("span",{className:`transition-transform duration-300 transform w-4 h-4 text-gray-500 flex-shrink-0 ml-2 ${e?"rotate-180 text-blue-700":""}`,children:jsxRuntimeExports.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),jsxRuntimeExports.jsx("div",{className:`overflow-hidden transition-all duration-500 ease-in-out ${e?"max-h-screen opacity-100":"max-h-0 opacity-0"}`,children:jsxRuntimeExports.jsx("div",{className:"pt-1 pb-2",children:o(r.sub_categories,s+1)})})]}):jsxRuntimeExports.jsx(CategoryLink,{name:r.category,urlKey:cleanKey(r.category),depth:s})};function Categories(){const[r,e]=reactExports.useState({});function n(o){e(u=>({...u,[o]:!u[o]}))}const s=(o,u=0)=>o.map((d,m)=>{if(typeof d=="object"){const g=cleanKey(d.category);return jsxRuntimeExports.jsx(CategoryAccordion,{item:d,isWrapped:r[g],toggleWrap:n,depth:u,renderCategories:s},g)}const p=cleanKey(d);return jsxRuntimeExports.jsx(CategoryLink,{name:d,urlKey:p,depth:u},p)});return jsxRuntimeExports.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-2xl border border-gray-100 sticky top-4 w-full",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl mb-4 text-blue-800 border-b pb-3 border-gray-200 uppercase tracking-wider",children:"Shop By Categories"}),jsxRuntimeExports.jsx("div",{className:"divide-y divide-gray-100",children:s(category,1)})]})}const Logo=""+new URL("../assets/img/logo/HOME-N-OFFICE-LOGO-min (1).png",import.meta.url).href;function Layout(){let{addFavorite:r}=reactExports.useContext(AuthContext),{cart:e}=reactExports.useContext(CartContext);return jsxRuntimeExports.jsxs("div",{className:"min-h-screen flex flex-col",children:[jsxRuntimeExports.jsxs("header",{className:"bg-white shadow-lg sticky top-0 z-50",children:[jsxRuntimeExports.jsx("nav",{children:jsxRuntimeExports.jsx(UserPanel,{})}),jsxRuntimeExports.jsxs("div",{className:"container mx-auto px-4 py-3 flex items-center justify-between",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 mr-4",children:jsxRuntimeExports.jsx(Link,{to:"/",children:jsxRuntimeExports.jsx("img",{src:Logo,alt:"HomenOffice Logo",className:"h-12 object-contain"})})}),jsxRuntimeExports.jsx("div",{className:"md:hidden",children:jsxRuntimeExports.jsx(BurgerMenu,{})}),jsxRuntimeExports.jsxs("div",{className:"hidden md:flex items-center space-x-6 ml-auto",children:[jsxRuntimeExports.jsx(Link,{to:"/mywishlist",children:jsxRuntimeExports.jsx(Saved,{})}),jsxRuntimeExports.jsx(Link,{to:"/cart",children:jsxRuntimeExports.jsx(Cart,{cartCount:e.length})}),jsxRuntimeExports.jsx(ScrollToTopButton,{})]})]})]}),jsxRuntimeExports.jsx("main",{className:"flex-grow container mx-auto px-4 py-6",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-6",children:[jsxRuntimeExports.jsx("aside",{className:"w-64 shrink-0 hidden lg:block h-min sticky top-[100px]",children:jsxRuntimeExports.jsx(Categories,{})}),jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsx(Outlet,{})})]})}),jsxRuntimeExports.jsx("footer",{className:" ",children:jsxRuntimeExports.jsx(Footer,{})})]})}const faqData=[{title:"IMPORTANT: Requirements for Online Prices",renderDescription:r=>r&&jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("p",{className:"font-semibold text-gray-800",children:"Requirements for online prices:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside ml-4 text-gray-700",children:[jsxRuntimeExports.jsx("li",{children:"Credit Card / Bank Transfer Payment"}),jsxRuntimeExports.jsx("li",{children:"Online prices are NOT applicable for Cash/Cheque On Delivery."})]})]})},{title:"Cash / Cheque On Delivery (Retail Price)",renderDescription:r=>r&&jsxRuntimeExports.jsxs("p",{className:"text-gray-700",children:["Cash or Cheque Payment is ",jsxRuntimeExports.jsx("span",{className:"font-bold text-red-600",children:"Calculated"})," at ",jsxRuntimeExports.jsx("span",{className:"font-bold text-red-600",children:"Retail Prices"})," (Same as our Retail Outlet's Selling Price)."]})},{title:"Order Status Updates (Email Notifications)",renderDescription:r=>r&&jsxRuntimeExports.jsxs("div",{className:"space-y-2 text-gray-700",children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{className:"font-semibold text-gray-900",children:"Order Received"})," \xA0- \xA0Order not yet processed."]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{className:"font-semibold text-gray-900",children:"Order Processing"})," \xA0- \xA0Order processed and sent for packing."]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{className:"font-semibold text-gray-900",children:"Order Shipped"})," \xA0- \xA0Order shipped out from warehouse, delivery likely within the same day."]})]})},{title:"Delivery Lead Time & Timing",renderDescription:r=>r&&jsxRuntimeExports.jsxs("p",{className:"text-gray-700",children:[jsxRuntimeExports.jsx("strong",{className:"font-semibold text-gray-900",children:"Lead Time"}),": Delivered within ",jsxRuntimeExports.jsx("span",{className:"text-blue-600 font-semibold",children:"5 Working Days"})," (excluding Sat, Sun & Public Holidays).",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("strong",{className:"font-semibold text-gray-900",children:"Delivery Hours"}),": Monday to Friday, During Office Hours (10.00am \u2013 6.00pm)."]})},{title:"Delivery Charges",renderDescription:r=>r&&jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside ml-4 text-gray-700",children:[jsxRuntimeExports.jsxs("li",{children:["Up to $100: \xA0 \xA0 \xA0 \xA0",jsxRuntimeExports.jsx("span",{className:"font-semibold text-gray-900",children:"$10.90"})]}),jsxRuntimeExports.jsxs("li",{children:["$100 to $200: \xA0 \xA0 ",jsxRuntimeExports.jsx("span",{className:"font-semibold text-gray-900",children:"$5.45"})]}),jsxRuntimeExports.jsxs("li",{children:["$200 & Above: \xA0 ",jsxRuntimeExports.jsx("span",{className:"font-semibold text-green-600",children:"FREE"})]})]}),jsxRuntimeExports.jsx("p",{className:"text-sm italic mt-4 text-gray-600",children:"Kindly note, free delivery only applies to lift access floor level. If stair climbing is required, additional charges will apply."})]})},{title:"Return & Refund",renderDescription:r=>r&&jsxRuntimeExports.jsxs("p",{className:"text-gray-700",children:["See ",jsxRuntimeExports.jsx("a",{href:"#",className:"text-blue-600 hover:underline font-medium",children:"Return & Refund Policy"})," or ",jsxRuntimeExports.jsx("a",{href:"#",className:"text-blue-600 hover:underline font-medium",children:"Click Here"})]})},{title:"Self-Collection (FREE Delivery)",renderDescription:r=>r&&jsxRuntimeExports.jsxs("p",{className:"text-gray-700",children:[jsxRuntimeExports.jsx("a",{href:"#",className:"text-blue-600 hover:underline font-medium",children:"Click Here"})," for Outlet Address"]})},{title:"Payment Modes Available",renderDescription:r=>r&&jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-y-1 text-gray-700",children:[jsxRuntimeExports.jsx("p",{children:"1. PayNow "}),jsxRuntimeExports.jsx("p",{children:"2. Credit Card (Visa, Master, Amex, Discover)"}),jsxRuntimeExports.jsx("p",{children:"3. Bank Transfer (DBS, OCBC, UOB)"}),jsxRuntimeExports.jsx("p",{children:"4. PayPal"}),jsxRuntimeExports.jsxs("p",{children:["5. Cash on Delivery ",jsxRuntimeExports.jsx("span",{className:"font-semibold text-red-500",children:"(Retail Price)"})]}),jsxRuntimeExports.jsxs("p",{children:["6. Cheque on Delivery ",jsxRuntimeExports.jsx("span",{className:"font-semibold text-red-500",children:"(Retail Price)"})]})]})},{title:"Forgot Password?",renderDescription:r=>r&&jsxRuntimeExports.jsxs("p",{className:"text-gray-700",children:["Click ",jsxRuntimeExports.jsx("span",{className:"font-semibold italic",children:"forgot password?"})," at the Login Page or ",jsxRuntimeExports.jsx("a",{href:"#",className:"text-blue-600 hover:underline font-medium",children:"Click Here"})]})},{title:"Change Account Details?",renderDescription:r=>r&&jsxRuntimeExports.jsxs("p",{className:"text-gray-700",children:["Click ",jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"\u2018My Account\u2019"})," after Login or ",jsxRuntimeExports.jsx("a",{href:"#",className:"text-blue-600 hover:underline font-medium",children:"Click Here"})]})},{title:"Email Us At: ",renderDescription:r=>r&&jsxRuntimeExports.jsxs("p",{className:"text-gray-700",children:["Email Us At: ",jsxRuntimeExports.jsx("a",{href:"mailto:enquiry@homenoffice.sg",className:"text-blue-600 hover:underline font-medium",children:"sirenko23t@gmail.com"})]})}];function FAQ(){let[r,e]=reactExports.useState(Array(faqData.length).fill(!1));function n(s){e(o=>o.map((u,d)=>d===s?!u:!1))}return jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8 sm:py-10 bg-white shadow-md rounded-lg",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl text-center mb-8",style:{color:"#00579A"},children:"Frequently Asked Questions"}),jsxRuntimeExports.jsx("div",{className:"space-y-0 divide-y divide-gray-200 border-t border-b border-gray-200",children:faqData.map((s,o)=>jsxRuntimeExports.jsx(Questions,{title:s.title,description:s.renderDescription(r[o]),onClick:()=>n(o),isOpen:r[o]},o))})]})}function Questions({title:r,description:e,onClick:n,isOpen:s}){return jsxRuntimeExports.jsxs("div",{className:"py-0.5",children:[jsxRuntimeExports.jsxs("h4",{onClick:n,className:"flex justify-between items-center w-full py-3 px-1 cursor-pointer text-base text-gray-900 hover:text-blue-600 transition-colors duration-300",children:[r,jsxRuntimeExports.jsx("span",{className:`text-xl transition-transform duration-300 ${s?"text-blue-600 rotate-180":"text-gray-400 rotate-0"}`,children:s?"\u2014":"+"})]}),jsxRuntimeExports.jsx("div",{className:`overflow-hidden transition-all duration-500 ease-in-out ${s?"max-h-[500px] opacity-100 pb-3":"max-h-0 opacity-0"}`,children:jsxRuntimeExports.jsx("div",{className:"pr-10 pl-1 text-sm",children:e})})]})}function Input$1({label:r,type:e,onChange:n,name:s,placeholder:o,error:u,value:d}){return jsxRuntimeExports.jsxs("div",{className:"flex flex-col mb-4",children:[jsxRuntimeExports.jsx("label",{htmlFor:s,className:"text-sm font-medium text-gray-700 mb-1",children:r}),jsxRuntimeExports.jsx("input",{type:e,value:d,id:s,name:s,onChange:n,placeholder:o,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all duration-200"}),u&&jsxRuntimeExports.jsx("span",{className:"text-red-500 text-sm mt-1",children:u})]})}const PRIMARY_COLOR$3="#00579A",PRIMARY_BUTTON_CLASSES$2=`bg-[${PRIMARY_COLOR$3}] text-white py-2.5 px-4 font-semibold text-sm rounded-lg shadow-md transition-all duration-200 hover:bg-[#00457A] focus:outline-none focus:ring-4 focus:ring-[${PRIMARY_COLOR$3}]/50`,LINK_CLASSES=`text-[${PRIMARY_COLOR$3}] hover:text-[#00457A] font-medium transition-colors duration-200 hover:underline`,INPUT_BASE_CLASSES$2=`w-full px-3 py-2.5 border border-gray-300 rounded-lg text-sm transition-shadow focus:ring-1 focus:ring-[${PRIMARY_COLOR$3}] focus:border-[${PRIMARY_COLOR$3}]`,LABEL_CLASSES$1="block text-sm font-medium text-gray-700 mb-1";function Register(){const[r,e]=reactExports.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),[n,s]=reactExports.useState(!1),[o,u]=reactExports.useState(!1),[d,m]=reactExports.useState(!1),[p,g]=reactExports.useState(""),[b,W]=reactExports.useState({}),X=()=>{let ve={};return r.firstName||(ve.firstName="First Name is required"),r.lastName||(ve.lastName="Last Name is required"),r.email||(ve.email="Email is required"),r.password||(ve.password="Password is required"),r.password.length<6&&(ve.password="Password must be at least 6 characters"),r.password!==r.confirmPassword&&(ve.confirmPassword="Passwords do not match"),W(ve),Object.keys(ve).length===0},he=ve=>{const{name:pe,value:Ae}=ve.target;e(Re=>({...Re,[pe]:Ae})),b[pe]&&W(Re=>({...Re,[pe]:void 0,general:void 0}))},_e=async ve=>{if(ve.preventDefault(),!!X()){m(!0),g(""),W({});try{const pe=await AuthService.register(r.email,r.password,r.firstName,r.lastName);pe.success?(g("Registration successful! You can now log in."),e({firstName:"",lastName:"",email:"",password:"",confirmPassword:""})):W({general:pe.error||"Registration failed. Please try a different email."})}catch(pe){console.error("Registration error:",pe),W({general:"A network error occurred during registration. Please check your connection."})}finally{m(!1)}}},we=({toggle:ve,isVisible:pe})=>jsxRuntimeExports.jsx("button",{type:"button",onClick:ve,className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600 transition","aria-label":pe?"Hide password":"Show password",children:pe?jsxRuntimeExports.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}):jsxRuntimeExports.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.828c-1.393.993-3.097 1.472-4.875 1.172a11.161 11.161 0 01-1.385-.297m-.24-2.837c.563-.563 1.258-1.071 2.03-1.488M21 12c-1.274 4.057-5.065 7-9.542 7-1.433 0-2.825-.274-4.088-.788m.54-7.465c-.563-.563-1.071-1.258-1.488-2.03M12 21a9 9 0 00.383-.035M21 12c-1.274-4.057-5.065-7-9.542-7-1.433 0-2.825.274-4.088.788M2.458 12C3.732 7.943 7.523 5 12 5c1.778 0 3.483.479 4.875 1.172M12 21V3M3 3l18 18"})})});return jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 p-4 py-8",children:jsxRuntimeExports.jsxs("form",{onSubmit:_e,className:"w-full max-w-md bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-4",children:[jsxRuntimeExports.jsx("h1",{className:`text-2xl font-bold text-[${PRIMARY_COLOR$3}] mb-1 tracking-normal`,children:"Create Your Account"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-sm",children:"Join us to enjoy exclusive benefits and faster checkout!"})]}),p&&jsxRuntimeExports.jsxs("div",{role:"alert",className:"bg-green-50 border-l-4 border-green-500 text-green-700 p-3 mb-4 rounded-md text-sm",children:[jsxRuntimeExports.jsx("p",{className:"font-medium",children:"Success!"}),jsxRuntimeExports.jsx("p",{children:p}),jsxRuntimeExports.jsx(Link,{to:"/login",className:`font-semibold ${LINK_CLASSES} ml-2 text-sm`,children:"Go to Login"})]}),b.general&&jsxRuntimeExports.jsxs("div",{role:"alert",className:"bg-red-50 border-l-4 border-red-500 text-red-700 p-3 mb-4 rounded-md text-sm",children:[jsxRuntimeExports.jsx("p",{className:"font-medium",children:"Error"}),jsxRuntimeExports.jsx("p",{children:b.general})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsx(Input$1,{label:"* First Name",labelClass:LABEL_CLASSES$1,name:"firstName",type:"text",onChange:he,error:b.firstName,value:r.firstName,className:INPUT_BASE_CLASSES$2}),jsxRuntimeExports.jsx(Input$1,{label:"* Last Name",labelClass:LABEL_CLASSES$1,name:"lastName",type:"text",onChange:he,error:b.lastName,value:r.lastName,className:INPUT_BASE_CLASSES$2})]}),jsxRuntimeExports.jsx(Input$1,{label:"* Email Address",labelClass:LABEL_CLASSES$1,name:"email",type:"email",onChange:he,error:b.email,value:r.email,className:INPUT_BASE_CLASSES$2}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"password",className:LABEL_CLASSES$1,children:"* Password (Min 6 characters)"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{id:"password",name:"password",type:n?"text":"password",onChange:he,value:r.password,className:`${INPUT_BASE_CLASSES$2} pr-10 ${b.password?"border-red-500":""}`}),jsxRuntimeExports.jsx(we,{toggle:()=>s(!n),isVisible:n})]}),b.password&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-xs mt-1",children:b.password})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"confirmPassword",className:LABEL_CLASSES$1,children:"* Confirm Password"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:o?"text":"password",onChange:he,value:r.confirmPassword,className:`${INPUT_BASE_CLASSES$2} pr-10 ${b.confirmPassword?"border-red-500":""}`}),jsxRuntimeExports.jsx(we,{toggle:()=>u(!o),isVisible:o})]}),b.confirmPassword&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-xs mt-1",children:b.confirmPassword})]})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 mt-4",children:["By clicking 'Register', you agree to our ",jsxRuntimeExports.jsx(Link,{to:"/privacy",className:`${LINK_CLASSES} text-xs`,children:"Privacy Policy"})," and ",jsxRuntimeExports.jsx(Link,{to:"/terms",className:`${LINK_CLASSES} text-xs`,children:"Terms of Use"}),"."]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:d||p,className:`
                        w-full 
                        ${PRIMARY_BUTTON_CLASSES$2} 
                        mt-4
                        ${d||p?"opacity-70 cursor-not-allowed":""}
                    `,children:d?"Registering...":"Register"}),jsxRuntimeExports.jsxs("p",{className:"text-center text-sm text-gray-600 mt-4",children:["Already have an account?"," ",jsxRuntimeExports.jsx(Link,{to:"/login",className:`font-semibold ${LINK_CLASSES}`,children:"Login here"})]})]})})}function Button$1({label:r,onClick:e,className:n=""}){return jsxRuntimeExports.jsx("button",{className:`px-4 py-2 rounded ${n}`,onClick:e,children:r})}const PRIMARY_BUTTON_CLASSES$1="bg-[#00579A] text-white hover:bg-[#00457A] transition-colors py-2.5 px-4 font-medium text-sm rounded-md shadow-sm",SECONDARY_BUTTON_CLASSES$1="bg-white text-[#00579A] border border-[#00579A] hover:bg-[#F0F8FF] transition-colors py-2.5 px-4 font-medium text-sm rounded-md",INPUT_BASE_CLASSES$1="w-full px-3 py-2.5 border border-gray-300 rounded-md text-sm transition-shadow focus:ring-1 focus:ring-[#00579A] focus:border-[#00579A]",PRIMARY_COLOR$2="#00579A";function Login(){const[r,e]=reactExports.useState({email:"",password:""}),[n,s]=reactExports.useState(!1),[o,u]=reactExports.useState(!1),[d,m]=reactExports.useState(""),p=useNavigate(),g=X=>{const{name:he,value:_e}=X.target;e(we=>({...we,[he]:_e})),d&&m("")},b=async X=>{if(X.preventDefault(),!r.email||!r.password){m("Please fill in all fields");return}u(!0),m("");try{const he=await AuthService.login(r.email,r.password);he.success?p("/myaccount"):m(he.error||"Invalid email or password.")}catch{m("An error occurred during login. Please check your connection.")}finally{u(!1)}},W=({toggle:X,isVisible:he})=>jsxRuntimeExports.jsx("button",{type:"button",onClick:X,className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600 transition","aria-label":he?"Hide password":"Show password",children:he?jsxRuntimeExports.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}):jsxRuntimeExports.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.828c-1.393.993-3.097 1.472-4.875 1.172a11.161 11.161 0 01-1.385-.297m-.24-2.837c.563-.563 1.258-1.071 2.03-1.488M21 12c-1.274 4.057-5.065 7-9.542 7-1.433 0-2.825-.274-4.088-.788m.54-7.465c-.563-.563-1.071-1.258-1.488-2.03M12 21a9 9 0 00.383-.035M21 12c-1.274-4.057-5.065-7-9.542-7-1.433 0-2.825.274-4.088.788M2.458 12C3.732 7.943 7.523 5 12 5c1.778 0 3.483.479 4.875 1.172M12 21V3M3 3l18 18"})})});return jsxRuntimeExports.jsxs("div",{className:"container mx-auto px-4 py-10 max-w-[1200px] min-h-screen",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-light text-center mb-10",style:{color:PRIMARY_COLOR$2},children:"**Customer Login**"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row gap-8 justify-center",children:[jsxRuntimeExports.jsx("div",{className:"md:w-[450px] p-6 border border-gray-200 rounded-xl shadow-lg bg-white",children:jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-semibold mb-6",style:{color:PRIMARY_COLOR$2},children:"**Returning Customer**"}),d&&jsxRuntimeExports.jsx("div",{className:"bg-red-50 border border-red-400 text-red-700 px-3 py-2 text-sm rounded mb-4 font-medium",children:d}),jsxRuntimeExports.jsxs("form",{onSubmit:b,className:"space-y-4",children:[jsxRuntimeExports.jsx(Input$1,{type:"email",name:"email",placeholder:"Email Address",label:"Email Address",value:r.email,onChange:g,className:INPUT_BASE_CLASSES$1,labelClass:"block text-sm font-medium text-gray-700 mb-1",required:!0}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{id:"password",name:"password",type:n?"text":"password",placeholder:"Password",value:r.password,onChange:g,className:`${INPUT_BASE_CLASSES$1} pr-10`,required:!0}),jsxRuntimeExports.jsx(W,{toggle:()=>s(!n),isVisible:n})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-2 text-right",children:jsxRuntimeExports.jsx(Link,{to:"/reset",className:"text-[#00579A] hover:underline font-medium",children:"**Forgot your password?**"})})]}),jsxRuntimeExports.jsx(Button$1,{type:"submit",label:o?"Logging in...":"Login",disabled:o,className:`w-full ${PRIMARY_BUTTON_CLASSES$1} mt-4 ${o?"opacity-50 cursor-not-allowed":""}`}),jsxRuntimeExports.jsxs("p",{className:"text-center text-sm text-gray-600 pt-2",children:["Don't have an account?"," ",jsxRuntimeExports.jsx(Link,{to:"/register",className:"text-[#00579A] font-semibold hover:underline",children:"**Register Now**"})]})]})]})}),jsxRuntimeExports.jsxs("div",{className:"md:w-[450px] p-6 border border-gray-200 rounded-xl shadow-lg bg-white",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-semibold mb-4",style:{color:PRIMARY_COLOR$2},children:"**New Customer Benefits**"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-6 text-sm",children:"Creating an account grants you access to exclusive features, quicker checkouts, and easy order management."}),jsxRuntimeExports.jsxs("ul",{className:"text-gray-600 mb-8 space-y-3 text-sm list-disc pl-5",children:[jsxRuntimeExports.jsx("li",{className:"text-gray-700",children:"**Faster checkout process**"}),jsxRuntimeExports.jsx("li",{className:"text-gray-700",children:"**Order history and tracking**"}),jsxRuntimeExports.jsx("li",{className:"text-gray-700",children:"**Exclusive member discounts**"}),jsxRuntimeExports.jsx("li",{className:"text-gray-700",children:"Personalized recommendations"}),jsxRuntimeExports.jsx("li",{className:"text-gray-700",children:"Wishlist and saved items"})]}),jsxRuntimeExports.jsx(Link,{to:"/register",children:jsxRuntimeExports.jsx(Button$1,{label:"Create Account",className:`w-full ${SECONDARY_BUTTON_CLASSES$1} font-semibold`})})]})]})]})}const PRIMARY_COLOR$1="#00579A",PRIMARY_BUTTON_CLASSES=`bg-[${PRIMARY_COLOR$1}] text-white py-2.5 px-6 font-semibold text-sm rounded-lg shadow-md transition-all duration-200 hover:bg-[#00457A] focus:outline-none focus:ring-4 focus:ring-[${PRIMARY_COLOR$1}]/50`,SECONDARY_BUTTON_CLASSES=`bg-white text-[${PRIMARY_COLOR$1}] border border-[${PRIMARY_COLOR$1}] py-2.5 px-6 font-semibold text-sm rounded-lg transition-all duration-200 hover:bg-[#F0F8FF] focus:outline-none focus:ring-4 focus:ring-[${PRIMARY_COLOR$1}]/50`,INPUT_BASE_CLASSES=`w-full px-3 py-2.5 border border-gray-300 rounded-lg text-sm transition-shadow focus:ring-1 focus:ring-[${PRIMARY_COLOR$1}] focus:border-[${PRIMARY_COLOR$1}]`,LABEL_CLASSES="block text-sm font-medium text-gray-700 mb-1";function Reset(){const[r,e]=reactExports.useState(""),[n,s]=reactExports.useState(!1),[o,u]=reactExports.useState(""),[d,m]=reactExports.useState(""),p=async g=>{if(g.preventDefault(),!r){m("Please enter your email address."),u("");return}s(!0),m(""),u("");try{await new Promise(W=>setTimeout(W,1500)),{success:!0}.success&&(u("A password reset link has been sent to your email. Please check your inbox."),e(""))}catch{m("An unexpected error occurred. Please try again.")}finally{s(!1)}};return jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 p-4 py-8",children:jsxRuntimeExports.jsxs("form",{onSubmit:p,className:"w-full max-w-md bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:[jsxRuntimeExports.jsx("div",{className:"text-center mb-6",children:jsxRuntimeExports.jsx("h1",{className:`text-2xl font-bold text-[${PRIMARY_COLOR$1}] mb-2 tracking-normal`,children:"Forgot Your Password?"})}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-sm mb-6",children:"Enter the e-mail address associated with your account. We will send you a link to reset your password."}),o&&jsxRuntimeExports.jsxs("div",{role:"alert",className:"bg-green-50 border-l-4 border-green-500 text-green-700 p-3 mb-4 rounded-md text-sm",children:[jsxRuntimeExports.jsx("p",{className:"font-medium",children:"Check Your Email"}),jsxRuntimeExports.jsx("p",{children:o})]}),d&&jsxRuntimeExports.jsxs("div",{role:"alert",className:"bg-red-50 border-l-4 border-red-500 text-red-700 p-3 mb-4 rounded-md text-sm",children:[jsxRuntimeExports.jsx("p",{className:"font-medium",children:"Error"}),jsxRuntimeExports.jsx("p",{children:d})]}),jsxRuntimeExports.jsx("div",{className:"mb-6",children:jsxRuntimeExports.jsx(Input$1,{label:"* E-Mail Address",labelClass:LABEL_CLASSES,type:"email",placeholder:"your.email@example.com",value:r,onChange:g=>e(g.target.value),className:INPUT_BASE_CLASSES,required:!0,disabled:n||o})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[jsxRuntimeExports.jsx(Button$1,{type:"submit",label:n?"Sending...":"Submit",disabled:n||o,className:`w-full sm:w-1/2 ${PRIMARY_BUTTON_CLASSES} ${n||o?"opacity-70 cursor-not-allowed":""}`}),jsxRuntimeExports.jsx(Link,{to:"/login",className:"w-full sm:w-1/2",children:jsxRuntimeExports.jsx(Button$1,{type:"button",label:"Back to Login",className:`w-full ${SECONDARY_BUTTON_CLASSES}`})})]})]})})}const Input=({placeholder:r,type:e,name:n,value:s,onChange:o,error:u,className:d})=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("input",{placeholder:r,type:e,name:n,value:s,onChange:o,className:d}),u&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-xs mt-1",children:u})]}),Select$1=({values:r,name:e,value:n,onChange:s,error:o,className:u})=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("select",{name:e,value:n,onChange:s,className:u,children:[jsxRuntimeExports.jsx("option",{value:"",disabled:!0,children:"Select a Category"}),r.map(d=>jsxRuntimeExports.jsx("option",{value:d,children:d},d))]}),o&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-xs mt-1",children:o})]}),Button=({label:r,type:e,className:n})=>jsxRuntimeExports.jsx("button",{type:e,className:n,children:r}),CATEGORY_OPTIONS=["Pre-Sales","Delivery","After-Sales","Others"];function ContactUs(){const[r,e]=reactExports.useState({name:"",company:"",contactNo:"",email:"",subject:"",category:"",message:""}),[n,s]=reactExports.useState({}),[o,u]=reactExports.useState(!1),d=()=>{let g={};return r.name||(g.name="Name is required"),r.email||(g.email="Email is required"),r.contactNo||(g.contactNo="Contact Number is required"),r.company||(g.company="Company is required"),r.message||(g.message="Message is required"),r.subject||(g.subject="Subject is required"),r.category||(g.category="Category is required"),s(g),Object.keys(g).length===0},m=g=>{const{name:b,value:W}=g.target;e(X=>({...X,[b]:W}))},p=g=>{g.preventDefault(),d()&&(u(!0),setTimeout(()=>{u(!1)},5e3),e({name:"",company:"",contactNo:"",email:"",subject:"",category:"",message:""}))};return jsxRuntimeExports.jsx("div",{className:"font-sans text-gray-800",children:jsxRuntimeExports.jsx("div",{className:"max-w-xl mx-auto px-4 py-8",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-semibold text-[#00579A] text-center mb-6",children:"Contact Us"}),o&&jsxRuntimeExports.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative text-sm text-center",children:"Message sent successfully!"}),jsxRuntimeExports.jsxs("form",{onSubmit:p,className:"space-y-4",children:[jsxRuntimeExports.jsx(Input,{placeholder:"Name",type:"text",name:"name",value:r.name,onChange:m,error:n.name,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-[#00579A] focus:ring-1 focus:ring-[#00579A]"}),jsxRuntimeExports.jsx(Input,{placeholder:"Company",type:"text",name:"company",value:r.company,onChange:m,error:n.company,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-[#00579A] focus:ring-1 focus:ring-[#00579A]"}),jsxRuntimeExports.jsx(Input,{placeholder:"Contact Number",type:"tel",name:"contactNo",value:r.contactNo,error:n.contactNo,onChange:m,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-[#00579A] focus:ring-1 focus:ring-[#00579A]"}),jsxRuntimeExports.jsx(Input,{placeholder:"Email",type:"email",name:"email",value:r.email,error:n.email,onChange:m,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-[#00579A] focus:ring-1 focus:ring-[#00579A]"}),jsxRuntimeExports.jsx(Select$1,{values:CATEGORY_OPTIONS,name:"category",value:r.category,error:n.category,onChange:m,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-[#00579A] focus:ring-1 focus:ring-[#00579A] bg-white"}),jsxRuntimeExports.jsx(Input,{placeholder:"Subject",type:"text",name:"subject",value:r.subject,error:n.subject,onChange:m,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-[#00579A] focus:ring-1 focus:ring-[#00579A]"}),jsxRuntimeExports.jsx("textarea",{name:"message",placeholder:"Your Message",value:r.message,onChange:m,rows:"4",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-[#00579A] focus:ring-1 focus:ring-[#00579A]"}),jsxRuntimeExports.jsx("div",{className:"pt-2",children:jsxRuntimeExports.jsx(Button,{label:"Submit ",type:"submit",className:"w-full bg-[#00579A] text-white px-8 py-2.5 rounded-md hover:bg-[#00457A] transition-colors font-medium text-sm"})})]})]})})})}function Slider({images:r}){const[e,n]=reactExports.useState(0),s=reactExports.useCallback(()=>{n(d=>(d+1)%r.length)},[r.length]),o=()=>{n(d=>(d-1+r.length)%r.length)};if(reactExports.useEffect(()=>{if(r.length<2)return;const d=setInterval(s,4500);return()=>clearInterval(d)},[r.length,s]),!r||r.length===0)return null;const u=({direction:d})=>jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 sm:w-8 sm:h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:d==="prev"?"M15 19l-7-7 7-7":"M9 5l7 7-7 7"})});return jsxRuntimeExports.jsxs("div",{className:"relative w-full aspect-video md:aspect-w-16 md:aspect-h-6 overflow-hidden rounded-xl shadow-2xl",children:[jsxRuntimeExports.jsx("div",{className:"flex h-full transition-transform duration-700 ease-in-out",style:{transform:`translateX(-${e*100}%)`},children:r.map((d,m)=>jsxRuntimeExports.jsx("div",{className:"w-full flex-shrink-0",children:jsxRuntimeExports.jsx("img",{src:d,alt:`Slide ${m+1} of ${r.length}`,className:"w-full h-full object-cover",loading:"lazy"})},m))}),jsxRuntimeExports.jsx("button",{onClick:o,"aria-label":"Previous slide",className:`absolute left-4 top-1/2 transform -translate-y-1/2 z-20 \r
                           bg-black/30 text-white p-2 sm:p-3 rounded-full \r
                           hover:bg-black/60 transition-all duration-300 \r
                           focus:ring-2 focus:ring-white focus:outline-none`,children:jsxRuntimeExports.jsx(u,{direction:"prev"})}),jsxRuntimeExports.jsx("button",{onClick:s,"aria-label":"Next slide",className:`absolute right-4 top-1/2 transform -translate-y-1/2 z-20 \r
                           bg-black/30 text-white p-2 sm:p-3 rounded-full \r
                           hover:bg-black/60 transition-all duration-300 \r
                           focus:ring-2 focus:ring-white focus:outline-none`,children:jsxRuntimeExports.jsx(u,{direction:"next"})}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-4 sm:bottom-6 left-1/2 transform -translate-x-1/2 flex space-x-2 sm:space-x-3 bg-black/20 p-2 rounded-full backdrop-blur-sm",children:r.map((d,m)=>jsxRuntimeExports.jsx("button",{onClick:()=>n(m),"aria-label":`Go to slide ${m+1}`,className:`w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full transition-all duration-300 ring-2 ring-transparent
                            ${m===e?"bg-white scale-110 ring-white":"bg-gray-300/80 hover:bg-white/80"}`},m))})]})}const banner1=""+new URL("../assets/img/slider/Banner_HSM_SECURIO_Large_Office_1024x374px-1024x374.jpg",import.meta.url).href,banner2=""+new URL("../assets/img/slider/Homepage Banner-1024x374.jpg",import.meta.url).href,banner3=""+new URL("../assets/img/slider/Homepage Banner-4-1024x374.jpg",import.meta.url).href,banner4=""+new URL("../assets/img/slider/Printers-1024x374.jpg",import.meta.url).href,banner5=""+new URL("../assets/img/slider/SG_online-banner_Jun-1024x374.jpg",import.meta.url).href;function InfoBlock({title:r,description:e,image:n}){return jsxRuntimeExports.jsxs("div",{className:"bg-white p-4 h-full flex flex-col items-center text-center border border-gray-200 hover:border-gray-400 transition-colors duration-200 group-hover:shadow-sm",children:[jsxRuntimeExports.jsx("img",{src:n,alt:"",className:"w-10 h-10 object-contain mb-2"}),jsxRuntimeExports.jsx("h3",{className:"text-base font-medium text-gray-800 mb-1 uppercase tracking-tight",children:r}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600",children:e})]})}function CountProduct({reduce:r,count:e,increase:n,size:s="medium",fullWidth:o=!1}){const u={small:"h-8 text-sm",medium:"h-10 text-base",large:"h-12 text-lg"},d={small:"w-8",medium:"w-10",large:"w-12"};return jsxRuntimeExports.jsxs("div",{className:`flex items-center justify-between ${o?"w-full":"w-auto"} bg-white border border-gray-300 rounded-lg overflow-hidden hover:border-gray-400 transition-colors`,children:[jsxRuntimeExports.jsx("button",{onClick:r,className:`${d[s]} bg-gray-100 hover:bg-gray-200 text-gray-700 font-bold flex items-center justify-center transition-colors border-r border-gray-300`,"aria-label":"Decrease quantity",children:"\u2212"}),jsxRuntimeExports.jsx("div",{className:`flex-1 flex items-center justify-center ${u[s]} font-semibold text-gray-900 bg-white px-2 min-w-[60px]`,children:jsxRuntimeExports.jsx("span",{className:"font-bold",children:e})}),jsxRuntimeExports.jsx("button",{onClick:n,className:`${d[s]} bg-gray-100 hover:bg-gray-200 text-gray-700 font-bold flex items-center justify-center transition-colors border-l border-gray-300`,"aria-label":"Increase quantity",children:"+"})]})}const PRIMARY_COLOR="#00579A";function ProductCard({product:r,details:e=!1,canToggle:n=!0}){const{count:s,increase:o,reduce:u,addProduct:d,addFavorite:m,favoriteStatus:p,setFavoriteStatus:g,cart:b,favorite:W,clearCart:X}=reactExports.useContext(CartContext),[he,_e]=reactExports.useState(!1),[we,ve]=reactExports.useState(!1),[pe,Ae]=reactExports.useState(e),[Re,Pe]=reactExports.useState(!1),{user:Oe}=reactExports.useContext(AuthContext),Ve=W.some(ge=>ge.id===r.id),ie=s[r.id]?.default||0,Z=!!r?.available_options&&r.available_options.length>0;reactExports.useEffect(()=>{const ge=b.some(Ce=>Ce.id===r.id&&Ce.option==="default");Z||ve(ge),e&&Ae(!0)},[b,r.id,e,Z]);const ee=reactExports.useCallback(()=>{g(ge=>({...ge,[r.id]:!1})),Ve&&X()},[r.id,g,X,Ve]),ae=reactExports.useCallback(()=>{Pe(!1)},[]),oe=reactExports.useCallback((ge="default")=>{const Ce=(s[r.id]?.[ge]||0)+1;o(r.id,ge),d(r,ge,Ce),Ce===1&&Pe(!0),ge==="default"&&!Z&&ve(!0)},[r,o,d,s,Z]),ue=reactExports.useCallback((ge="default")=>{const Ce=Math.max((s[r.id]?.[ge]||0)-1,0);u(r.id,ge),Ce>0?d(r,ge,Ce):(d(r,ge,0),ge==="default"&&!Z&&ve(!1))},[r,u,d,s,Z]),ne=reactExports.useCallback(()=>{if(Z&&e&&ie>0)return;(s[r.id]?.default||0)===0&&(d(r,"default",1),Pe(!0)),ve(!0)},[r,d,s,Z,e,ie]),mn=ge=>{ge.preventDefault(),ge.stopPropagation(),m(r)},Mt=e?"group border border-gray-200 p-4 rounded-xl bg-white shadow-lg flex flex-col md:flex-row gap-6 w-full":"group border border-gray-200 p-3 rounded-lg bg-white hover:shadow-md transition-all duration-300 h-full hover:border-gray-300 flex flex-col";return jsxRuntimeExports.jsxs("div",{className:Mt,onMouseEnter:()=>!e&&Ae(!0),onMouseLeave:()=>!e&&Ae(!1),children:[p[r.id]&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-white p-6 rounded-lg max-w-md mx-4 shadow-xl",children:[jsxRuntimeExports.jsx("h4",{className:"text-lg font-normal text-gray-800 mb-3 text-center",children:"Item added"}),Oe?jsxRuntimeExports.jsxs("p",{className:"text-gray-600 mb-4 text-center",children:["Success: You have added"," ",jsxRuntimeExports.jsx("span",{className:`text-[${PRIMARY_COLOR}] font-medium`,children:r.product_name})," to your wish list!"]}):jsxRuntimeExports.jsxs("p",{className:"text-gray-600 mb-4 text-center",children:["You must login or create an account to save"," ",jsxRuntimeExports.jsx("span",{className:`text-[${PRIMARY_COLOR}] font-medium`,children:r.product_name})," to your wish list!"]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx(Button$1,{label:"OK",onClick:ee,className:`bg-[${PRIMARY_COLOR}] text-white hover:bg-[#004173] transition-colors py-2 px-6 rounded-md font-medium text-sm`})})]})}),Re&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-white p-6 rounded-lg max-w-md mx-4 shadow-xl",children:[jsxRuntimeExports.jsx("h4",{className:"text-lg font-normal text-gray-800 mb-3 text-center",children:"Success!"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-600 mb-4 text-center",children:[jsxRuntimeExports.jsx("span",{className:`text-[${PRIMARY_COLOR}] font-medium`,children:r.product_name})," has been successfully added to your shopping cart."]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-3",children:[jsxRuntimeExports.jsx(Button$1,{label:"Continue Shopping",onClick:ae,className:"bg-gray-200 text-gray-800 hover:bg-gray-300 transition-colors py-2 px-4 rounded-md font-medium text-sm"}),jsxRuntimeExports.jsx(Link,{to:"/cart",children:jsxRuntimeExports.jsx(Button$1,{label:"View Cart",onClick:ae,className:`bg-[${PRIMARY_COLOR}] text-white hover:bg-[#004173] transition-colors py-2 px-4 rounded-md font-medium text-sm`})})]})]})}),jsxRuntimeExports.jsxs("div",{className:`relative rounded-md overflow-hidden flex-shrink-0 ${e?"md:w-1/3 w-full":"mb-2"}`,children:[jsxRuntimeExports.jsx("div",{className:`flex justify-center items-center bg-gray-50 rounded-md group-hover:bg-gray-100 transition-colors ${e?"min-h-[200px] p-4":"min-h-[140px] p-2"}`,children:jsxRuntimeExports.jsx(Link,{to:`/product/${r?.id}`,className:"flex justify-center items-center w-full h-full",children:r?.img&&jsxRuntimeExports.jsx("img",{src:r.img,alt:r.product_name||"Product",className:`max-w-full object-contain transition-transform duration-300 group-hover:scale-105 ${e?"max-h-[200px]":"max-h-[120px]"}`,loading:"lazy"})})}),jsxRuntimeExports.jsx("div",{className:`absolute top-2 right-2 transition-all duration-300 ${e||pe?"opacity-100 scale-100":"opacity-0 scale-90"}`,children:jsxRuntimeExports.jsx("button",{onClick:mn,className:"cursor-pointer bg-white rounded-full p-1.5 shadow-md hover:bg-gray-50 transition-colors","aria-label":"Add to favorites",children:jsxRuntimeExports.jsx(Saved,{isFilled:Ve})})})]}),jsxRuntimeExports.jsxs("div",{className:`${e?"flex-1 flex flex-col":"flex flex-col flex-1"}`,children:[jsxRuntimeExports.jsx(Link,{to:`/product/${r?.id}`,className:"block mb-2 min-h-[40px]",children:jsxRuntimeExports.jsx("h3",{className:`font-medium text-gray-900 hover:text-blue-600 transition-colors duration-200 line-clamp-2 leading-snug ${e?"text-xl font-semibold":"text-sm"}`,children:r?.product_name||"Unnamed Product"})}),jsxRuntimeExports.jsxs("div",{className:"mb-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[jsxRuntimeExports.jsxs("p",{className:`font-bold text-gray-900 ${e?"text-2xl":"text-lg"}`,children:["$",r?.price?.current_price?.toFixed(2)||"0.00"]}),r?.price?.savings&&jsxRuntimeExports.jsxs("span",{className:"bg-green-100 text-green-800 text-xs font-medium px-1.5 py-0.5 rounded-full",children:["Save $",r.price.savings]})]}),r?.price?.retail_price&&jsxRuntimeExports.jsxs("p",{className:"text-gray-500 text-xs line-through",children:["Retail: $",r.price.retail_price]})]}),r?.bulk_pricing&&jsxRuntimeExports.jsxs("div",{className:"mb-3 p-2 bg-blue-50 rounded-lg border border-blue-100",children:[jsxRuntimeExports.jsxs("p",{className:"font-semibold text-blue-800 text-xs mb-0.5",children:["\u{1F525} Bulk Deal: ",r.bulk_pricing.quantity||"-"," units"]}),jsxRuntimeExports.jsxs("p",{className:"text-blue-700 text-xs font-medium",children:["S$",r.bulk_pricing.bulk_price||"-"," each",r.bulk_pricing.savings&&jsxRuntimeExports.jsxs("span",{className:"text-green-600 ml-1",children:["(Save $",r.bulk_pricing.savings," per unit)"]})]})]}),e&&r?.features&&jsxRuntimeExports.jsx("div",{className:"flex-grow mb-3",children:jsxRuntimeExports.jsx("ul",{className:"space-y-1",children:r.features.slice(0,3).map((ge,Ce)=>jsxRuntimeExports.jsxs("li",{className:"text-xs text-gray-600 flex items-start",children:[jsxRuntimeExports.jsx("span",{className:"text-green-500 mr-1",children:"\u2713"}),ge]},Ce))})}),e&&Z&&jsxRuntimeExports.jsxs("div",{className:"mt-auto mb-3",children:[jsxRuntimeExports.jsxs("div",{onClick:()=>_e(!he),className:"flex items-center justify-between cursor-pointer py-1.5 px-2 bg-gray-50 rounded-md hover:bg-gray-100 transition-colors",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-semibold text-gray-800",children:"Available Options"}),jsxRuntimeExports.jsx("span",{className:"text-gray-500 transform transition-transform text-xs",children:he?"\u25B2":"\u25BC"})]}),he&&jsxRuntimeExports.jsx("div",{className:"mt-2 space-y-2 p-2 border border-gray-100 rounded-md",children:r.available_options.map((ge,Ce)=>{const ke=ge.type,We=s[r.id]?.[ke]||0;return jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between gap-3 p-2 bg-white rounded-md border border-gray-100",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-700 truncate",children:ge.type}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500",children:["$",ge.price?.toFixed(2)||r?.price?.current_price?.toFixed(2)||"0.00"]})]}),jsxRuntimeExports.jsx(CountProduct,{reduce:()=>ue(ke),count:We,increase:()=>oe(ke),size:"small",fullWidth:!1})]},Ce)})})]}),jsxRuntimeExports.jsx("div",{className:"mt-auto pt-3 border-t border-gray-200 w-full",children:e?jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[!Z&&ie>0&&jsxRuntimeExports.jsx(CountProduct,{reduce:()=>ue("default"),count:ie,increase:()=>oe("default"),size:"small",fullWidth:!0}),!(ie>0&&!Z)&&jsxRuntimeExports.jsx(Button$1,{label:"Add to Cart",onClick:ne,className:"text-white transition-colors py-2 px-3 rounded-md font-medium text-sm shadow-sm hover:shadow-md bg-[#00579A] hover:bg-[#00457A]"})]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:Z?jsxRuntimeExports.jsx(Link,{to:`/product/${r?.id}`,children:jsxRuntimeExports.jsx(Button$1,{label:"View Options",className:"w-full text-white transition-colors py-2 px-3 rounded-md font-medium text-sm shadow-sm hover:shadow-md bg-[#00579A] hover:bg-[#00457A]"})}):n&&(we||ie>0)?jsxRuntimeExports.jsx(CountProduct,{reduce:()=>ue("default"),count:ie,increase:()=>oe("default"),size:"small",fullWidth:!0}):jsxRuntimeExports.jsx(Button$1,{label:"Add to Cart",onClick:ne,className:" w-full text-white transition-colors py-2 px-3 rounded-md font-medium text-sm shadow-sm hover:shadow-md bg-[#00579A] hover:bg-[#00457A]"})})})]})]})}function CategoryBlock({label:r,products:e=[]}){return jsxRuntimeExports.jsxs("div",{className:"my-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-semibold text-[#00579A] mb-4 pb-3 text-center border-b border-gray-200",children:r}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:e.length>0?e.map(n=>jsxRuntimeExports.jsx(ProductCard,{product:n},n.id)):jsxRuntimeExports.jsx("p",{className:"text-gray-500",children:"No products found"})})]})}const featuredProduct=query(collection(db,"products"),where("featured_products","==",!0)),newIn=query(collection(db,"products"),where("new_in","==",!0)),bestDeals=query(collection(db,"products"),where("best_deals","==",!0));function Home(){const r=[banner1,banner2,banner3,banner4,banner5],[e,n]=reactExports.useState([]),[s,o]=reactExports.useState([]),[u,d]=reactExports.useState([]),[m,p]=reactExports.useState(!0);reactExports.useEffect(()=>{(async()=>{try{const[W,X,he]=await Promise.all([getDocs(featuredProduct),getDocs(newIn),getDocs(bestDeals)]);n(W.docs.map(_e=>({id:_e.id,..._e.data()}))),o(X.docs.map(_e=>({id:_e.id,..._e.data()}))),d(he.docs.map(_e=>({id:_e.id,..._e.data()})))}catch(W){console.error("Error fetching products:",W)}finally{p(!1)}})()},[]);const g=()=>jsxRuntimeExports.jsxs("div",{className:"animate-pulse space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:[...Array(4)].map((b,W)=>jsxRuntimeExports.jsx("div",{className:"bg-white rounded-xl shadow-lg h-72"},W))})]});return jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 bg-white",children:jsxRuntimeExports.jsxs("div",{className:"w-full",children:[jsxRuntimeExports.jsx("div",{className:"w-full mb-8 rounded-xl overflow-hidden shadow-2xl",children:jsxRuntimeExports.jsx(Slider,{images:r})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-12",children:[jsxRuntimeExports.jsx(Link,{to:"/faq",className:"group transition duration-300 hover:scale-[1.02] hover:shadow-xl rounded-xl overflow-hidden",children:jsxRuntimeExports.jsx(InfoBlock,{title:"EASY",description:"ONLINE PAYMENT",image:"../assets/img/info/payment.png",className:"bg-gray-50 border border-gray-100 p-4 rounded-xl text-center shadow-sm group-hover:bg-blue-50 group-hover:border-blue-300"})}),jsxRuntimeExports.jsx(Link,{to:"/faq",className:"group transition duration-300 hover:scale-[1.02] hover:shadow-xl rounded-xl overflow-hidden",children:jsxRuntimeExports.jsx(InfoBlock,{title:"DELIVERY",description:"WITHIN SINGAPORE",image:"../assets/img/info/delivery.png",className:"bg-gray-50 border border-gray-100 p-4 rounded-xl text-center shadow-sm group-hover:bg-blue-50 group-hover:border-blue-300"})}),jsxRuntimeExports.jsx("div",{className:"group transition duration-300 hover:scale-[1.02] hover:shadow-xl rounded-xl overflow-hidden",children:jsxRuntimeExports.jsx(InfoBlock,{title:"COLLECTION",description:"AT RETAIL OUTLET",image:"../assets/img/info/gift.png",className:"bg-gray-50 border border-gray-100 p-4 rounded-xl text-center shadow-sm group-hover:bg-blue-50 group-hover:border-blue-300"})}),jsxRuntimeExports.jsx(Link,{to:"/faq",className:"group transition duration-300 hover:scale-[1.02] hover:shadow-xl rounded-xl overflow-hidden",children:jsxRuntimeExports.jsx(InfoBlock,{title:"BUY MORE",description:"TO ENJOY GREAT DISCOUNTS",image:"../assets/img/info/sales.png",className:"bg-gray-50 border border-gray-100 p-4 rounded-xl text-center shadow-sm group-hover:bg-blue-50 group-hover:border-blue-300"})})]}),jsxRuntimeExports.jsx("div",{className:"space-y-16",children:m?jsxRuntimeExports.jsx(g,{}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CategoryBlock,{label:"FEATURED PRODUCTS",products:e}),jsxRuntimeExports.jsx(CategoryBlock,{label:" NEW IN",products:s}),jsxRuntimeExports.jsx(CategoryBlock,{label:"BEST DEALS",products:u})]})})]})})}function RecommendedProducts({category:r,currentProductId:e}){const{fetchRecommendedProducts:n}=reactExports.useContext(ProductsContext),[s,o]=reactExports.useState([]),[u,d]=reactExports.useState(!0);return reactExports.useEffect(()=>{r&&e&&(d(!0),n(r,e).then(m=>{o(m)}).catch(m=>{console.error("Failed to load recommendations:",m),o([])}).finally(()=>{d(!1)}))},[r,e,n]),u?jsxRuntimeExports.jsx("div",{className:"text-center py-10 text-gray-500",children:" Loading"}):s.length===0?null:jsxRuntimeExports.jsxs("div",{className:"mt-12 pt-6 border-t border-gray-100",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl text-[#00579A] font-semibold mb-6",children:"Related Products in this Category"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-3 lg:grid-cols-4 lg:gap-6",children:s.map(m=>jsxRuntimeExports.jsx(ProductCard,{product:m,details:!1,canToggle:!0},m.id))})]})}function ProductCartDetail({product:r}){return r?jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto p-4",children:[jsxRuntimeExports.jsx(ProductCard,{details:!0,product:r,canToggle:!1}),jsxRuntimeExports.jsx(RecommendedProducts,{category:r.category,currentProductId:r.id})]}):jsxRuntimeExports.jsx("div",{children:"Loading product details..."})}const ProductPage=()=>{const{productId:r}=useParams(),[e,n]=reactExports.useState(null),[s,o]=reactExports.useState(!0);return reactExports.useEffect(()=>{(async()=>{try{const d=collection(db,"products"),m=query(d,where("id","==",r)),p=await getDocs(m);if(p.empty)console.log("Product not found");else{const g=p.docs[0];n({id:g.id,...g.data()})}}catch(d){console.error("Loading error:",d)}finally{o(!1)}})()},[r]),s?jsxRuntimeExports.jsx("div",{children:"Loading..."}):e?jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(ProductCartDetail,{product:e})}):jsxRuntimeExports.jsx("div",{children:"Product not found"})};function Select({values:r,label:e,name:n,value:s,onChange:o}){return jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("label",{htmlFor:n,className:"text-sm font-medium text-gray-700 w-fit shrink-0",children:e}),jsxRuntimeExports.jsx("select",{id:n,name:n,value:s,onChange:o,className:"flex-1 min-w-0 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all duration-200 text-gray-700 bg-white text-sm",children:r.map((u,d)=>jsxRuntimeExports.jsx("option",{value:u,children:u},d))})]})}const CategoryPage=()=>{const[r,e]=reactExports.useState("Default"),{categoryName:n}=useParams(),{products:s,loading:o,fetchProducts:u}=reactExports.useContext(ProductsContext);reactExports.useEffect(()=>{u(n)},[n]);const d=p=>{e(p.target.value)},m=reactExports.useMemo(()=>{const p=[...s];switch(r){case"Price: Low to High":p.sort((g,b)=>g.price.current_price-b.price.current_price);break;case"Price: High to Low":p.sort((g,b)=>b.price.current_price-g.price.current_price);break;case"Name: A to Z":p.sort((g,b)=>g.product_name.localeCompare(b.product_name));break;case"Name: Z to A":p.sort((g,b)=>b.product_name.localeCompare(g.product_name));break}return p},[s,r]);return o?jsxRuntimeExports.jsx("div",{className:"flex justify-center items-center h-64",children:jsxRuntimeExports.jsx("div",{className:"text-xl text-gray-600",children:"loading..."})}):jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto",children:[jsxRuntimeExports.jsx("div",{className:"mb-6 w-full sm:w-64",children:jsxRuntimeExports.jsx(Select,{label:"Sort by",name:"sort-select",values:["Default","Price: Low to High","Price: High to Low","Name: A to Z","Name: Z to A"],value:r,onChange:d})}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 md:gap-8",children:m.map(p=>jsxRuntimeExports.jsx(ProductCard,{product:p},p.id))})]})})};function CartPage(){const{cart:r,updateCartQuantity:e,clearCart:n}=reactExports.useContext(CartContext),[s,o]=reactExports.useState(!1),{subtotal:u,gst:d,total:m,cartCount:p}=reactExports.useMemo(()=>{const X=r.reduce((ve,pe)=>ve+pe.quantity*pe.price.current_price,0),_e=Math.round(X*.09*100)/100,we=Math.round((X+_e)*100)/100;return{subtotal:X,gst:_e,total:we,cartCount:r.length}},[r]),g=()=>{console.log("Processing order for total:",m),setTimeout(()=>{n&&n(),o(!0)},500)},b=(X,he)=>{e(X,-1/0,he)},W={color:"#00579A"};return s?jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 bg-white",children:jsxRuntimeExports.jsxs("div",{className:"text-center py-16 px-4 bg-white rounded-xl border border-green-300 shadow-xl max-w-lg mx-auto",children:[jsxRuntimeExports.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-6",children:jsxRuntimeExports.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),jsxRuntimeExports.jsx("h1",{className:"text-3xl font-light text-gray-900 mb-4",style:W,children:"Order Placed Successfully!"}),jsxRuntimeExports.jsx("p",{className:"text-base text-gray-600 mb-6",children:"Thank you for your purchase. We've sent a confirmation email to your address."}),jsxRuntimeExports.jsx(Link,{to:"/",children:jsxRuntimeExports.jsx(Button$1,{className:"w-full mt-2 border border-gray-300 text-gray-700 font-medium py-2.5 rounded-lg hover:bg-gray-100 transition",label:"Continue Shopping"})})]})}):jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-10 bg-white",children:[jsxRuntimeExports.jsxs("h1",{className:"text-3xl font-light mb-8 pb-3 border-b border-gray-200",style:W,children:["Shopping Cart (",p," ",p===1?"item":"items",")"]}),p===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-16 bg-gray-50 rounded-xl border border-gray-200",children:[jsxRuntimeExports.jsx("p",{className:"text-xl font-medium text-gray-500 mb-5",children:"Your cart is empty "}),jsxRuntimeExports.jsx(Link,{to:"/",className:"text-base text-blue-600 hover:text-blue-700 font-medium transition",children:"Start Shopping"})]}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[jsxRuntimeExports.jsx("div",{className:"lg:w-2/3",children:jsxRuntimeExports.jsx("div",{className:"bg-white rounded-xl border border-gray-200 divide-y divide-gray-100",children:r.map(X=>jsxRuntimeExports.jsxs("div",{className:"py-4 px-4 flex items-start justify-between relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-4 sm:gap-6",children:[jsxRuntimeExports.jsx(Link,{to:`/product/${X.id}`,children:jsxRuntimeExports.jsx("img",{src:X.img,alt:X.product_name,className:"w-20 h-20 sm:w-24 sm:h-24 object-cover rounded-md border border-gray-200 flex-shrink-0 transition-shadow hover:shadow-lg"})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-start",children:[jsxRuntimeExports.jsx(Link,{to:`/product/${X.id}`,className:"hover:text-blue-600 transition",children:jsxRuntimeExports.jsx("h3",{className:"font-medium text-base text-gray-900 mb-1",children:X.product_name})}),(X.type||X.option)&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:[X.type&&jsxRuntimeExports.jsx("span",{children:X.type}),X.type&&X.option!=="default"&&jsxRuntimeExports.jsx("span",{children:" | "}),X.option&&X.option!=="default"&&jsxRuntimeExports.jsxs("span",{children:["Option: ",X.option]})]}),jsxRuntimeExports.jsxs("p",{className:"text-lg font-bold text-gray-800 mt-1",children:["$",X.price.current_price.toFixed(2)]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-end gap-2 justify-start pt-1",children:[jsxRuntimeExports.jsx("button",{onClick:()=>b(X.id,X.option),className:"text-[#00579A] font-medium transition hover:text-[#00457A] duration-200",children:"Remove"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg overflow-hidden h-7",children:[jsxRuntimeExports.jsx("button",{onClick:()=>e(X.id,-1,X.option),disabled:X.quantity<=1,className:"w-7 h-full flex items-center justify-center text-lg text-gray-600 hover:bg-gray-100 transition disabled:opacity-50",children:"\u2212"}),jsxRuntimeExports.jsx("span",{className:"w-8 text-center text-sm bg-white",children:X.quantity}),jsxRuntimeExports.jsx("button",{onClick:()=>e(X.id,1,X.option),className:"w-7 h-full flex items-center justify-center text-lg text-gray-600 hover:bg-gray-100 transition",children:"+"})]})]})]},`${X.id}-${X.option}`))})}),jsxRuntimeExports.jsx("div",{className:"lg:w-1/3",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-5 lg:sticky lg:top-10 h-min",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900 pb-3",children:"Order Summary"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Sub-Total:"}),jsxRuntimeExports.jsxs("span",{className:"font-medium text-gray-800",children:["$",u.toFixed(2)]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"GST 9% (inclusive):"}),jsxRuntimeExports.jsxs("span",{className:"font-medium text-gray-800",children:["$",d.toFixed(2)]})]}),jsxRuntimeExports.jsx("div",{className:"border-t border-gray-300 pt-3 mt-3",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-lg font-bold",style:W,children:[jsxRuntimeExports.jsx("span",{children:"Order Total:"}),jsxRuntimeExports.jsxs("span",{children:["$",m.toFixed(2)]})]})})]}),jsxRuntimeExports.jsx(Button$1,{onClick:g,className:"w-full bg-[#00579A] text-white font-medium py-2.5 rounded-lg hover:bg-[#00457A] transition",label:"Proceed to Checkout"}),jsxRuntimeExports.jsx(Link,{to:"/",children:jsxRuntimeExports.jsx(Button$1,{className:"w-full mt-2 border border-gray-300 text-gray-700 font-medium py-2.5 rounded-lg hover:bg-gray-100 transition",label:"Continue Shopping"})})]})})]})]})}function AccountBlock({onclick:r,img:e,title:n,subtitle:s}){return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{onclick:r,children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{children:n}),jsxRuntimeExports.jsx("p",{children:s})]})})})}const BRAND_PRIMARY_COLOR$1="#00579A";function MyAccount(){return jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-10",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-light mb-8 pb-3 border-b border-gray-200",style:{color:BRAND_PRIMARY_COLOR$1},children:"My Account"}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:jsxRuntimeExports.jsx(Link,{to:"/mywishlist",className:"block transition-all duration-300 hover:shadow-lg rounded-xl",children:jsxRuntimeExports.jsx(AccountBlock,{title:"My Wishlist",subtitle:"Keeps track of all your saved items.",className:"p-5 border border-gray-200 bg-white rounded-xl"})})})]})}function Logout(){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h1",{children:"Account Logout"}),jsxRuntimeExports.jsx("p",{children:"You have been logged off your account. It is now safe to leave the computer. Your shopping cart has been saved, the items inside it will be restored whenever you log back into your account."}),jsxRuntimeExports.jsx(Button$1,{label:"CONTINUE"})]})}const BRAND_PRIMARY_COLOR="#00579A",BRAND_HOVER_COLOR="#00457A";function MyWishList(){const{favorite:r,addFavorite:e,cart:n,addProduct:s,count:o,increase:u}=reactExports.useContext(CartContext),{user:d}=reactExports.useContext(AuthContext),m=b=>{e(b)},p=b=>{const W="default",X=(o[b.id]?.[W]||0)+1;u(b.id,W),s(b,W,X)},g=b=>n.some(W=>W.id===b&&W.option==="default");return d?jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-10",children:[jsxRuntimeExports.jsxs("h1",{className:"text-3xl font-light mb-8 pb-3 border-b border-gray-200",style:{color:BRAND_PRIMARY_COLOR},children:["My Wish List (",r.length," ",r.length===1?"item":"items",")"]}),r.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-16 bg-white border border-gray-200 rounded-xl shadow-sm",children:[jsxRuntimeExports.jsx("p",{className:"text-xl text-gray-600 mb-6",children:"Your wish list is currently empty."}),jsxRuntimeExports.jsx(Link,{to:"/home",className:"inline-block px-8 py-3 rounded-lg font-semibold text-white transition-colors shadow-md",style:{backgroundColor:BRAND_PRIMARY_COLOR,hover:{backgroundColor:BRAND_HOVER_COLOR}},children:"Continue Shopping"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 bg-gray-50 p-4 rounded-t-lg border border-gray-200",children:[jsxRuntimeExports.jsx("div",{className:"col-span-2",children:jsxRuntimeExports.jsx("p",{className:"font-medium text-gray-700 text-sm",children:"Image"})}),jsxRuntimeExports.jsx("div",{className:"col-span-3",children:jsxRuntimeExports.jsx("p",{className:"font-medium text-gray-700 text-sm",children:"Product Name"})}),jsxRuntimeExports.jsx("div",{className:"col-span-2",children:jsxRuntimeExports.jsx("p",{className:"font-medium text-gray-700 text-sm",children:"Availability"})}),jsxRuntimeExports.jsx("div",{className:"col-span-1",children:jsxRuntimeExports.jsx("p",{className:"font-medium text-gray-700 text-sm",children:"Price"})}),jsxRuntimeExports.jsx("div",{className:"col-span-2 text-right",children:jsxRuntimeExports.jsx("p",{className:"font-medium text-gray-700 text-sm",children:"Unit Price"})}),jsxRuntimeExports.jsx("div",{className:"col-span-2",children:jsxRuntimeExports.jsx("p",{className:"font-medium text-gray-700 text-sm",children:"Action"})})]}),jsxRuntimeExports.jsx("div",{className:"bg-white border border-gray-200 rounded-xl md:rounded-t-none divide-y divide-gray-100 shadow-md",children:r.map(b=>jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 p-4 last:border-b-0 hover:bg-gray-50 transition-colors items-center",children:[jsxRuntimeExports.jsx("div",{className:"md:col-span-2 flex justify-center md:justify-start",children:jsxRuntimeExports.jsx(Link,{to:`/product/${b.id}`,children:jsxRuntimeExports.jsx("img",{src:b.img,alt:b.product_name,className:"w-16 h-16 object-cover border border-gray-200 rounded-md hover:shadow-lg transition-shadow"})})}),jsxRuntimeExports.jsx("div",{className:"md:col-span-3",children:jsxRuntimeExports.jsx(Link,{to:`/product/${b.id}`,className:"hover:text-blue-600 transition-colors",children:jsxRuntimeExports.jsx("p",{className:"font-semibold text-gray-800 text-base",children:b.product_name})})}),jsxRuntimeExports.jsx("div",{className:"md:col-span-2",children:jsxRuntimeExports.jsx("p",{className:"text-green-600 font-medium text-sm",children:"In Stock"})}),jsxRuntimeExports.jsx("div",{className:"md:col-span-1 hidden md:block"}),jsxRuntimeExports.jsxs("div",{className:"md:col-span-2 text-left md:text-right",children:[jsxRuntimeExports.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["S$",b.price?.current_price?.toFixed(2)||"0.00"]}),b.price?.retail_price&&jsxRuntimeExports.jsxs("p",{className:"text-gray-500 text-xs line-through",children:["$",b.price.retail_price.toFixed(2)]})]}),jsxRuntimeExports.jsxs("div",{className:"md:col-span-2 flex flex-col gap-2",children:[g(b.id)?jsxRuntimeExports.jsxs(Link,{to:"/cart",className:"flex items-center justify-center gap-1 text-green-600 py-2 border border-green-300 rounded-md bg-green-50",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),jsxRuntimeExports.jsx("span",{className:"text-sm font-semibold",children:"In Cart"})]}):jsxRuntimeExports.jsx(Button$1,{label:"Add to Cart",onClick:()=>p(b),className:"bg-[#00579A] text-white hover:bg-[#004173] transition-colors py-2 px-6 rounded-md font-medium text-sm"}),jsxRuntimeExports.jsx(Button$1,{label:"Remove",onClick:()=>m(b),className:"w-full bg-blue-50 text-grey-600 hover:bg-blue-100 transition-colors py-2 rounded-md font-medium text-sm border border-blue-200"})]})]},b.id))}),jsxRuntimeExports.jsxs("div",{className:"mt-6 flex justify-between items-center py-2",children:[jsxRuntimeExports.jsxs(Link,{to:"/products",className:"text-gray-600 hover:text-gray-800 transition-colors font-medium text-sm flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:"text-xl",style:{transform:"scaleY(-1)"},children:"\u2B90"})," Continue Shopping"]}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-500",children:[r.length," item",r.length!==1?"s":""," saved"]})]})]})]}):jsxRuntimeExports.jsx("div",{className:"max-w-6xl mx-auto px-4 py-16 text-center bg-gray-50 rounded-lg my-8",children:jsxRuntimeExports.jsxs("p",{className:"text-xl text-gray-700 font-medium mb-4",children:["Please ",jsxRuntimeExports.jsx(Link,{to:"/login",className:"text-[#00579A] ue-700 transition font-bold",children:"log in"})," to view your wish list."]})})}function AboutUs(){return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-white",children:[jsxRuntimeExports.jsxs("div",{className:"relative h-32 sm:h-48 w-full overflow-hidden shadow-md",children:[jsxRuntimeExports.jsx("img",{src:"./assets/img/aboutUs/banner-min-1-3.jpg",alt:"Office supplies and modern workspace banner",className:"w-full h-full object-cover"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center",children:jsxRuntimeExports.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-white drop-shadow-sm",children:"ABOUT US"})})]}),jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-10",children:jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 gap-6 md:gap-8 items-center",children:[jsxRuntimeExports.jsx("div",{className:"order-2 md:order-1",children:jsxRuntimeExports.jsx("img",{src:"./assets/img/aboutUs/img-min.jpg",alt:"Team working in a modern office",className:"w-full h-auto rounded-md shadow-lg transition-transform duration-300 hover:scale-[1.005]"})}),jsxRuntimeExports.jsxs("div",{className:"order-1 md:order-2",children:[jsxRuntimeExports.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-3 leading-tight",children:["Good Quality Products, ",jsxRuntimeExports.jsx("br",{})," Good Quality Services!"]}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-700 space-y-2",children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{className:"text-blue-600 font-semibold",children:"Home n Office"})," aims to provide a comprehensive range of stationery, office products & gifts through retailing and e-commerce to consumers and corporates."]}),jsxRuntimeExports.jsx("p",{children:"Our online store serves customers daily. Our product range includes basic stationery, copier paper, printers, ink cartridges & toners, paper shredders, whiteboards etc."}),jsxRuntimeExports.jsx("p",{children:"Our services include photocopying, digital printing, scanning, binding and lamination."})]})]})]})}),jsxRuntimeExports.jsx("div",{className:"bg-gray-50 py-8 border-t border-b border-gray-100",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"Our Commitment & Operations"}),jsxRuntimeExports.jsx("p",{className:"text-gray-700 text-xs leading-relaxed",children:"We are committed to providing our customers with good quality products and excellent service. We are proud of our reputation as a reliable supplier and have built up a good customer base among consumers, SMEs and large companies in the Central Business District (CBD) and across the island."}),jsxRuntimeExports.jsx("p",{className:"text-gray-700 text-xs leading-relaxed mt-2",children:"We have a core team of experienced staff who are familiar with the office supply needs of SMEs and MNCs. Our distribution center warehouse and backroom operations centre enable us to stock up on common stationery items to satisfy corporate orders."})]})})]})}const privacyPolicy=[{title:"1. What information do we collect?",sections:["1.1. We collect information from you when you register on our site, place an order or subscribe to our newsletter.","1.2. When ordering or registering on our site, as appropriate, you may be asked to enter your: name, e-mail address, mailing address or phone number. You may, however, visit our site anonymously."]},{title:"2. What do we use your information for?",sections:["2.1 Any of the information we collect from you may be used in one of the following ways:","2.1.1. To personalize your experience (your information helps us to better respond to your individual needs)","2.1.2. To improve our website (we continually strive to improve our website offerings based on the information and feedback we receive from you)","2.1.3. To improve customer service (your information helps us to more effectively respond to your customer service requests and support needs)","2.1.4. To process transactions (Your information, whether public or private, will not be sold, exchanged, transferred, or given to any other company for any reason whatsoever, without your consent, other than for the express purpose of delivering the purchased product or service requested).","2.1.5. To send periodic emails (The email address you provide for order processing, will only be used to send you information and updates pertaining to your order)."]},{title:"3. How do we protect your information?",sections:["3.1. We implement a variety of security measures to maintain the safety of your personal information when you place an order or enter, submit, or access your personal information.","3.2. We offer the use of a secure server. All supplied sensitive/credit information is transmitted via Secure Socket Layer (SSL) technology and then encrypted into our Payment gateway providers database only to be accessible by those authorized with special access rights to such systems, and are required to keep the information confidential.","3.3. After a transaction, your private information (credit cards, social security numbers, financials, etc.) will not be stored on our servers."]},{title:"4. Do we use cookies?",sections:["4.1. Yes (Cookies are small files that a site or its service provider transfers to your computer\u2019s hard drive through your Web browser (if you allow) that enables the sites or service providers systems to recognize your browser and capture and remember certain information.","4.2. We use cookies to help us remember and process the items in your shopping cart and understand and save your preferences for future visits.","4.3. If you prefer, you can choose to have your computer warn you each time a cookie is being sent, or you can choose to turn off all cookies via your browser settings. Like most websites, if you turn your cookies off, some of our services may not function properly. However, you can still place orders over the telephone or by contacting customer service."]},{title:"5. Do we disclose any information to outside parties?",sections:["5.1. We do not sell, trade, or otherwise transfer to outside parties your personally identifiable information. This does not include trusted third parties who assist us in operating our website, conducting our business, or servicing you, so long as those parties agree to keep this information confidential. We may also release your information when we believe release is appropriate to comply with the law, enforce our site policies, or protect ours or others rights, property, or safety. However, non-personally identifiable visitor information may be provided to other parties for marketing, advertising, or other uses."]},{title:"6. Third party links",sections:["6.1. Occasionally, at our discretion, we may include or offer third party products or services on our website. These third party sites have separate and independent privacy policies. We therefore have no responsibility or liability for the content and activities of these linked sites. Nonetheless, we seek to protect the integrity of our site and welcome any feedback about these sites."]},{title:"7. Personal Data Protection Act (Singapore)",sections:["7.1. By using this site, you agree to allow us to collect or use your information in an appropriate manner in accordance to the Personal Data Protection Act of Singapore."]},{title:"8. Online Privacy Policy Only",sections:["8.1. This online privacy policy applies only to information collected through our website and not to information collected offline."]},{title:"9. Terms and Conditions",sections:["9.1. Please also visit our Terms and Conditions section establishing the use, disclaimers, and limitations of liability governing the use of our website."]},{title:"10. Your Consent",sections:["10.1. By using our site, you consent to our website\u2019s Privacy Policy."]},{title:"11. Changes to our Privacy Policy",sections:["11.1. If we decide to change our privacy policy, we will post those changes on this page, and/or update the Privacy Policy modification date below."]},{title:"12. Contacting Us",sections:["12.1. If there are any questions regarding this Privacy Policy you may contact us using the contact form."]}];function PrivacyPolicySection({title:r,content:e}){return jsxRuntimeExports.jsxs("div",{className:"mb-5 last:mb-0",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg text-gray-900 mb-2 border-b border-gray-300 pb-1",children:r}),jsxRuntimeExports.jsx("div",{className:"space-y-3 text-gray-700 leading-snug",children:e.map((n,s)=>jsxRuntimeExports.jsx("p",{className:"text-sm",children:n},s))})]})}function PrivacyPolicy(){return jsxRuntimeExports.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 py-8 sm:py-10 bg-white",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-semibold mb-6 pb-2 text-center",style:{color:"#00579A"},children:"Privacy Policy"}),jsxRuntimeExports.jsx("div",{children:privacyPolicy.map((r,e)=>jsxRuntimeExports.jsx(PrivacyPolicySection,{title:r.title,content:r.sections},e))})]})}let termsData=[{title:"1. Information About Us",content:["1.1 www.homenoffice.sg is a site operated by Home n Office Products Pte. Ltd. We are registered in Singapore under the Business Registration Number 201312469W and with our registered office at 4 Changi South Lane #07-01/02, Singapore 486127. Our GST Registration Number is 201312469W."]},{title:"2. Service Availability",content:['2.1 Our site is only intended for use by people residing, businesses, and companies in Singapore ("the Serviced Country"). We do not accept orders from individuals outside of the Serviced Country.']},{title:"3. Your Status",content:["3.1 By placing an order through our site, you warrant that:","3.1.1 You are legally capable of entering into binding contracts;","3.1.2 You are resident in the Serviced Country."]},{title:"4. How the Contract is formed between You and Us",content:["4.1 After placing an online order, you will receive an e-mail from us acknowledging that we have received your order. Please note that this does not mean that your order has been accepted. Your order constitutes an offer to us to buy a Product. All online orders are subject to acceptance by us, and we will confirm such acceptance to you by email. The contract between us ('the Contract') will only be formed when we deliver the items to you.","4.2 Subjected to actual stock availability, item orders may be replaced with alternatives subjected to a verbal or written confirmation with you. For items that cannot be replaced, we will contact you to give you the option to cancel. If payment has been made, you will be refunded of the amount paid.","4.3 All orders placed online will be fulfilled within 5 business days unless otherwise advised. Business days exclude Saturday, Sunday and Public Holidays.","4.4 You are obliged to make payment in FULL by the payment option you select when you check out your orders.","4.5 Each batch of goods may differ due to manufacturing constraints. In the event if you are not satisfied with any products, you may return to us within 14 days after delivery. The Product must be unused in the Original condition and it must not be pre-order product. Please refer to our return & refund policy."]},{title:"5. Our Status",content:["5.1 We may provide links on our site to the websites of other companies, whether affiliated with us or not. We cannot give any undertaking that the products you purchase from companies to whose website we have provided a link will be of satisfactory quality."]},{title:"6. Price and Payment",content:["6.1 The price of any Products will be as quoted on our site from time to time, except in cases of obvious error.","6.2 Our site contains a large number of Products and it is always possible that, despite our best efforts, some of the Products listed on our site may be incorrectly priced. We will normally verify prices as part of our dispatch procedures so that, where a Product's correct price is less than our stated price, we will charge the lower amount when dispatching the Product to you. If a Product\u2019s correct price is higher than the price stated on our site we might at our discretion decide to honour the lower (incorrect) price or either contact you for instructions before dispatching the Product, or reject your order and notify you of such rejection.","6.3 We are under no obligation to provide the Product to you at the incorrect (lower) price even after we have provided you with an email confirmation."]},{title:"7. Our Liability",content:["7.1 We warrant to you that any Product purchased from us through our site is of satisfactory quality.","7.2 Our liability in connection with any Product purchased through our site is strictly limited to the purchase price of that Product.","7.3 Unless otherwise stated, all products warranty will be covered by the respective brand owner."]},{title:"8. Notices",content:["8.1 All notices given by you to us must be given to Home n Office Products Pte. Ltd. at 4 Changi South Lane #07-01/02, Singapore 486127. We may give notice to you either via an e-mail or postal address that you provided to us when placing an order."]},{title:"9. Events Outside our Control",content:["9.1 We will not be liable or responsible for any failure to perform, or delay in performance of, any of our obligations under a Contract that is caused by events outside our reasonable control ('Force Majeure Event').","9.2 A Force Majeure Event includes any act, event, non-happening, omission or accident beyond our reasonable control and includes in particular (without limitation) the following:","9.2.1 strikes, lock-outs or other industrial action;","9.2.2 civil commotion, riot, invasion, terrorist attack or threat of terrorist attack, war (whether declared or not) or threat or preparation for war;","9.2.3 fire, explosion, storm, flood, earthquake, subsidence, epidemic or other natural disaster;","9.2.4 impossibility of the use of railways, shipping, aircraft, motor transport or other means of public or private transport;","9.2.5 impossibility of the use of public or private telecommunications networks; or","9.2.6 the acts, decrees, legislation, regulations or restrictions of any government.","9.3 Our performance under any Contract is deemed to be suspended for the period that the Force Majeure Event continues, and we will have an extension of time for performance for the duration of that period. We will use our reasonable endeavours to bring the Force Majeure Event to a close or to find a solution by which our obligations under the Contract may be performed despite the Force Majeure Event."]},{title:"10. Waiver",content:["10.1 If we fail, at any time during the term of a Contract, to insist upon the strict performance of any of your obligations under the Contract or any of these Terms and Conditions, or if we fail to exercise any of the rights or remedies to which we are entitled under the Contract, this shall not constitute a waiver of such rights or remedies and shall not relieve you from compliance with such obligations.","10.2 A waiver by us of any default shall not constitute a waiver of any subsequent default.","10.3 No waiver by us of any of these Terms and Conditions shall be effective unless it is expressly stated to be a waiver and is communicated to you in writing."]},{title:"11. Severability",content:["11.1 If any of these Terms and Conditions or any provisions of a Contract are determined by any competent authority to be invalid, unlawful or unenforceable to any extent, such term, condition or provision will to that extent be severed from the remaining terms, conditions and provisions which will continue to be valid to the fullest extent permitted by law."]},{title:"12. Entire Agreement",content:["12.1 These Terms and Conditions and any document expressly referred to in them represent the entire agreement between us in relation to the subject matter of any Contract and supersede any prior agreement, understanding or arrangement between us, whether oral or in writing.","12.2 We each acknowledge that, in entering into a Contract, neither of us has relied on any representation, undertaking or promise given by the other and that nothing may be implied from anything said or written in negotiations between us prior to such Contract except as expressly stated in these Terms and Conditions.","12.3 Neither of us shall have any remedy in respect of any untrue statement made by the other, whether orally or in writing, prior to the date of any Contract (unless such untrue statement was made fraudulently) and the other party\u2019s only remedy shall be for breach of contract as provided in these Terms and Conditions."]},{title:"13. Our Right to Vary these Terms and Conditions",content:["13.1 We have the right to revise and amend these Terms and Conditions from time to time.","13.2 You will be subject to the Policies and Terms and Conditions in force at the time that you order Products from us, unless any change to those Policies or these Terms and Conditions is required to be made by law or governmental authority (in which case it will apply to orders previously placed by you), or if we notify you of the change to those Policies or these Terms and Conditions before we provide you with the Dispatch Confirmation (in which case we have the right to assume that you have accepted the change to the Terms and Conditions, unless you notify us to the contrary within seven working days of receipt by you of the Products)."]},{title:"14. Law and Jurisdiction",content:["14.1 Contracts for the purchase of Products through our site will be governed by the Law of Singapore. Any dispute arising from, or related to, such Contracts shall be subject to the non-exclusive jurisdiction of the Courts of The Republic of Singapore."]}];function TermsSection({title:r,content:e,index:n}){return jsxRuntimeExports.jsxs("div",{className:"mb-5 last:mb-0",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg text-gray-900 mb-2 border-b border-gray-300 pb-1",children:r}),jsxRuntimeExports.jsx("div",{className:"space-y-3 text-gray-700 leading-snug",children:e.map((s,o)=>jsxRuntimeExports.jsx("p",{className:"text-sm",children:s},`${n}-${o}`))})]})}function TermsCondditions(){return jsxRuntimeExports.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 py-8 sm:py-10 bg-white",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-semibold mb-6 pb-2 text-center",style:{color:"#00579A"},children:"Terms & Conditions"}),jsxRuntimeExports.jsx("div",{children:termsData.map((r,e)=>jsxRuntimeExports.jsx(TermsSection,{title:r.title,content:r.content,index:e},e))})]})}const A=["A'zone","Artline","ASUS","Aurora","Avery"],B=["Belkin","Bindermax","Biosystem","Boncafe","Brother"],C=["Canon","Carl","Casio","Command"],D=["Daiyo","Dell","Derwent","Dettol","Double A","Durable"],E=["Elba","Energizer","Epson"],F=["F&N","Faber-Castell","Fellowes","Fuji Xerox/Fujifilm"],G=["GBC","Gold Kili"],H=["HAN","Herma","Hi-Bond","HnO","Hopax","HP","HSM","Hup Seng"],I=["IK"],J=["Julie's","Jupiter"],K=["Kejea","Kensington","KIOXIA","Kokuyo"],L=["Latech","Legamaster","Leitz","Lenovo","Lipco","Lipton","Livi","Logitech","Loytape"],M=["Maggi","MARVY","Max","Mayspies","Myojo"],N=["NCE","Nescafe","Nestle","Nikko","Nongshim"],O=["OKI","OldTown","Owl"],P=["PaperOne","Pentel","Perrier","Pilot","Pokka","POLAR","Post-it","PurSoft"],R=["Rexel"],S=["Safescan","Samsung","Scotch","Scotch-Brite","Shiny","Sigel","SIS","Stabilo","Staedtler","STZ","SUM","Sunflower","Super","SureMark"],T=["Targus","TP-Link","TruSens"],U=["UFC","UHU","Uni-Ball"],V=["ViewSonic"],Y=["Yeo's","Yuri"],brand={"0-9":["3M"],A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,R,S,T,U,V,Y};function Brand(){let r=reactExports.useRef({}),e=Object.keys(brand),n=s=>{r.current[s]&&r.current[s].scrollIntoView({behavior:"smooth",block:"start"})};return jsxRuntimeExports.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8 sm:py-10 bg-white",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl text-center mb-6 pb-2 border-b border-gray-200",style:{color:"#00579A"},children:"Find Your Favorite Brand"}),jsxRuntimeExports.jsxs("div",{className:"text-center mb-8 p-3 bg-gray-50 border border-gray-200 rounded-lg shadow-sm sticky top-0 z-10",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-600 mr-3 hidden sm:inline",children:"Brand Index:"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap justify-center gap-1.5 sm:gap-2",children:e.map(s=>jsxRuntimeExports.jsx("button",{onClick:()=>n(s),className:`text-xs font-medium w-6 h-6 flex items-center justify-center \r
                                rounded-full text-gray-700 bg-white border border-gray-300\r
                                hover:bg-blue-600 hover:text-white transition-colors duration-150`,children:s},s))})]}),jsxRuntimeExports.jsx("div",{className:"divide-y divide-gray-100",children:e.map(s=>jsxRuntimeExports.jsxs("div",{ref:o=>r.current[s]=o,className:"py-4 pt-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl text-gray-900 mb-3",id:`brand-${s}`,children:s}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2 sm:gap-3",children:brand[s].map(o=>jsxRuntimeExports.jsx("button",{className:`px-3 py-1 text-sm text-gray-700 bg-white border border-gray-300 rounded-md \r
                                        hover:bg-gray-100 transition-colors duration-150 shadow-sm`,children:o},o))})]},s))})]})}function App(){return jsxRuntimeExports.jsx(AuthProvider,{children:jsxRuntimeExports.jsx(ProductsProvider,{children:jsxRuntimeExports.jsx(CartProvider,{children:jsxRuntimeExports.jsx(Routes,{children:jsxRuntimeExports.jsxs(Route,{path:"/",element:jsxRuntimeExports.jsx(Layout,{}),children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(Home,{})}),jsxRuntimeExports.jsx(Route,{path:"register",element:jsxRuntimeExports.jsx(Register,{})}),jsxRuntimeExports.jsx(Route,{path:"brands",element:jsxRuntimeExports.jsx(Brand,{})}),jsxRuntimeExports.jsx(Route,{path:"aboutUs",element:jsxRuntimeExports.jsx(AboutUs,{})}),jsxRuntimeExports.jsx(Route,{path:"mywishlist",element:jsxRuntimeExports.jsx(MyWishList,{})}),jsxRuntimeExports.jsx(Route,{path:"privacyPolicy",element:jsxRuntimeExports.jsx(PrivacyPolicy,{})}),jsxRuntimeExports.jsx(Route,{path:"termsConditions",element:jsxRuntimeExports.jsx(TermsCondditions,{})}),jsxRuntimeExports.jsx(Route,{path:"logout",element:jsxRuntimeExports.jsx(Logout,{})}),jsxRuntimeExports.jsx(Route,{path:"myaccount",element:jsxRuntimeExports.jsx(MyAccount,{})}),jsxRuntimeExports.jsx(Route,{path:"cart",element:jsxRuntimeExports.jsx(CartPage,{})}),jsxRuntimeExports.jsx(Route,{path:"home",element:jsxRuntimeExports.jsx(Home,{})}),jsxRuntimeExports.jsx(Route,{path:"login",element:jsxRuntimeExports.jsx(Login,{})}),jsxRuntimeExports.jsx(Route,{path:"reset",element:jsxRuntimeExports.jsx(Reset,{})}),jsxRuntimeExports.jsx(Route,{path:"contactUs",element:jsxRuntimeExports.jsx(ContactUs,{})}),jsxRuntimeExports.jsx(Route,{path:"faq",element:jsxRuntimeExports.jsx(FAQ,{})}),jsxRuntimeExports.jsx(Route,{path:"category/:categoryName",element:jsxRuntimeExports.jsx(CategoryPage,{})}),jsxRuntimeExports.jsx(Route,{path:"product/:productId",element:jsxRuntimeExports.jsx(ProductPage,{})})]})})})})})}ReactDOM.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx(App,{})})}));
